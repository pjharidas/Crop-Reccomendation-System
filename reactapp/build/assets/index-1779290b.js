import{r as be,a as FE,R as jE,g as VE,c as jp,b as Cr}from"./react-vendor-f56200e5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var G5={exports:{}},Jf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE=be,UE=Symbol.for("react.element"),qE=Symbol.for("react.fragment"),HE=Object.prototype.hasOwnProperty,zE=BE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WE={key:!0,ref:!0,__self:!0,__source:!0};function $5(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)HE.call(e,i)&&!WE.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:UE,type:t,key:s,ref:o,props:r,_owner:zE.current}}Jf.Fragment=qE;Jf.jsx=$5;Jf.jsxs=$5;G5.exports=Jf;var se=G5.exports,Rg={},A2=FE;Rg.createRoot=A2.createRoot,Rg.hydrateRoot=A2.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vc.apply(this,arguments)}var Us;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Us||(Us={}));const S2="popstate";function GE(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return kg("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:K5(r)}return KE(e,n,null,t)}function Sn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Km(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $E(){return Math.random().toString(36).substr(2,8)}function x2(t,e){return{usr:t.state,key:t.key,idx:e}}function kg(t,e,n,i){return n===void 0&&(n=null),Vc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ml(e):e,{state:n,key:e&&e.key||i||$E()})}function K5(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ml(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function KE(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Us.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Vc({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Us.Pop;let x=h(),w=x==null?null:x-c;c=x,l&&l({action:a,location:b.location,delta:w})}function m(x,w){a=Us.Push;let A=kg(b.location,x,w);n&&n(A,x),c=h()+1;let S=x2(A,c),k=b.createHref(A);try{o.pushState(S,"",k)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;r.location.assign(k)}s&&l&&l({action:a,location:b.location,delta:1})}function p(x,w){a=Us.Replace;let A=kg(b.location,x,w);n&&n(A,x),c=h();let S=x2(A,c),k=b.createHref(A);o.replaceState(S,"",k),s&&l&&l({action:a,location:b.location,delta:0})}function v(x){let w=r.location.origin!=="null"?r.location.origin:r.location.href,A=typeof x=="string"?x:K5(x);return Sn(w,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,w)}let b={get action(){return a},get location(){return t(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(S2,d),l=x,()=>{r.removeEventListener(S2,d),l=null}},createHref(x){return e(r,x)},createURL:v,encodeLocation(x){let w=v(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(x){return o.go(x)}};return b}var E2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(E2||(E2={}));function YE(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?ml(e):e,r=J5(i.pathname||"/",n);if(r==null)return null;let s=Y5(t);XE(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=sT(s[a],lT(r));return o}function Y5(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Sn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Oo([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Sn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Y5(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:iT(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of X5(s.path))r(s,o,l)}),e}function X5(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=X5(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function XE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rT(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const JE=/^:\w+$/,QE=3,ZE=2,eT=1,tT=10,nT=-2,T2=t=>t==="*";function iT(t,e){let n=t.split("/"),i=n.length;return n.some(T2)&&(i+=nT),e&&(i+=ZE),n.filter(r=>!T2(r)).reduce((r,s)=>r+(JE.test(s)?QE:s===""?eT:tT),i)}function rT(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function sT(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=r==="/"?e:e.slice(r.length)||"/",h=oT({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(i,h.params);let d=a.route;s.push({params:i,pathname:Oo([r,h.pathname]),pathnameBase:pT(Oo([r,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(r=Oo([r,h.pathnameBase]))}return s}function oT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=aT(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{if(h==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return c[h]=cT(a[d]||"",h),c},{}),pathname:s,pathnameBase:o,pattern:t}}function aT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Km(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(i.push(a),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function lT(t){try{return decodeURI(t)}catch(e){return Km(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cT(t,e){try{return decodeURIComponent(t)}catch(n){return Km(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function J5(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function uT(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ml(t):t;return{pathname:n?n.startsWith("/")?n:hT(n,e):e,search:gT(i),hash:mT(r)}}function hT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Vp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dT(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=ml(t):(r=Vc({},t),Sn(!r.pathname||!r.pathname.includes("?"),Vp("?","pathname","search",r)),Sn(!r.pathname||!r.pathname.includes("#"),Vp("#","pathname","hash",r)),Sn(!r.search||!r.search.includes("#"),Vp("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;r.pathname=m.join("/")}a=d>=0?e[d]:"/"}let l=uT(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Oo=t=>t.join("/").replace(/\/\/+/g,"/"),pT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Q5=["post","put","patch","delete"];new Set(Q5);const vT=["get",...Q5];new Set(vT);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sf.apply(this,arguments)}const Ym=be.createContext(null),_T=be.createContext(null),Qf=be.createContext(null),Zf=be.createContext(null),yl=be.createContext({outlet:null,matches:[],isDataRoute:!1}),Z5=be.createContext(null);function ed(){return be.useContext(Zf)!=null}function e_(){return ed()||Sn(!1),be.useContext(Zf).location}function t_(t){be.useContext(Qf).static||be.useLayoutEffect(t)}function td(){let{isDataRoute:t}=be.useContext(yl);return t?RT():wT()}function wT(){ed()||Sn(!1);let t=be.useContext(Ym),{basename:e,navigator:n}=be.useContext(Qf),{matches:i}=be.useContext(yl),{pathname:r}=e_(),s=JSON.stringify(fT(i).map(l=>l.pathnameBase)),o=be.useRef(!1);return t_(()=>{o.current=!0}),be.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=dT(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Oo([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,r,t])}function bT(t,e){return AT(t,e)}function AT(t,e,n){ed()||Sn(!1);let{navigator:i}=be.useContext(Qf),{matches:r}=be.useContext(yl),s=r[r.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=e_(),c;if(e){var h;let b=typeof e=="string"?ml(e):e;a==="/"||(h=b.pathname)!=null&&h.startsWith(a)||Sn(!1),c=b}else c=l;let d=c.pathname||"/",m=a==="/"?d:d.slice(a.length)||"/",p=YE(t,{pathname:m}),v=IT(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:Oo([a,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?a:Oo([a,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),r,n);return e&&v?be.createElement(Zf.Provider,{value:{location:sf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Us.Pop}},v):v}function ST(){let t=LT(),e=yT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return be.createElement(be.Fragment,null,be.createElement("h2",null,"Unexpected Application Error!"),be.createElement("h3",{style:{fontStyle:"italic"}},e),n?be.createElement("pre",{style:r},n):null,s)}const xT=be.createElement(ST,null);class ET extends be.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?be.createElement(yl.Provider,{value:this.props.routeContext},be.createElement(Z5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TT(t){let{routeContext:e,match:n,children:i}=t,r=be.useContext(Ym);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),be.createElement(yl.Provider,{value:e},i)}function IT(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Sn(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let h=l.route.id?o==null?void 0:o[l.route.id]:null,d=null;n&&(d=l.route.errorElement||xT);let m=e.concat(s.slice(0,c+1)),p=()=>{let v;return h?v=d:l.route.Component?v=be.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=a,be.createElement(TT,{match:l,routeContext:{outlet:a,matches:m,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?be.createElement(ET,{location:n.location,revalidation:n.revalidation,component:d,error:h,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var n_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(n_||{}),of=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(of||{});function PT(t){let e=be.useContext(Ym);return e||Sn(!1),e}function CT(t){let e=be.useContext(_T);return e||Sn(!1),e}function NT(t){let e=be.useContext(yl);return e||Sn(!1),e}function i_(t){let e=NT(),n=e.matches[e.matches.length-1];return n.route.id||Sn(!1),n.route.id}function LT(){var t;let e=be.useContext(Z5),n=CT(of.UseRouteError),i=i_(of.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function RT(){let{router:t}=PT(n_.UseNavigateStable),e=i_(of.UseNavigateStable),n=be.useRef(!1);return t_(()=>{n.current=!0}),be.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,sf({fromRouteId:e},s)))},[t,e])}function Ao(t){Sn(!1)}function kT(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Us.Pop,navigator:s,static:o=!1}=t;ed()&&Sn(!1);let a=e.replace(/^\/*/,"/"),l=be.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=ml(i));let{pathname:c="/",search:h="",hash:d="",state:m=null,key:p="default"}=i,v=be.useMemo(()=>{let b=J5(c,a);return b==null?null:{location:{pathname:b,search:h,hash:d,state:m,key:p},navigationType:r}},[a,c,h,d,m,p,r]);return v==null?null:be.createElement(Qf.Provider,{value:l},be.createElement(Zf.Provider,{children:n,value:v}))}function DT(t){let{children:e,location:n}=t;return bT(Dg(e),n)}new Promise(()=>{});function Dg(t,e){e===void 0&&(e=[]);let n=[];return be.Children.forEach(t,(i,r)=>{if(!be.isValidElement(i))return;let s=[...e,r];if(i.type===be.Fragment){n.push.apply(n,Dg(i.props.children,s));return}i.type!==Ao&&Sn(!1),!i.props.index||!i.props.children||Sn(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Dg(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const OT="startTransition",I2=jE[OT];function MT(t){let{basename:e,children:n,future:i,window:r}=t,s=be.useRef();s.current==null&&(s.current=GE({window:r,v5Compat:!0}));let o=s.current,[a,l]=be.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=be.useCallback(d=>{c&&I2?I2(()=>l(d)):l(d)},[l,c]);return be.useLayoutEffect(()=>o.listen(h),[o,h]),be.createElement(kT,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}var P2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(P2||(P2={}));var C2;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(C2||(C2={}));const FT=()=>se.jsx("footer",{className:"bg-green-900 py-4",children:se.jsx("div",{className:"container mx-auto text-white text-center",children:se.jsxs("p",{className:"text-sm",children:["Crop Recommendation © ",new Date().getFullYear()]})})}),jT="/Crop-Recommendation-System/assets/farm-7d7d39bd.mp4",VT=()=>se.jsx("div",{children:se.jsxs("div",{className:"w-full h-[100vh] top-[90px]",children:[se.jsx("div",{className:"w-[100%] h-full absolute bg-black opacity-30"}),se.jsx("video",{className:"object-cover h-full w-full absolute -z-10",src:jT,autoPlay:!0,loop:!0,muted:!0}),se.jsxs("div",{className:"w-full h-[90%] flex flex-col justify-center items-center text-white px-4 text-center",children:[se.jsxs("div",{className:"border-2 bg-white opacity-50 rounded-lg mt-6",children:[se.jsx("h1",{className:"text-black placeholder-opacity-0 text-4xl font-bold",children:"Our AIM"}),se.jsx("p",{className:"w-[150vh] text-2xl text-black",children:"🌾 Sustainable Agriculture: We're committed to sustainable farming practices. GreenHarvest suggests crops and strategies that promote soil health and reduce environmental impact."})]}),se.jsxs("div",{className:"border-2 bg-white opacity-50 rounded-lg my-10",children:[se.jsx("h1",{className:"text-black placeholder-opacity-0 text-4xl font-bold",children:"What's in it for you?"}),se.jsx("p",{className:"w-[150vh] text-2xl text-black",children:"📈 Maximize Profits: Increase your farm's productivity and profitability by choosing the right crops at the right time. Our recommendations are designed to maximize your yields and minimize risks."})]})]})]})}),BT="/Crop-Recommendation-System/assets/logo-green-a8953653.png",UT=({logged:t})=>{const e=td();be.useState(!1);const n=()=>{e(t?"/dashboard":"/login")};return se.jsx("div",{className:"w-full h-[90px] bg-green-950",children:se.jsxs("div",{className:"max-w-[1240px] mx-auto px-4 flex justify-between items-center h-full",children:[se.jsx("div",{children:se.jsx("img",{className:"w-[90px] rounded-lg",src:BT})}),se.jsx("div",{className:"hidden md:flex text-green-400",children:se.jsxs("ul",{className:"flex items-center",children:[se.jsx("div",{children:se.jsx("button",{onClick:()=>{n()},children:"Login | Signup"})}),se.jsx("span",{className:"px-4"}),se.jsx("button",{onClick:()=>e("/about"),children:"About us"})]})})]})})},N2=({logged:t})=>se.jsxs("div",{children:[se.jsx(UT,{logged:t}),se.jsx(VT,{}),se.jsx(FT,{})]}),qT=()=>{const t=["Wheat","Corn","Green-peas","Cabbage","Cauli-flower"],e=["Black","High-moisture","Silt","Low ammonia","High phosphorus"];return se.jsxs("div",{className:"flex flex-col py-10 px-16 h-screen overflow-y-auto w-full",children:[se.jsx("div",{className:"text-3xl font-semibold",children:se.jsx("h2",{children:"Dashboard"})}),se.jsxs("div",{className:"flex space-x-8 py-6",children:[se.jsxs("div",{className:"flex flex-col rounded-md border border-green-700 w-[400px] h-auto px-8 py-4 pb-6 justify-center",children:[se.jsx("div",{className:"flex justify-center text-xl font-semibold",children:se.jsx("h2",{children:"Crop History"})}),se.jsx("div",{className:"pl-5",children:se.jsx("ul",{style:{listStyleType:"circle"},children:t.map(n=>se.jsx("li",{children:n}))})})]}),se.jsxs("div",{className:"flex flex-col rounded-md border border-green-700 w-[400px] h-auto px-8 py-4 justify-center",children:[se.jsx("div",{className:"flex justify-center text-xl font-semibold",children:se.jsx("h2",{children:"Your land size"})}),se.jsx("p",{className:"text-gray-500 mt-3 self-center",children:"30 Acres"})]})]}),se.jsxs("div",{className:"flex space-x-8 py-6",children:[se.jsxs("div",{className:"flex flex-col rounded-md border border-green-700 w-[400px] h-min py-5 px-9 justify-center",children:[se.jsx("div",{className:"flex justify-center text-xl font-semibold",children:se.jsx("h2",{children:"Farm Properties"})}),se.jsx("div",{className:"pl-5",children:se.jsx("ul",{style:{listStyleType:"bullet"},children:e.map(n=>se.jsx("li",{children:n}))})})]}),se.jsxs("div",{className:"flex flex-col rounded-md border border-green-700 w-[400px] h-auto py-3 justify-center",children:[se.jsx("div",{className:"flex justify-center text-xl font-semibold",children:se.jsx("h2",{children:"Soil Tested?"})}),se.jsx("div",{className:"self-center",children:se.jsx("li",{className:"text-gray-500 mt-3",children:"Positive"})})]})]})]})},HT=()=>se.jsx("div",{children:"EditInfo"}),zT=()=>se.jsx("div",{children:"Help"});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le=function(t,e){if(!t)throw vl(e)},vl=function(t){return new Error("Firebase Database ("+r_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},WT=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Xm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),i.push(n[h],n[d],n[m],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new GT;const m=s<<2|a>>4;if(i.push(m),c!==64){const p=a<<4&240|c>>2;if(i.push(p),d!==64){const v=c<<6&192|d;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o_=function(t){const e=s_(t);return Xm.encodeByteArray(e,!0)},af=function(t){return o_(t).replace(/\./g,"")},lf=function(t){try{return Xm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){return a_(void 0,t)}function a_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!KT(n)||(t[n]=a_(t[n],e[n]));return t}function KT(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=()=>YT().__FIREBASE_DEFAULTS__,JT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lf(t[1]);return e&&JSON.parse(e)},Jm=()=>{try{return XT()||JT()||QT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},l_=t=>{var e,n;return(n=(e=Jm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},c_=t=>{const e=l_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},u_=()=>{var t;return(t=Jm())===null||t===void 0?void 0:t.config},h_=t=>{var e;return(e=Jm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[af(JSON.stringify(n)),af(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oi())}function ZT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function d_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e4(){const t=oi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function p_(){return r_.NODE_ADMIN===!0}function t4(){try{return typeof indexedDB=="object"}catch{return!1}}function n4(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4="FirebaseError";class ds extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=i4,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pu.prototype.create)}}class pu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?r4(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ds(r,a,i)}}function r4(t,e){return t.replace(s4,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const s4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t){return JSON.parse(t)}function qn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=Bc(lf(s[0])||""),n=Bc(lf(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},o4=function(t){const e=g_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},a4=function(t){const e=g_(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Og(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cf(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function uf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(L2(s)&&L2(o)){if(!uf(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function L2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function gc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function mc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)i[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const m=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(m<<1|m>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const m=(r<<5|r>>>27)+c+l+h+i[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=m}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function c4(t,e){const n=new u4(t,e);return n.subscribe.bind(n)}class u4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");h4(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Bp),r.error===void 0&&(r.error=Bp),r.complete===void 0&&(r.complete=Bp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bp(){}function Zm(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,Le(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},id=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t){return t&&t._delegate?t._delegate:t}class Xs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new nd;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g4(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:p4(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function p4(t){return t===So?void 0:t}function g4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new d4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const y4={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},v4=gt.INFO,_4={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},w4=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=_4[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rd{constructor(e){this.name=e,this._logLevel=v4,this._logHandler=w4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?y4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const b4=(t,e)=>e.some(n=>t instanceof n);let R2,k2;function A4(){return R2||(R2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S4(){return k2||(k2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m_=new WeakMap,Mg=new WeakMap,y_=new WeakMap,Up=new WeakMap,e0=new WeakMap;function x4(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hs(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&m_.set(n,t)}).catch(()=>{}),e0.set(e,t),e}function E4(t){if(Mg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Mg.set(t,e)}let Fg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||y_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function T4(t){Fg=t(Fg)}function I4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(qp(this),e,...n);return y_.set(i,e.sort?e.sort():[e]),Hs(i)}:S4().includes(t)?function(...e){return t.apply(qp(this),e),Hs(m_.get(this))}:function(...e){return Hs(t.apply(qp(this),e))}}function P4(t){return typeof t=="function"?I4(t):(t instanceof IDBTransaction&&E4(t),b4(t,A4())?new Proxy(t,Fg):t)}function Hs(t){if(t instanceof IDBRequest)return x4(t);if(Up.has(t))return Up.get(t);const e=P4(t);return e!==t&&(Up.set(t,e),e0.set(e,t)),e}const qp=t=>e0.get(t);function C4(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Hs(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Hs(o.result),l.oldVersion,l.newVersion,Hs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const N4=["get","getKey","getAll","getAllKeys","count"],L4=["put","add","delete","clear"],Hp=new Map;function D2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hp.get(e))return Hp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=L4.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||N4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Hp.set(e,s),s}T4(t=>({...t,get:(e,n,i)=>D2(e,n)||t.get(e,n,i),has:(e,n)=>!!D2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k4(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function k4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jg="@firebase/app",O2="0.9.23";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new rd("@firebase/app"),D4="@firebase/app-compat",O4="@firebase/analytics-compat",M4="@firebase/analytics",F4="@firebase/app-check-compat",j4="@firebase/app-check",V4="@firebase/auth",B4="@firebase/auth-compat",U4="@firebase/database",q4="@firebase/database-compat",H4="@firebase/functions",z4="@firebase/functions-compat",W4="@firebase/installations",G4="@firebase/installations-compat",$4="@firebase/messaging",K4="@firebase/messaging-compat",Y4="@firebase/performance",X4="@firebase/performance-compat",J4="@firebase/remote-config",Q4="@firebase/remote-config-compat",Z4="@firebase/storage",eI="@firebase/storage-compat",tI="@firebase/firestore",nI="@firebase/firestore-compat",iI="firebase",rI="10.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="[DEFAULT]",sI={[jg]:"fire-core",[D4]:"fire-core-compat",[M4]:"fire-analytics",[O4]:"fire-analytics-compat",[j4]:"fire-app-check",[F4]:"fire-app-check-compat",[V4]:"fire-auth",[B4]:"fire-auth-compat",[U4]:"fire-rtdb",[q4]:"fire-rtdb-compat",[H4]:"fire-fn",[z4]:"fire-fn-compat",[W4]:"fire-iid",[G4]:"fire-iid-compat",[$4]:"fire-fcm",[K4]:"fire-fcm-compat",[Y4]:"fire-perf",[X4]:"fire-perf-compat",[J4]:"fire-rc",[Q4]:"fire-rc-compat",[Z4]:"fire-gcs",[eI]:"fire-gcs-compat",[tI]:"fire-fst",[nI]:"fire-fst-compat","fire-js":"fire-js",[iI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Map,Bg=new Map;function oI(t,e){try{t.container.addComponent(e)}catch(n){Wo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Go(t){const e=t.name;if(Bg.has(e))return Wo.debug(`There were multiple attempts to register component ${e}.`),!1;Bg.set(e,t);for(const n of hf.values())oI(n,t);return!0}function sd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},zs=new pu("app","Firebase",aI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=rI;function v_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Vg,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw zs.create("bad-app-name",{appName:String(r)});if(n||(n=u_()),!n)throw zs.create("no-options");const s=hf.get(r);if(s){if(uf(n,s.options)&&uf(i,s.config))return s;throw zs.create("duplicate-app",{appName:r})}const o=new m4(r);for(const l of Bg.values())o.addComponent(l);const a=new lI(n,i,o);return hf.set(r,a),a}function t0(t=Vg){const e=hf.get(t);if(!e&&t===Vg&&u_())return v_();if(!e)throw zs.create("no-app",{appName:t});return e}function Nr(t,e,n){var i;let r=(i=sI[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wo.warn(a.join(" "));return}Go(new Xs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firebase-heartbeat-database",uI=1,Uc="firebase-heartbeat-store";let zp=null;function __(){return zp||(zp=C4(cI,uI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Uc)}}}).catch(t=>{throw zs.create("idb-open",{originalErrorMessage:t.message})})),zp}async function hI(t){try{return await(await __()).transaction(Uc).objectStore(Uc).get(w_(t))}catch(e){if(e instanceof ds)Wo.warn(e.message);else{const n=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wo.warn(n.message)}}}async function M2(t,e){try{const i=(await __()).transaction(Uc,"readwrite");await i.objectStore(Uc).put(e,w_(t)),await i.done}catch(n){if(n instanceof ds)Wo.warn(n.message);else{const i=zs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wo.warn(i.message)}}}function w_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=1024,dI=30*24*60*60*1e3;class pI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=F2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=dI}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=F2(),{heartbeatsToSend:i,unsentEntries:r}=gI(this._heartbeatsCache.heartbeats),s=af(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function F2(){return new Date().toISOString().substring(0,10)}function gI(t,e=fI){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),j2(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),j2(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class mI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t4()?n4().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await hI(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return M2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return M2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function j2(t){return af(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t){Go(new Xs("platform-logger",e=>new R4(e),"PRIVATE")),Go(new Xs("heartbeat",e=>new pI(e),"PRIVATE")),Nr(jg,O2,t),Nr(jg,O2,"esm2017"),Nr("fire-js","")}yI("");var vI="firebase",_I="10.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr(vI,_I,"app");const V2="@firebase/database",B2="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b_="";function wI(t){b_=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),qn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Bc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ps(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bI(e)}}catch{}return new AI},Po=A_("localStorage"),Ug=A_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new rd("@firebase/database"),SI=function(){let t=1;return function(){return t++}}(),S_=function(t){const e=f4(t),n=new l4;n.update(e);const i=n.digest();return Xm.encodeByteArray(i)},gu=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=gu.apply(null,i):typeof i=="object"?e+=qn(i):e+=i,e+=" "}return e};let Mo=null,U2=!0;const xI=function(t,e){Le(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Qa.logLevel=gt.VERBOSE,Mo=Qa.log.bind(Qa),e&&Ug.set("logging_enabled",!0)):typeof t=="function"?Mo=t:(Mo=null,Ug.remove("logging_enabled"))},ei=function(...t){if(U2===!0&&(U2=!1,Mo===null&&Ug.get("logging_enabled")===!0&&xI(!0)),Mo){const e=gu.apply(null,t);Mo(e)}},mu=function(t){return function(...e){ei(t,...e)}},qg=function(...t){const e="FIREBASE INTERNAL ERROR: "+gu(...t);Qa.error(e)},as=function(...t){const e=`FIREBASE FATAL ERROR: ${gu(...t)}`;throw Qa.error(e),new Error(e)},vi=function(...t){const e="FIREBASE WARNING: "+gu(...t);Qa.warn(e)},EI=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},x_=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},TI=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ol="[MIN_NAME]",$o="[MAX_NAME]",wl=function(t,e){if(t===e)return 0;if(t===ol||e===$o)return-1;if(e===ol||t===$o)return 1;{const n=q2(t),i=q2(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},II=function(t,e){return t===e?0:t<e?-1:1},ic=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+qn(e))},n0=function(t){if(typeof t!="object"||t===null)return qn(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=qn(e[i]),n+=":",n+=n0(t[e[i]]);return n+="}",n},E_=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Vi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const T_=function(t){Le(!x_(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,o,a,l;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let m=parseInt(h.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),d=d+m}return d.toLowerCase()},PI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},CI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},NI=new RegExp("^-?(0*)\\d{1,10}$"),LI=-2147483648,RI=2147483647,q2=function(t){if(NI.test(t)){const e=Number(t);if(e>=LI&&e<=RI)return e}return null},bl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw vi("Exception was thrown by user callback.",n),e},Math.floor(0))}},kI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){vi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ei("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vi(e)}}class Za{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Za.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="5",I_="v",P_="s",C_="r",N_="f",L_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R_="ls",k_="p",Hg="ac",D_="websocket",O_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n,i,r,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Po.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Po.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function MI(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function F_(t,e,n){Le(typeof e=="string","typeof type must == string"),Le(typeof n=="object","typeof params must == object");let i;if(e===D_)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===O_)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);MI(t)&&(n.ns=t.namespace);const r=[];return Vi(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.counters_={}}incrementCounter(e,n=1){ps(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $T(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp={},Gp={};function r0(t){const e=t.toString();return Wp[e]||(Wp[e]=new FI),Wp[e]}function jI(t,e){const n=t.toString();return Gp[n]||(Gp[n]=e()),Gp[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&bl(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="start",BI="close",UI="pLPCommand",qI="pRTLPCB",j_="id",V_="pw",B_="ser",HI="cb",zI="seg",WI="ts",GI="d",$I="dframe",U_=1870,q_=30,KI=U_-q_,YI=25e3,XI=3e4;class Wa{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mu(e),this.stats_=r0(n),this.urlFn=l=>(this.appCheckToken&&(l[Hg]=this.appCheckToken),F_(n,O_,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new VI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(XI)),TI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new s0((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===H2)this.id=a,this.password=l;else if(o===BI)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[H2]="t",i[B_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[HI]=this.scriptTagHolder.uniqueCallbackIdentifier),i[I_]=i0,this.transportSessionId&&(i[P_]=this.transportSessionId),this.lastSessionId&&(i[R_]=this.lastSessionId),this.applicationId&&(i[k_]=this.applicationId),this.appCheckToken&&(i[Hg]=this.appCheckToken),typeof location<"u"&&location.hostname&&L_.test(location.hostname)&&(i[C_]=N_);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wa.forceAllow_=!0}static forceDisallow(){Wa.forceDisallow_=!0}static isAvailable(){return Wa.forceAllow_?!0:!Wa.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!PI()&&!CI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=qn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=o_(n),r=E_(i,KI);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[$I]="t",i[j_]=e,i[V_]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=qn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class s0{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=SI(),window[UI+this.uniqueCallbackIdentifier]=e,window[qI+this.uniqueCallbackIdentifier]=n,this.myIFrame=s0.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ei("frame writing exception"),a.stack&&ei(a.stack),ei(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ei("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[j_]=this.myID,e[V_]=this.myPW,e[B_]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+q_+i.length<=U_;){const o=this.pendingSegs.shift();i=i+"&"+zI+r+"="+o.seg+"&"+WI+r+"="+o.ts+"&"+GI+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(YI)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{ei("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=16384,QI=45e3;let ff=null;typeof MozWebSocket<"u"?ff=MozWebSocket:typeof WebSocket<"u"&&(ff=WebSocket);class rr{constructor(e,n,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mu(this.connId),this.stats_=r0(n),this.connURL=rr.connectionURL_(n,o,a,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const o={};return o[I_]=i0,typeof location<"u"&&location.hostname&&L_.test(location.hostname)&&(o[C_]=N_),n&&(o[P_]=n),i&&(o[R_]=i),r&&(o[Hg]=r),s&&(o[k_]=s),F_(e,D_,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Po.set("previous_websocket_failure",!0);try{let i;p_(),this.mySock=new ff(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){rr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&ff!==null&&!rr.forceDisallow_}static previouslyFailed(){return Po.isInMemoryStorage||Po.get("previous_websocket_failure")===!0}markConnectionHealthy(){Po.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Bc(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Le(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=qn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=E_(n,JI);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(QI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rr.responsesRequiredToBeHealthy=2;rr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Wa,rr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=rr&&rr.isAvailable();let i=n&&!rr.previouslyFailed();if(e.webSocketOnly&&(n||vi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[rr];else{const r=this.transports_=[];for(const s of qc.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);qc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}qc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=6e4,eP=5e3,tP=10*1024,nP=100*1024,$p="t",z2="d",iP="s",W2="r",rP="e",G2="o",$2="a",K2="n",Y2="p",sP="h";class oP{constructor(e,n,i,r,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mu("c:"+this.id+":"),this.transportManager_=new qc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=bc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>nP?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>tP?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if($p in e){const n=e[$p];n===$2?this.upgradeIfSecondaryHealthy_():n===W2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===G2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ic("t",e),i=ic("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Y2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:K2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ic("t",e),i=ic("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ic($p,e);if(z2 in e){const i=e[z2];if(n===sP){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===K2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===iP?this.onConnectionShutdown_(i):n===W2?this.onReset_(i):n===rP?qg("Server Error: "+i):n===G2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qg("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),i0!==i&&vi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),bc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ZI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(eP))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Y2,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Po.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.allowedEvents_=e,this.listeners_={},Le(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){Le(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends z_{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Qm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new df}getInitialEvent(e){return Le(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=32,J2=768;class $t{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ot(){return new $t("")}function mt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Js(t){return t.pieces_.length-t.pieceNum_}function Ht(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new $t(t.pieces_,e)}function W_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function aP(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function G_(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function $_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $t(e,0)}function An(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof $t)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new $t(n,0)}function yt(t){return t.pieceNum_>=t.pieces_.length}function ji(t,e){const n=mt(t),i=mt(e);if(n===null)return e;if(n===i)return ji(Ht(t),Ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function K_(t,e){if(Js(t)!==Js(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function or(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Js(t)>Js(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class lP{constructor(e,n){this.errorPrefix_=n,this.parts_=G_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=id(this.parts_[i]);Y_(this)}}function cP(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=id(e),Y_(t)}function uP(t){const e=t.parts_.pop();t.byteLength_-=id(e),t.parts_.length>0&&(t.byteLength_-=1)}function Y_(t){if(t.byteLength_>J2)throw new Error(t.errorPrefix_+"has a key path longer than "+J2+" bytes ("+t.byteLength_+").");if(t.parts_.length>X2)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+X2+") or object contains a cycle "+xo(t))}function xo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends z_{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new o0}getInitialEvent(e){return Le(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=1e3,hP=60*5*1e3,Q2=30*1e3,fP=1.3,dP=3e4,pP="server_kill",Z2=3;class ns extends H_{constructor(e,n,i,r,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ns.nextPersistentConnectionId_++,this.log_=mu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rc,this.maxReconnectDelay_=hP,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!p_())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");o0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&df.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(qn(s)),Le(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new nd,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),Le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Le(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;ns.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ps(e,"w")){const i=sl(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();vi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||a4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Q2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=o4(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),Le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const o={p:n,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+qn(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):qg("Unrecognized action received from server: "+qn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Le(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=rc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>dP&&(this.reconnectDelay_=rc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fP)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ns.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(d){Le(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,m]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?ei("getToken() completed but was canceled"):(ei("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=m&&m.token,a=new oP(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,p=>{vi(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(pP)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&vi(d),l())}}}interrupt(e){ei("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ei("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Og(this.interruptReasons_)&&(this.reconnectDelay_=rc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>n0(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new $t(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){ei("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Z2&&(this.reconnectDelay_=Q2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ei("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Z2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+b_.replace(/\./g,"-")]=1,Qm()?e["framework.cordova"]=1:d_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=df.getInstance().currentlyOnline();return Og(this.interruptReasons_)&&e}}ns.nextPersistentConnectionId_=0;ns.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new bt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new bt(ol,e),r=new bt(ol,n);return this.compare(i,r)!==0}minPost(){return bt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph;class X_ extends od{static get __EMPTY_NODE(){return Ph}static set __EMPTY_NODE(e){Ph=e}compare(e,n){return wl(e.name,n.name)}isDefinedOn(e){throw vl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return bt.MIN}maxPost(){return new bt($o,Ph)}makePost(e,n){return Le(typeof e=="string","KeyIndex indexValue must always be a string."),new bt(e,Ph)}toString(){return".key"}}const el=new X_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=class{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ii=class yc{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??yc.RED,this.left=r??xr.EMPTY_NODE,this.right=s??xr.EMPTY_NODE}copy(e,n,i,r,s){return new yc(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return xr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return xr.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,yc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,yc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Ii.RED=!0;Ii.BLACK=!1;class gP{copy(e,n,i,r,s){return this}insert(e,n,i){return new Ii(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let xr=class Kh{constructor(e,n=Kh.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Kh(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ii.BLACK,null,null))}remove(e){return new Kh(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ii.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ch(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ch(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ch(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ch(this.root_,null,this.comparator_,!0,e)}};xr.EMPTY_NODE=new gP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t,e){return wl(t.name,e.name)}function a0(t,e){return wl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zg;function yP(t){zg=t}const J_=function(t){return typeof t=="number"?"number:"+T_(t):"string:"+t},Q_=function(t){if(t.isLeafNode()){const e=t.val();Le(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ps(e,".sv"),"Priority must be a string or number.")}else Le(t===zg||t.isEmpty(),"priority of unexpected type.");Le(t===zg||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ey;class Pn{constructor(e,n=Pn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Le(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Q_(this.priorityNode_)}static set __childrenNodeConstructor(e){ey=e}static get __childrenNodeConstructor(){return ey}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Pn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Pn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return yt(e)?this:mt(e)===".priority"?this.priorityNode_:Pn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Pn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=mt(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(Le(i!==".priority"||Js(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Pn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ht(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+J_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=T_(this.value_):e+=this.value_,this.lazyHash_=S_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Pn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Pn.__childrenNodeConstructor?-1:(Le(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Pn.VALUE_TYPE_ORDER.indexOf(n),s=Pn.VALUE_TYPE_ORDER.indexOf(i);return Le(r>=0,"Unknown leaf type: "+n),Le(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Pn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z_,ew;function vP(t){Z_=t}function _P(t){ew=t}class wP extends od{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?wl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return bt.MIN}maxPost(){return new bt($o,new Pn("[PRIORITY-POST]",ew))}makePost(e,n){const i=Z_(e);return new bt(n,new Pn("[PRIORITY-POST]",i))}toString(){return".priority"}}const ni=new wP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=Math.log(2);class AP{constructor(e){const n=s=>parseInt(Math.log(s)/bP,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pf=function(t,e,n,i){t.sort(e);const r=function(l,c){const h=c-l;let d,m;if(h===0)return null;if(h===1)return d=t[l],m=n?n(d):d,new Ii(m,d.node,Ii.BLACK,null,null);{const p=parseInt(h/2,10)+l,v=r(l,p),b=r(p+1,c);return d=t[p],m=n?n(d):d,new Ii(m,d.node,Ii.BLACK,v,b)}},s=function(l){let c=null,h=null,d=t.length;const m=function(v,b){const x=d-v,w=d;d-=v;const A=r(x+1,w),S=t[x],k=n?n(S):S;p(new Ii(k,S.node,b,null,A))},p=function(v){c?(c.left=v,c=v):(h=v,c=v)};for(let v=0;v<l.count;++v){const b=l.nextBitIsOne(),x=Math.pow(2,l.count-(v+1));b?m(x,Ii.BLACK):(m(x,Ii.BLACK),m(x,Ii.RED))}return h},o=new AP(t.length),a=s(o);return new xr(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp;const ja={};class Jr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Le(ja&&ni,"ChildrenNode.ts has not been loaded"),Kp=Kp||new Jr({".priority":ja},{".priority":ni}),Kp}get(e){const n=sl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof xr?n:null}hasIndex(e){return ps(this.indexSet_,e.toString())}addIndex(e,n){Le(e!==el,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(bt.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=pf(i,e.getCompare()):a=ja;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Jr(h,c)}addToIndexes(e,n){const i=cf(this.indexes_,(r,s)=>{const o=sl(this.indexSet_,s);if(Le(o,"Missing index implementation for "+s),r===ja)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(bt.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),pf(a,o.getCompare())}else return ja;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new bt(e.name,a))),l.insert(e,e.node)}});return new Jr(i,this.indexSet_)}removeFromIndexes(e,n){const i=cf(this.indexes_,r=>{if(r===ja)return r;{const s=n.get(e.name);return s?r.remove(new bt(e.name,s)):r}});return new Jr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc;class Pt{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Q_(this.priorityNode_),this.children_.isEmpty()&&Le(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return sc||(sc=new Pt(new xr(a0),null,Jr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||sc}updatePriority(e){return this.children_.isEmpty()?this:new Pt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?sc:n}}getChild(e){const n=mt(e);return n===null?this:this.getImmediateChild(n).getChild(Ht(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Le(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new bt(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?sc:this.priorityNode_;return new Pt(r,o,s)}}updateChild(e,n){const i=mt(e);if(i===null)return n;{Le(mt(e)!==".priority"||Js(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Ht(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(ni,(o,a)=>{n[o]=a.val(e),i++,s&&Pt.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+J_(this.getPriority().val())+":"),this.forEachChild(ni,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":S_(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new bt(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new bt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new bt(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,bt.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,bt.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yu?-1:0}withIndex(e){if(e===el||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Pt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===el||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(ni),r=n.getIterator(ni);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===el?null:this.indexMap_.get(e.toString())}}Pt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class SP extends Pt{constructor(){super(new xr(a0),Pt.EMPTY_NODE,Jr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Pt.EMPTY_NODE}isEmpty(){return!1}}const yu=new SP;Object.defineProperties(bt,{MIN:{value:new bt(ol,Pt.EMPTY_NODE)},MAX:{value:new bt($o,yu)}});X_.__EMPTY_NODE=Pt.EMPTY_NODE;Pn.__childrenNodeConstructor=Pt;yP(yu);_P(yu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=!0;function Bn(t,e=null){if(t===null)return Pt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Le(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Pn(n,Bn(e))}if(!(t instanceof Array)&&xP){const n=[];let i=!1;if(Vi(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Bn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new bt(o,l)))}}),n.length===0)return Pt.EMPTY_NODE;const s=pf(n,mP,o=>o.name,a0);if(i){const o=pf(n,ni.getCompare());return new Pt(s,Bn(e),new Jr({".priority":o},{".priority":ni}))}else return new Pt(s,Bn(e),Jr.Default)}else{let n=Pt.EMPTY_NODE;return Vi(t,(i,r)=>{if(ps(t,i)&&i.substring(0,1)!=="."){const s=Bn(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(Bn(e))}}vP(Bn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP extends od{constructor(e){super(),this.indexPath_=e,Le(!yt(e)&&mt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?wl(e.name,n.name):s}makePost(e,n){const i=Bn(e),r=Pt.EMPTY_NODE.updateChild(this.indexPath_,i);return new bt(n,r)}maxPost(){const e=Pt.EMPTY_NODE.updateChild(this.indexPath_,yu);return new bt($o,e)}toString(){return G_(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP extends od{compare(e,n){const i=e.node.compareTo(n.node);return i===0?wl(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return bt.MIN}maxPost(){return bt.MAX}makePost(e,n){const i=Bn(e);return new bt(n,i)}toString(){return".value"}}const IP=new TP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){return{type:"value",snapshotNode:t}}function CP(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function NP(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ty(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function LP(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ni}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Le(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Le(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ol}hasEnd(){return this.endSet_}getIndexEndValue(){return Le(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Le(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$o}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Le(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ni}copy(){const e=new l0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ny(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ni?n="$priority":t.index_===IP?n="$value":t.index_===el?n="$key":(Le(t.index_ instanceof EP,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=qn(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=qn(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+qn(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=qn(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+qn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function iy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ni&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends H_{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=mu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Le(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=gf.getListenId_(e,i),a={};this.listens_[o]=a;const l=ny(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,i),sl(this.listens_,o)===a){let m;c?c===401?m="permission_denied":m="rest_error:"+c:m="ok",r(m,null)}})}unlisten(e,n){const i=gf.getListenId_(e,n);delete this.listens_[i]}get(e){const n=ny(e._queryParams),i=e._path.toString(),r=new nd;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_l(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Bc(a.responseText)}catch{vi("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&vi("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.rootNode_=Pt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(){return{value:null,children:new Map}}function tw(t,e,n){if(yt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=mt(e);t.children.has(i)||t.children.set(i,mf());const r=t.children.get(i);e=Ht(e),tw(r,e,n)}}function Wg(t,e,n){t.value!==null?n(e,t.value):kP(t,(i,r)=>{const s=new $t(e.toString()+"/"+i);Wg(r,s,n)})}function kP(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Vi(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=10*1e3,OP=30*1e3,MP=5*60*1e3;class FP{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new DP(e);const i=ry+(OP-ry)*Math.random();bc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Vi(e,(r,s)=>{s>0&&ps(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),bc(this.reportStats_.bind(this),Math.floor(Math.random()*2*MP))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Er||(Er={}));function nw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function iw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rw(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Er.ACK_USER_WRITE,this.source=nw()}operationForChild(e){if(yt(this.path)){if(this.affectedTree.value!=null)return Le(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $t(e));return new yf(Ot(),n,this.revert)}}else return Le(mt(this.path)===e,"operationForChild called for unrelated child."),new yf(Ht(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Er.OVERWRITE}operationForChild(e){return yt(this.path)?new Ko(this.source,Ot(),this.snap.getImmediateChild(e)):new Ko(this.source,Ht(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Er.MERGE}operationForChild(e){if(yt(this.path)){const n=this.children.subtree(new $t(e));return n.isEmpty()?null:n.value?new Ko(this.source,Ot(),n.value):new Hc(this.source,Ot(),n)}else return Le(mt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Hc(this.source,Ht(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(yt(e))return this.isFullyInitialized()&&!this.filtered_;const n=mt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function jP(t,e,n,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(LP(o.childName,o.snapshotNode))}),oc(t,r,"child_removed",e,i,n),oc(t,r,"child_added",e,i,n),oc(t,r,"child_moved",s,i,n),oc(t,r,"child_changed",e,i,n),oc(t,r,"value",e,i,n),r}function oc(t,e,n,i,r,s){const o=i.filter(a=>a.type===n);o.sort((a,l)=>BP(t,a,l)),o.forEach(a=>{const l=VP(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function VP(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function BP(t,e,n){if(e.childName==null||n.childName==null)throw vl("Should only compare child_ events.");const i=new bt(e.childName,e.snapshotNode),r=new bt(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t,e){return{eventCache:t,serverCache:e}}function Ac(t,e,n,i){return sw(new c0(e,n,i),t.serverCache)}function ow(t,e,n,i){return sw(t.eventCache,new c0(e,n,i))}function Gg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Yo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp;const UP=()=>(Yp||(Yp=new xr(II)),Yp);class qt{constructor(e,n=UP()){this.value=e,this.children=n}static fromObject(e){let n=new qt(null);return Vi(e,(i,r)=>{n=n.set(new $t(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ot(),value:this.value};if(yt(e))return null;{const i=mt(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(Ht(e),n);return s!=null?{path:An(new $t(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(yt(e))return this;{const n=mt(e),i=this.children.get(n);return i!==null?i.subtree(Ht(e)):new qt(null)}}set(e,n){if(yt(e))return new qt(n,this.children);{const i=mt(e),s=(this.children.get(i)||new qt(null)).set(Ht(e),n),o=this.children.insert(i,s);return new qt(this.value,o)}}remove(e){if(yt(e))return this.children.isEmpty()?new qt(null):new qt(null,this.children);{const n=mt(e),i=this.children.get(n);if(i){const r=i.remove(Ht(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new qt(null):new qt(this.value,s)}else return this}}get(e){if(yt(e))return this.value;{const n=mt(e),i=this.children.get(n);return i?i.get(Ht(e)):null}}setTree(e,n){if(yt(e))return n;{const i=mt(e),s=(this.children.get(i)||new qt(null)).setTree(Ht(e),n);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new qt(this.value,o)}}fold(e){return this.fold_(Ot(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(An(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Ot(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(yt(e))return null;{const s=mt(e),o=this.children.get(s);return o?o.findOnPath_(Ht(e),An(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ot(),n)}foreachOnPath_(e,n,i){if(yt(e))return this;{this.value&&i(n,this.value);const r=mt(e),s=this.children.get(r);return s?s.foreachOnPath_(Ht(e),An(n,r),i):new qt(null)}}foreach(e){this.foreach_(Ot(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(An(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.writeTree_=e}static empty(){return new lr(new qt(null))}}function Sc(t,e,n){if(yt(e))return new lr(new qt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=ji(r,e);return s=s.updateChild(o,n),new lr(t.writeTree_.set(r,s))}else{const r=new qt(n),s=t.writeTree_.setTree(e,r);return new lr(s)}}}function sy(t,e,n){let i=t;return Vi(n,(r,s)=>{i=Sc(i,An(e,r),s)}),i}function oy(t,e){if(yt(e))return lr.empty();{const n=t.writeTree_.setTree(e,new qt(null));return new lr(n)}}function $g(t,e){return na(t,e)!=null}function na(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ji(n.path,e)):null}function ay(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ni,(i,r)=>{e.push(new bt(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new bt(i,r.value))}),e}function Ws(t,e){if(yt(e))return t;{const n=na(t,e);return n!=null?new lr(new qt(n)):new lr(t.writeTree_.subtree(e))}}function Kg(t){return t.writeTree_.isEmpty()}function al(t,e){return aw(Ot(),t.writeTree_,e)}function aw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(Le(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=aw(An(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(An(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e){return dw(e,t)}function qP(t,e,n,i,r){Le(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Sc(t.visibleWrites,e,n)),t.lastWriteId=i}function HP(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function zP(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Le(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&WP(a,i.path)?r=!1:or(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return GP(t),!0;if(i.snap)t.visibleWrites=oy(t.visibleWrites,i.path);else{const a=i.children;Vi(a,l=>{t.visibleWrites=oy(t.visibleWrites,An(i.path,l))})}return!0}else return!1}function WP(t,e){if(t.snap)return or(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&or(An(t.path,n),e))return!0;return!1}function GP(t){t.visibleWrites=cw(t.allWrites,$P,Ot()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $P(t){return t.visible}function cw(t,e,n){let i=lr.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let a;if(s.snap)or(n,o)?(a=ji(n,o),i=Sc(i,a,s.snap)):or(o,n)&&(a=ji(o,n),i=Sc(i,Ot(),s.snap.getChild(a)));else if(s.children){if(or(n,o))a=ji(n,o),i=sy(i,a,s.children);else if(or(o,n))if(a=ji(o,n),yt(a))i=sy(i,Ot(),s.children);else{const l=sl(s.children,mt(a));if(l){const c=l.getChild(Ht(a));i=Sc(i,Ot(),c)}}}else throw vl("WriteRecord should have .snap or .children")}}return i}function uw(t,e,n,i,r){if(!i&&!r){const s=na(t.visibleWrites,e);if(s!=null)return s;{const o=Ws(t.visibleWrites,e);if(Kg(o))return n;if(n==null&&!$g(o,Ot()))return null;{const a=n||Pt.EMPTY_NODE;return al(o,a)}}}else{const s=Ws(t.visibleWrites,e);if(!r&&Kg(s))return n;if(!r&&n==null&&!$g(s,Ot()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(or(c.path,e)||or(e,c.path))},a=cw(t.allWrites,o,e),l=n||Pt.EMPTY_NODE;return al(a,l)}}}function KP(t,e,n){let i=Pt.EMPTY_NODE;const r=na(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ni,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=Ws(t.visibleWrites,e);return n.forEachChild(ni,(o,a)=>{const l=al(Ws(s,new $t(o)),a);i=i.updateImmediateChild(o,l)}),ay(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=Ws(t.visibleWrites,e);return ay(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function YP(t,e,n,i,r){Le(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=An(e,n);if($g(t.visibleWrites,s))return null;{const o=Ws(t.visibleWrites,s);return Kg(o)?r.getChild(n):al(o,r.getChild(n))}}function XP(t,e,n,i){const r=An(e,n),s=na(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const o=Ws(t.visibleWrites,r);return al(o,i.getNode().getImmediateChild(n))}else return null}function JP(t,e){return na(t.visibleWrites,e)}function QP(t,e,n,i,r,s,o){let a;const l=Ws(t.visibleWrites,e),c=na(l,Ot());if(c!=null)a=c;else if(n!=null)a=al(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),m=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let p=m.getNext();for(;p&&h.length<r;)d(p,i)!==0&&h.push(p),p=m.getNext();return h}else return[]}function ZP(){return{visibleWrites:lr.empty(),allWrites:[],lastWriteId:-1}}function Yg(t,e,n,i){return uw(t.writeTree,t.treePath,e,n,i)}function hw(t,e){return KP(t.writeTree,t.treePath,e)}function ly(t,e,n,i){return YP(t.writeTree,t.treePath,e,n,i)}function vf(t,e){return JP(t.writeTree,An(t.treePath,e))}function e3(t,e,n,i,r,s){return QP(t.writeTree,t.treePath,e,n,i,r,s)}function u0(t,e,n){return XP(t.writeTree,t.treePath,e,n)}function fw(t,e){return dw(An(t.treePath,e),t.writeTree)}function dw(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;Le(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Le(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,ty(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,NP(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,CP(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,ty(i,e.snapshotNode,r.oldSnap));else throw vl("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const pw=new n3;class h0{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new c0(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return u0(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Yo(this.viewCache_),s=e3(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}function i3(t,e){Le(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Le(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function r3(t,e,n,i,r){const s=new t3;let o,a;if(n.type===Er.OVERWRITE){const c=n;c.source.fromUser?o=Xg(t,e,c.path,c.snap,i,r,s):(Le(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!yt(c.path),o=_f(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===Er.MERGE){const c=n;c.source.fromUser?o=o3(t,e,c.path,c.children,i,r,s):(Le(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Jg(t,e,c.path,c.children,i,r,a,s))}else if(n.type===Er.ACK_USER_WRITE){const c=n;c.revert?o=c3(t,e,c.path,i,r,s):o=a3(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===Er.LISTEN_COMPLETE)o=l3(t,e,n.path,i,s);else throw vl("Unknown operation type: "+n.type);const l=s.getChanges();return s3(e,o,l),{viewCache:o,changes:l}}function s3(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Gg(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(PP(Gg(e)))}}function gw(t,e,n,i,r,s){const o=e.eventCache;if(vf(i,n)!=null)return e;{let a,l;if(yt(n))if(Le(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Yo(e),h=c instanceof Pt?c:Pt.EMPTY_NODE,d=hw(i,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Yg(i,Yo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=mt(n);if(c===".priority"){Le(Js(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=ly(i,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Ht(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const m=ly(i,n,o.getNode(),l);m!=null?d=o.getNode().getImmediateChild(c).updateChild(h,m):d=o.getNode().getImmediateChild(c)}else d=u0(i,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,r,s):a=o.getNode()}}return Ac(e,a,o.isFullyInitialized()||yt(n),t.filter.filtersNodes())}}function _f(t,e,n,i,r,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(yt(n))c=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,i);c=h.updateFullNode(l.getNode(),p,null)}else{const p=mt(n);if(!l.isCompleteForPath(n)&&Js(n)>1)return e;const v=Ht(n),x=l.getNode().getImmediateChild(p).updateChild(v,i);p===".priority"?c=h.updatePriority(l.getNode(),x):c=h.updateChild(l.getNode(),p,x,v,pw,null)}const d=ow(e,c,l.isFullyInitialized()||yt(n),h.filtersNodes()),m=new h0(r,d,s);return gw(t,d,n,r,m,a)}function Xg(t,e,n,i,r,s,o){const a=e.eventCache;let l,c;const h=new h0(r,e,s);if(yt(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Ac(e,c,!0,t.filter.filtersNodes());else{const d=mt(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=Ac(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=Ht(n),p=a.getNode().getImmediateChild(d);let v;if(yt(m))v=i;else{const b=h.getCompleteChild(d);b!=null?W_(m)===".priority"&&b.getChild($_(m)).isEmpty()?v=b:v=b.updateChild(m,i):v=Pt.EMPTY_NODE}if(p.equals(v))l=e;else{const b=t.filter.updateChild(a.getNode(),d,v,m,h,o);l=Ac(e,b,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function cy(t,e){return t.eventCache.isCompleteForChild(e)}function o3(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{const h=An(n,l);cy(e,mt(h))&&(a=Xg(t,a,h,c,r,s,o))}),i.foreach((l,c)=>{const h=An(n,l);cy(e,mt(h))||(a=Xg(t,a,h,c,r,s,o))}),a}function uy(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Jg(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;yt(n)?c=i:c=new qt(null).setTree(n,i);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,m)=>{if(h.hasChild(d)){const p=e.serverCache.getNode().getImmediateChild(d),v=uy(t,p,m);l=_f(t,l,new $t(d),v,r,s,o,a)}}),c.children.inorderTraversal((d,m)=>{const p=!e.serverCache.isCompleteForChild(d)&&m.value===null;if(!h.hasChild(d)&&!p){const v=e.serverCache.getNode().getImmediateChild(d),b=uy(t,v,m);l=_f(t,l,new $t(d),b,r,s,o,a)}}),l}function a3(t,e,n,i,r,s,o){if(vf(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(yt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return _f(t,e,n,l.getNode().getChild(n),r,s,a,o);if(yt(n)){let c=new qt(null);return l.getNode().forEachChild(el,(h,d)=>{c=c.set(new $t(h),d)}),Jg(t,e,n,c,r,s,a,o)}else return e}else{let c=new qt(null);return i.foreach((h,d)=>{const m=An(n,h);l.isCompleteForPath(m)&&(c=c.set(h,l.getNode().getChild(m)))}),Jg(t,e,n,c,r,s,a,o)}}function l3(t,e,n,i,r){const s=e.serverCache,o=ow(e,s.getNode(),s.isFullyInitialized()||yt(n),s.isFiltered());return gw(t,o,n,i,pw,r)}function c3(t,e,n,i,r,s){let o;if(vf(i,n)!=null)return e;{const a=new h0(i,e,r),l=e.eventCache.getNode();let c;if(yt(n)||mt(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Yg(i,Yo(e));else{const d=e.serverCache.getNode();Le(d instanceof Pt,"serverChildren would be complete if leaf node"),h=hw(i,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=mt(n);let d=u0(i,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,Ht(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,Pt.EMPTY_NODE,Ht(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Yg(i,Yo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||vf(i,Ot())!=null,Ac(e,c,o,t.filter.filtersNodes())}}function u3(t,e){const n=Yo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!yt(e)&&!n.getImmediateChild(mt(e)).isEmpty())?n.getChild(e):null}function hy(t,e,n,i){e.type===Er.MERGE&&e.source.queryId!==null&&(Le(Yo(t.viewCache_),"We should always have a full cache before handling merges"),Le(Gg(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=r3(t.processor_,r,e,n,i);return i3(t.processor_,s.viewCache),Le(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,h3(t,s.changes,s.viewCache.eventCache.getNode(),null)}function h3(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return jP(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fy;function f3(t){Le(!fy,"__referenceConstructor has already been defined"),fy=t}function f0(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return Le(s!=null,"SyncTree gave us an op for an invalid query."),hy(s,e,n,i)}else{let s=[];for(const o of t.views.values())s=s.concat(hy(o,e,n,i));return s}}function d0(t,e){let n=null;for(const i of t.views.values())n=n||u3(i,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dy;function d3(t){Le(!dy,"__referenceConstructor has already been defined"),dy=t}class py{constructor(e){this.listenProvider_=e,this.syncPointTree_=new qt(null),this.pendingWriteTree_=ZP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mw(t,e,n,i,r){return qP(t.pendingWriteTree_,e,n,i,r),r?ld(t,new Ko(nw(),e,n)):[]}function Co(t,e,n=!1){const i=HP(t.pendingWriteTree_,e);if(zP(t.pendingWriteTree_,e)){let s=new qt(null);return i.snap!=null?s=s.set(Ot(),!0):Vi(i.children,o=>{s=s.set(new $t(o),!0)}),ld(t,new yf(i.path,s,n))}else return[]}function ad(t,e,n){return ld(t,new Ko(iw(),e,n))}function p3(t,e,n){const i=qt.fromObject(n);return ld(t,new Hc(iw(),e,i))}function g3(t,e,n,i){const r=_w(t,i);if(r!=null){const s=ww(r),o=s.path,a=s.queryId,l=ji(o,e),c=new Ko(rw(a),l,n);return bw(t,o,c)}else return[]}function m3(t,e,n,i){const r=_w(t,i);if(r){const s=ww(r),o=s.path,a=s.queryId,l=ji(o,e),c=qt.fromObject(n),h=new Hc(rw(a),l,c);return bw(t,o,h)}else return[]}function p0(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=ji(o,e),c=d0(a,l);if(c)return c});return uw(r,e,s,n,!0)}function ld(t,e){return yw(e,t.syncPointTree_,null,lw(t.pendingWriteTree_,Ot()))}function yw(t,e,n,i){if(yt(t.path))return vw(t,e,n,i);{const r=e.get(Ot());n==null&&r!=null&&(n=d0(r,Ot()));let s=[];const o=mt(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=fw(i,o);s=s.concat(yw(a,l,c,h))}return r&&(s=s.concat(f0(r,t,i,n))),s}}function vw(t,e,n,i){const r=e.get(Ot());n==null&&r!=null&&(n=d0(r,Ot()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=fw(i,o),h=t.operationForChild(o);h&&(s=s.concat(vw(h,a,l,c)))}),r&&(s=s.concat(f0(r,t,i,n))),s}function _w(t,e){return t.tagToQueryMap.get(e)}function ww(t){const e=t.indexOf("$");return Le(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $t(t.substr(0,e))}}function bw(t,e,n){const i=t.syncPointTree_.get(e);Le(i,"Missing sync point for query tag that we're tracking");const r=lw(t.pendingWriteTree_,e);return f0(i,n,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new g0(n)}node(){return this.node_}}class m0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=An(this.path_,e);return new m0(this.syncTree_,n)}node(){return p0(this.syncTree_,this.path_)}}const y3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gy=function(t,e,n){if(!t||typeof t!="object")return t;if(Le(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return v3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return _3(t[".sv"],e);Le(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},v3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Le(!1,"Unexpected server value: "+t)}},_3=function(t,e,n){t.hasOwnProperty("increment")||Le(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&Le(!1,"Unexpected increment value: "+i);const r=e.node();if(Le(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},w3=function(t,e,n,i){return y0(e,new m0(n,t),i)},Aw=function(t,e,n){return y0(t,new g0(e),n)};function y0(t,e,n){const i=t.getPriority().val(),r=gy(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=gy(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Pn(a,Bn(r)):t}else{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Pn(r))),o.forEachChild(ni,(a,l)=>{const c=y0(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function _0(t,e){let n=e instanceof $t?e:new $t(e),i=t,r=mt(n);for(;r!==null;){const s=sl(i.node.children,r)||{children:{},childCount:0};i=new v0(r,i,s),n=Ht(n),r=mt(n)}return i}function Al(t){return t.node.value}function Sw(t,e){t.node.value=e,Qg(t)}function xw(t){return t.node.childCount>0}function b3(t){return Al(t)===void 0&&!xw(t)}function cd(t,e){Vi(t.node.children,(n,i)=>{e(new v0(n,t,i))})}function Ew(t,e,n,i){n&&!i&&e(t),cd(t,r=>{Ew(r,e,!0,i)}),n&&i&&e(t)}function A3(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function vu(t){return new $t(t.parent===null?t.name:vu(t.parent)+"/"+t.name)}function Qg(t){t.parent!==null&&S3(t.parent,t.name,t)}function S3(t,e,n){const i=b3(n),r=ps(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,Qg(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,Qg(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=/[\[\].#$\/\u0000-\u001F\u007F]/,E3=/[\[\].#$\u0000-\u001F\u007F]/,Xp=10*1024*1024,Tw=function(t){return typeof t=="string"&&t.length!==0&&!x3.test(t)},Iw=function(t){return typeof t=="string"&&t.length!==0&&!E3.test(t)},T3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Iw(t)},Pw=function(t,e,n,i){i&&e===void 0||w0(Zm(t,"value"),e,n)},w0=function(t,e,n){const i=n instanceof $t?new lP(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+xo(i));if(typeof e=="function")throw new Error(t+"contains a function "+xo(i)+" with contents = "+e.toString());if(x_(e))throw new Error(t+"contains "+e.toString()+" "+xo(i));if(typeof e=="string"&&e.length>Xp/3&&id(e)>Xp)throw new Error(t+"contains a string greater than "+Xp+" utf8 bytes "+xo(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Vi(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Tw(o)))throw new Error(t+" contains an invalid key ("+o+") "+xo(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cP(i,o),w0(t,a,i),uP(i)}),r&&s)throw new Error(t+' contains ".value" child '+xo(i)+" in addition to actual children.")}},Cw=function(t,e,n,i){if(!(i&&n===void 0)&&!Iw(n))throw new Error(Zm(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},I3=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Cw(t,e,n,i)},Nw=function(t,e){if(mt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},P3=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Tw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!T3(n))throw new Error(Zm(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lw(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!K_(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function ls(t,e,n){Lw(t,n),N3(t,i=>or(i,e)||or(e,i))}function N3(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(L3(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function L3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Mo&&ei("event: "+n.toString()),bl(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="repo_interrupt",k3=25;class D3{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new C3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mf(),this.transactionQueueTree_=new v0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function O3(t,e,n){if(t.stats_=r0(t.repoInfo_),t.forceRestClient_||kI())t.server_=new gf(t.repoInfo_,(i,r,s,o)=>{my(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>yy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{qn(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new ns(t.repoInfo_,e,(i,r,s,o)=>{my(t,i,r,s,o)},i=>{yy(t,i)},i=>{M3(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=jI(t.repoInfo_,()=>new FP(t.stats_,t.server_)),t.infoData_=new RP,t.infoSyncTree_=new py({startListening:(i,r,s,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=ad(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),A0(t,"connected",!1),t.serverSyncTree_=new py({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);ls(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function Rw(t){const n=t.infoData_.getNode(new $t(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function b0(t){return y3({timestamp:Rw(t)})}function my(t,e,n,i,r){t.dataUpdateCount++;const s=new $t(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const l=cf(n,c=>Bn(c));o=m3(t.serverSyncTree_,s,l,r)}else{const l=Bn(n);o=g3(t.serverSyncTree_,s,l,r)}else if(i){const l=cf(n,c=>Bn(c));o=p3(t.serverSyncTree_,s,l)}else{const l=Bn(n);o=ad(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ud(t,s)),ls(t.eventQueue_,a,o)}function yy(t,e){A0(t,"connected",e),e===!1&&j3(t)}function M3(t,e){Vi(e,(n,i)=>{A0(t,n,i)})}function A0(t,e,n){const i=new $t("/.info/"+e),r=Bn(n);t.infoData_.updateSnapshot(i,r);const s=ad(t.infoSyncTree_,i,r);ls(t.eventQueue_,i,s)}function kw(t){return t.nextWriteId_++}function F3(t,e,n,i,r){S0(t,"set",{path:e.toString(),value:n,priority:i});const s=b0(t),o=Bn(n,i),a=p0(t.serverSyncTree_,e),l=Aw(o,a,s),c=kw(t),h=mw(t.serverSyncTree_,e,l,c,!0);Lw(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(m,p)=>{const v=m==="ok";v||vi("set at "+e+" failed: "+m);const b=Co(t.serverSyncTree_,c,!v);ls(t.eventQueue_,e,b),B3(t,r,m,p)});const d=jw(t,e);ud(t,d),ls(t.eventQueue_,d,[])}function j3(t){S0(t,"onDisconnectEvents");const e=b0(t),n=mf();Wg(t.onDisconnect_,Ot(),(r,s)=>{const o=w3(r,s,t.serverSyncTree_,e);tw(n,r,o)});let i=[];Wg(n,Ot(),(r,s)=>{i=i.concat(ad(t.serverSyncTree_,r,s));const o=jw(t,r);ud(t,o)}),t.onDisconnect_=mf(),ls(t.eventQueue_,Ot(),i)}function V3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(R3)}function S0(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ei(n,...e)}function B3(t,e,n,i){e&&bl(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function Dw(t,e,n){return p0(t.serverSyncTree_,e,n)||Pt.EMPTY_NODE}function x0(t,e=t.transactionQueueTree_){if(e||hd(t,e),Al(e)){const n=Mw(t,e);Le(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&U3(t,vu(e),n)}else xw(e)&&cd(e,n=>{x0(t,n)})}function U3(t,e,n){const i=n.map(c=>c.currentWriteId),r=Dw(t,e,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const h=n[c];Le(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=ji(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{S0(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(Co(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&d.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();hd(t,_0(t.transactionQueueTree_,e)),x0(t,t.transactionQueueTree_),ls(t.eventQueue_,e,h);for(let m=0;m<d.length;m++)bl(d[m])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{vi("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}ud(t,e)}},o)}function ud(t,e){const n=Ow(t,e),i=vu(n),r=Mw(t,n);return q3(t,r,i),i}function q3(t,e,n){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=ji(n,l.path);let h=!1,d;if(Le(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,r=r.concat(Co(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=k3)h=!0,d="maxretry",r=r.concat(Co(t.serverSyncTree_,l.currentWriteId,!0));else{const m=Dw(t,l.path,o);l.currentInputSnapshot=m;const p=e[a].update(m.val());if(p!==void 0){w0("transaction failed: Data returned ",p,l.path);let v=Bn(p);typeof p=="object"&&p!=null&&ps(p,".priority")||(v=v.updatePriority(m.getPriority()));const x=l.currentWriteId,w=b0(t),A=Aw(v,m,w);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=A,l.currentWriteId=kw(t),o.splice(o.indexOf(x),1),r=r.concat(mw(t.serverSyncTree_,l.path,A,l.currentWriteId,l.applyLocally)),r=r.concat(Co(t.serverSyncTree_,x,!0))}else h=!0,d="nodata",r=r.concat(Co(t.serverSyncTree_,l.currentWriteId,!0))}ls(t.eventQueue_,n,r),r=[],h&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}hd(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)bl(i[a]);x0(t,t.transactionQueueTree_)}function Ow(t,e){let n,i=t.transactionQueueTree_;for(n=mt(e);n!==null&&Al(i)===void 0;)i=_0(i,n),e=Ht(e),n=mt(e);return i}function Mw(t,e){const n=[];return Fw(t,e,n),n.sort((i,r)=>i.order-r.order),n}function Fw(t,e,n){const i=Al(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);cd(e,r=>{Fw(t,r,n)})}function hd(t,e){const n=Al(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,Sw(e,n.length>0?n:void 0)}cd(e,i=>{hd(t,i)})}function jw(t,e){const n=vu(Ow(t,e)),i=_0(t.transactionQueueTree_,e);return A3(i,r=>{Jp(t,r)}),Jp(t,i),Ew(i,r=>{Jp(t,r)}),n}function Jp(t,e){const n=Al(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Le(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(Le(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(Co(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Sw(e,void 0):n.length=s+1,ls(t.eventQueue_,vu(e),r);for(let o=0;o<i.length;o++)bl(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function z3(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):vi(`Invalid query segment '${n}' in query '${t}'`)}return e}const vy=function(t,e){const n=W3(t),i=n.namespace;n.domain==="firebase.com"&&as(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&as("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||EI();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new M_(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new $t(n.pathString)}},W3=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=H3(t.substring(h,d)));const m=z3(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const v=e.indexOf(".");i=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=i}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",G3=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let r;const s=new Array(8);for(r=7;r>=0;r--)s[r]=_y.charAt(n%64),n=Math.floor(n/64);Le(n===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=_y.charAt(e[r]);return Le(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return yt(this._path)?null:W_(this._path)}get ref(){return new ia(this._repo,this._path)}get _queryIdentifier(){const e=iy(this._queryParams),n=n0(e);return n==="{}"?"default":n}get _queryObject(){return iy(this._queryParams)}isEqual(e){if(e=Rn(e),!(e instanceof E0))return!1;const n=this._repo===e._repo,i=K_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+aP(this._path)}}class ia extends E0{constructor(e,n){super(e,n,new l0,!1)}get parent(){const e=$_(this._path);return e===null?null:new ia(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function $3(t,e){return t=Rn(t),t._checkNotDeleted("ref"),e!==void 0?Zg(t._root,e):t._root}function Zg(t,e){return t=Rn(t),mt(t._path)===null?I3("child","path",e,!1):Cw("child","path",e,!1),new ia(t._repo,An(t._path,e))}function K3(t,e){t=Rn(t),Nw("push",t._path),Pw("push",e,t._path,!0);const n=Rw(t._repo),i=G3(n),r=Zg(t,i),s=Zg(t,i);let o;return e!=null?o=Vw(s,e).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function Vw(t,e){t=Rn(t),Nw("set",t._path),Pw("set",e,t._path,!1);const n=new nd;return F3(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}f3(ia);d3(ia);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="FIREBASE_DATABASE_EMULATOR_HOST",em={};let X3=!1;function J3(t,e,n,i){t.repoInfo_=new M_(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function Q3(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||as("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ei("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=vy(s,r),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[Y3]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=vy(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const h=r&&l?new Za(Za.OWNER):new OI(t.name,t.options,e);P3("Invalid Firebase Database URL",o),yt(o.path)||as("Database URL must point to the root of a Firebase Database (not including a child path).");const d=eC(a,t,h,new DI(t.name,n));return new tC(d,t)}function Z3(t,e){const n=em[e];(!n||n[t.key]!==t)&&as(`Database ${e}(${t.repoInfo_}) has already been deleted.`),V3(t),delete n[t.key]}function eC(t,e,n,i){let r=em[e.name];r||(r={},em[e.name]=r);let s=r[t.toURLString()];return s&&as("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new D3(t,X3,n,i),r[t.toURLString()]=s,s}class tC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(O3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ia(this._repo,Ot())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Z3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&as("Cannot call "+e+" on a deleted database.")}}function nC(t=t0(),e){const n=sd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=c_("database");i&&iC(n,...i)}return n}function iC(t,e,n,i={}){t=Rn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&as("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&as('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Za(Za.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:f_(i.mockUserToken,t.app.options.projectId);s=new Za(o)}J3(r,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t){wI(ta),Go(new Xs("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Q3(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Nr(V2,B2,t),Nr(V2,B2,"esm2017")}ns.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ns.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};rC();const sC={apiKey:"AIzaSyAIzlEJjCGjHyu_JZMm2TTQcuI3vk2wH88",authDomain:"cropdata-f7934.firebaseapp.com",databaseURL:"https://cropdata-f7934-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cropdata-f7934",storageBucket:"cropdata-f7934.appspot.com",messagingSenderId:"949185266078",appId:"1:949185266078:web:d890a7a18e9ea18b30d68f",measurementId:"G-FBTZX3CW6C"},oC=v_(sC),aC=nC(oC),lC="modulepreload",cC=function(t){return"/Crop-Recommendation-System/"+t},wy={},tm=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=cC(s),s in wy)return;wy[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let h=r.length-1;h>=0;h--){const d=r[h];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":lC,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,d)=>{c.addEventListener("load",h),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Lt(t){"@babel/helpers - typeof";return Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(t)}var ci=Uint8Array,ui=Uint16Array,zc=Uint32Array,fd=new ci([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dd=new ci([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nm=new ci([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bw=function(t,e){for(var n=new ui(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new zc(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},Uw=Bw(fd,2),qw=Uw[0],im=Uw[1];qw[28]=258,im[258]=28;var Hw=Bw(dd,0),uC=Hw[0],by=Hw[1],rm=new ui(32768);for(var Wt=0;Wt<32768;++Wt){var Ls=(Wt&43690)>>>1|(Wt&21845)<<1;Ls=(Ls&52428)>>>2|(Ls&13107)<<2,Ls=(Ls&61680)>>>4|(Ls&3855)<<4,rm[Wt]=((Ls&65280)>>>8|(Ls&255)<<8)>>>1}var Lr=function(t,e,n){for(var i=t.length,r=0,s=new ui(e);r<i;++r)++s[t[r]-1];var o=new ui(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(n){a=new ui(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],h=e-t[r],d=o[t[r]-1]++<<h,m=d|(1<<h)-1;d<=m;++d)a[rm[d]>>>l]=c}else for(a=new ui(i),r=0;r<i;++r)a[r]=rm[o[t[r]-1]++]>>>15-t[r];return a},Qs=new ci(288);for(var Wt=0;Wt<144;++Wt)Qs[Wt]=8;for(var Wt=144;Wt<256;++Wt)Qs[Wt]=9;for(var Wt=256;Wt<280;++Wt)Qs[Wt]=7;for(var Wt=280;Wt<288;++Wt)Qs[Wt]=8;var Wc=new ci(32);for(var Wt=0;Wt<32;++Wt)Wc[Wt]=5;var hC=Lr(Qs,9,0),fC=Lr(Qs,9,1),dC=Lr(Wc,5,0),pC=Lr(Wc,5,1),Qp=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},tr=function(t,e,n){var i=e/8>>0;return(t[i]|t[i+1]<<8)>>>(e&7)&n},Zp=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(e&7)},T0=function(t){return(t/8>>0)+(t&7&&1)},zw=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof ui?ui:t instanceof zc?zc:ci)(n-e);return i.set(t.subarray(e,n)),i},gC=function(t,e,n){var i=t.length,r=!e||n,s=!n||n.i;n||(n={}),e||(e=new ci(i*3));var o=function(ne){var ce=e.length;if(ne>ce){var fe=new ci(Math.max(ce*2,ne));fe.set(e),e=fe}},a=n.f||0,l=n.p||0,c=n.b||0,h=n.l,d=n.d,m=n.m,p=n.n,v=i*8;do{if(!h){n.f=a=tr(t,l,1);var b=tr(t,l+1,3);if(l+=3,b)if(b==1)h=fC,d=pC,m=9,p=5;else if(b==2){var S=tr(t,l,31)+257,k=tr(t,l+10,15)+4,F=S+tr(t,l+5,31)+1;l+=14;for(var G=new ci(F),O=new ci(19),N=0;N<k;++N)O[nm[N]]=tr(t,l+N*3,7);l+=k*3;var $=Qp(O),J=(1<<$)-1;if(!s&&l+F*($+7)>v)break;for(var C=Lr(O,$,1),N=0;N<F;){var E=C[tr(t,l,J)];l+=E&15;var x=E>>>4;if(x<16)G[N++]=x;else{var B=0,V=0;for(x==16?(V=3+tr(t,l,3),l+=2,B=G[N-1]):x==17?(V=3+tr(t,l,7),l+=3):x==18&&(V=11+tr(t,l,127),l+=7);V--;)G[N++]=B}}var H=G.subarray(0,S),U=G.subarray(S);m=Qp(H),p=Qp(U),h=Lr(H,m,1),d=Lr(U,p,1)}else throw"invalid block type";else{var x=T0(l)+4,w=t[x-4]|t[x-3]<<8,A=x+w;if(A>i){if(s)throw"unexpected EOF";break}r&&o(c+w),e.set(t.subarray(x,A),c),n.b=c+=w,n.p=l=A*8;continue}if(l>v)throw"unexpected EOF"}r&&o(c+131072);for(var Q=(1<<m)-1,K=(1<<p)-1,re=m+p+18;s||l+re<v;){var B=h[Zp(t,l)&Q],ie=B>>>4;if(l+=B&15,l>v)throw"unexpected EOF";if(!B)throw"invalid length/literal";if(ie<256)e[c++]=ie;else if(ie==256){h=null;break}else{var pe=ie-254;if(ie>264){var N=ie-257,T=fd[N];pe=tr(t,l,(1<<T)-1)+qw[N],l+=T}var j=d[Zp(t,l)&K],z=j>>>4;if(!j)throw"invalid distance";l+=j&15;var U=uC[z];if(z>3){var T=dd[z];U+=Zp(t,l)&(1<<T)-1,l+=T}if(l>v)throw"unexpected EOF";r&&o(c+131072);for(var Y=c+pe;c<Y;c+=4)e[c]=e[c-U],e[c+1]=e[c+1-U],e[c+2]=e[c+2-U],e[c+3]=e[c+3-U];c=Y}}n.l=h,n.p=l,n.b=c,h&&(a=1,n.m=m,n.d=d,n.n=p)}while(!a);return c==e.length?e:zw(e,0,c)},Xr=function(t,e,n){n<<=e&7;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},ac=function(t,e,n){n<<=e&7;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},eg=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new ci(0),0];if(r==1){var o=new ci(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(F,G){return F.f-G.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,h=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=h&&n[c].f<n[d].f?c++:d++],n[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var m=s[0].s,i=1;i<r;++i)s[i].s>m&&(m=s[i].s);var p=new ui(m+1),v=sm(n[h-1],p,0);if(v>e){var i=0,b=0,x=v-e,w=1<<x;for(s.sort(function(G,O){return p[O.s]-p[G.s]||G.f-O.f});i<r;++i){var A=s[i].s;if(p[A]>e)b+=w-(1<<v-p[A]),p[A]=e;else break}for(b>>>=x;b>0;){var S=s[i].s;p[S]<e?b-=1<<e-p[S]++-1:++i}for(;i>=0&&b;--i){var k=s[i].s;p[k]==e&&(--p[k],++b)}v=e}return[new ci(p),v]},sm=function(t,e,n){return t.s==-1?Math.max(sm(t.l,e,n+1),sm(t.r,e,n+1)):e[t.s]=n},Ay=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ui(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},lc=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},Yh=function(t,e,n){var i=n.length,r=T0(e+2);t[r]=i&255,t[r+1]=i>>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var s=0;s<i;++s)t[r+s+4]=n[s];return(r+4+i)*8},Sy=function(t,e,n,i,r,s,o,a,l,c,h){Xr(e,h++,n),++r[256];for(var d=eg(r,15),m=d[0],p=d[1],v=eg(s,15),b=v[0],x=v[1],w=Ay(m),A=w[0],S=w[1],k=Ay(b),F=k[0],G=k[1],O=new ui(19),N=0;N<A.length;++N)O[A[N]&31]++;for(var N=0;N<F.length;++N)O[F[N]&31]++;for(var $=eg(O,7),J=$[0],C=$[1],E=19;E>4&&!J[nm[E-1]];--E);var B=c+5<<3,V=lc(r,Qs)+lc(s,Wc)+o,H=lc(r,m)+lc(s,b)+o+14+3*E+lc(O,J)+(2*O[16]+3*O[17]+7*O[18]);if(B<=V&&B<=H)return Yh(e,h,t.subarray(l,l+c));var U,Q,K,re;if(Xr(e,h,1+(H<V)),h+=2,H<V){U=Lr(m,p,0),Q=m,K=Lr(b,x,0),re=b;var ie=Lr(J,C,0);Xr(e,h,S-257),Xr(e,h+5,G-1),Xr(e,h+10,E-4),h+=14;for(var N=0;N<E;++N)Xr(e,h+3*N,J[nm[N]]);h+=3*E;for(var pe=[A,F],T=0;T<2;++T)for(var j=pe[T],N=0;N<j.length;++N){var z=j[N]&31;Xr(e,h,ie[z]),h+=J[z],z>15&&(Xr(e,h,j[N]>>>5&127),h+=j[N]>>>12)}}else U=hC,Q=Qs,K=dC,re=Wc;for(var N=0;N<a;++N)if(i[N]>255){var z=i[N]>>>18&31;ac(e,h,U[z+257]),h+=Q[z+257],z>7&&(Xr(e,h,i[N]>>>23&31),h+=fd[z]);var Y=i[N]&31;ac(e,h,K[Y]),h+=re[Y],Y>3&&(ac(e,h,i[N]>>>5&8191),h+=dd[Y])}else ac(e,h,U[i[N]]),h+=Q[i[N]];return ac(e,h,U[256]),h+Q[256]},mC=new zc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),yC=new ci(0),vC=function(t,e,n,i,r,s){var o=t.length,a=new ci(i+o+5*(1+Math.floor(o/7e3))+r),l=a.subarray(i,a.length-r),c=0;if(!e||o<8)for(var h=0;h<=o;h+=65535){var d=h+65535;d<o?c=Yh(l,c,t.subarray(h,d)):(l[h]=s,c=Yh(l,c,t.subarray(h,o)))}else{for(var m=mC[e-1],p=m>>>13,v=m&8191,b=(1<<n)-1,x=new ui(32768),w=new ui(b+1),A=Math.ceil(n/3),S=2*A,k=function(Ye){return(t[Ye]^t[Ye+1]<<A^t[Ye+2]<<S)&b},F=new zc(25e3),G=new ui(288),O=new ui(32),N=0,$=0,h=0,J=0,C=0,E=0;h<o;++h){var B=k(h),V=h&32767,H=w[B];if(x[V]=H,w[B]=V,C<=h){var U=o-h;if((N>7e3||J>24576)&&U>423){c=Sy(t,l,0,F,G,O,$,J,E,h-E,c),J=N=$=0,E=h;for(var Q=0;Q<286;++Q)G[Q]=0;for(var Q=0;Q<30;++Q)O[Q]=0}var K=2,re=0,ie=v,pe=V-H&32767;if(U>2&&B==k(h-pe))for(var T=Math.min(p,U)-1,j=Math.min(32767,h),z=Math.min(258,U);pe<=j&&--ie&&V!=H;){if(t[h+K]==t[h+K-pe]){for(var Y=0;Y<z&&t[h+Y]==t[h+Y-pe];++Y);if(Y>K){if(K=Y,re=pe,Y>T)break;for(var ne=Math.min(pe,Y-2),ce=0,Q=0;Q<ne;++Q){var fe=h-pe+Q+32768&32767,de=x[fe],Ee=fe-de+32768&32767;Ee>ce&&(ce=Ee,H=fe)}}}V=H,H=x[V],pe+=V-H+32768&32767}if(re){F[J++]=268435456|im[K]<<18|by[re];var Se=im[K]&31,Oe=by[re]&31;$+=fd[Se]+dd[Oe],++G[257+Se],++O[Oe],C=h+K,++N}else F[J++]=t[h],++G[t[h]]}}c=Sy(t,l,s,F,G,O,$,J,E,h-E,c),s||(c=Yh(l,c,yC))}return zw(a,0,i+T0(c)+r)},_C=function(){var t=1,e=0;return{p:function(n){for(var i=t,r=e,s=n.length,o=0;o!=s;){for(var a=Math.min(o+5552,s);o<a;++o)i+=n[o],r+=i;i%=65521,r%=65521}t=i,e=r},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},wC=function(t,e,n,i,r){return vC(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,i,!r)},bC=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},AC=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;t[0]=120,t[1]=i<<6|(i?32-2*i:1)},SC=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function om(t,e){e===void 0&&(e={});var n=_C();n.p(t);var i=wC(t,e,2,4);return AC(i,e),bC(i,i.length-4,n.d()),i}function xC(t,e){return gC((SC(t),t.subarray(2,-4)),e)}var Je=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function tg(){Je.console&&typeof Je.console.log=="function"&&Je.console.log.apply(Je.console,arguments)}var jt={log:tg,warn:function(t){Je.console&&(typeof Je.console.warn=="function"?Je.console.warn.apply(Je.console,arguments):tg.call(null,arguments))},error:function(t){Je.console&&(typeof Je.console.error=="function"?Je.console.error.apply(Je.console,arguments):tg(t))}};function ng(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){Eo(i.response,e,n)},i.onerror=function(){jt.error("could not download file")},i.send()}function xy(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Nh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var xc,am,Eo=Je.saveAs||((typeof window>"u"?"undefined":Lt(window))!=="object"||window!==Je?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=Je.URL||Je.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener",typeof t=="string"?(r.href=t,r.origin!==location.origin?xy(r.href)?ng(t,e,n):Nh(r,r.target="_blank"):Nh(r)):(r.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){Nh(r)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(xy(t))ng(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){Nh(i)})}else navigator.msSaveOrOpenBlob(function(r,s){return s===void 0?s={autoBom:!1}:Lt(s)!=="object"&&(jt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob([String.fromCharCode(65279),r],{type:r.type}):r}(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return ng(t,e,n);var r=t.type==="application/octet-stream",s=/constructor/i.test(Je.HTMLElement)||Je.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&s)&&(typeof FileReader>"u"?"undefined":Lt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=h:location=h,i=null},a.readAsDataURL(t)}else{var l=Je.URL||Je.webkitURL,c=l.createObjectURL(t);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Ww(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,s=n[i].process,o=r.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ig(t,e){var n=t[0],i=t[1],r=t[2],s=t[3];n=Kn(n,i,r,s,e[0],7,-680876936),s=Kn(s,n,i,r,e[1],12,-389564586),r=Kn(r,s,n,i,e[2],17,606105819),i=Kn(i,r,s,n,e[3],22,-1044525330),n=Kn(n,i,r,s,e[4],7,-176418897),s=Kn(s,n,i,r,e[5],12,1200080426),r=Kn(r,s,n,i,e[6],17,-1473231341),i=Kn(i,r,s,n,e[7],22,-45705983),n=Kn(n,i,r,s,e[8],7,1770035416),s=Kn(s,n,i,r,e[9],12,-1958414417),r=Kn(r,s,n,i,e[10],17,-42063),i=Kn(i,r,s,n,e[11],22,-1990404162),n=Kn(n,i,r,s,e[12],7,1804603682),s=Kn(s,n,i,r,e[13],12,-40341101),r=Kn(r,s,n,i,e[14],17,-1502002290),n=Yn(n,i=Kn(i,r,s,n,e[15],22,1236535329),r,s,e[1],5,-165796510),s=Yn(s,n,i,r,e[6],9,-1069501632),r=Yn(r,s,n,i,e[11],14,643717713),i=Yn(i,r,s,n,e[0],20,-373897302),n=Yn(n,i,r,s,e[5],5,-701558691),s=Yn(s,n,i,r,e[10],9,38016083),r=Yn(r,s,n,i,e[15],14,-660478335),i=Yn(i,r,s,n,e[4],20,-405537848),n=Yn(n,i,r,s,e[9],5,568446438),s=Yn(s,n,i,r,e[14],9,-1019803690),r=Yn(r,s,n,i,e[3],14,-187363961),i=Yn(i,r,s,n,e[8],20,1163531501),n=Yn(n,i,r,s,e[13],5,-1444681467),s=Yn(s,n,i,r,e[2],9,-51403784),r=Yn(r,s,n,i,e[7],14,1735328473),n=Xn(n,i=Yn(i,r,s,n,e[12],20,-1926607734),r,s,e[5],4,-378558),s=Xn(s,n,i,r,e[8],11,-2022574463),r=Xn(r,s,n,i,e[11],16,1839030562),i=Xn(i,r,s,n,e[14],23,-35309556),n=Xn(n,i,r,s,e[1],4,-1530992060),s=Xn(s,n,i,r,e[4],11,1272893353),r=Xn(r,s,n,i,e[7],16,-155497632),i=Xn(i,r,s,n,e[10],23,-1094730640),n=Xn(n,i,r,s,e[13],4,681279174),s=Xn(s,n,i,r,e[0],11,-358537222),r=Xn(r,s,n,i,e[3],16,-722521979),i=Xn(i,r,s,n,e[6],23,76029189),n=Xn(n,i,r,s,e[9],4,-640364487),s=Xn(s,n,i,r,e[12],11,-421815835),r=Xn(r,s,n,i,e[15],16,530742520),n=Jn(n,i=Xn(i,r,s,n,e[2],23,-995338651),r,s,e[0],6,-198630844),s=Jn(s,n,i,r,e[7],10,1126891415),r=Jn(r,s,n,i,e[14],15,-1416354905),i=Jn(i,r,s,n,e[5],21,-57434055),n=Jn(n,i,r,s,e[12],6,1700485571),s=Jn(s,n,i,r,e[3],10,-1894986606),r=Jn(r,s,n,i,e[10],15,-1051523),i=Jn(i,r,s,n,e[1],21,-2054922799),n=Jn(n,i,r,s,e[8],6,1873313359),s=Jn(s,n,i,r,e[15],10,-30611744),r=Jn(r,s,n,i,e[6],15,-1560198380),i=Jn(i,r,s,n,e[13],21,1309151649),n=Jn(n,i,r,s,e[4],6,-145523070),s=Jn(s,n,i,r,e[11],10,-1120210379),r=Jn(r,s,n,i,e[2],15,718787259),i=Jn(i,r,s,n,e[9],21,-343485551),t[0]=qs(n,t[0]),t[1]=qs(i,t[1]),t[2]=qs(r,t[2]),t[3]=qs(s,t[3])}function pd(t,e,n,i,r,s){return e=qs(qs(e,t),qs(i,s)),qs(e<<r|e>>>32-r,n)}function Kn(t,e,n,i,r,s,o){return pd(e&n|~e&i,t,e,r,s,o)}function Yn(t,e,n,i,r,s,o){return pd(e&i|n&~i,t,e,r,s,o)}function Xn(t,e,n,i,r,s,o){return pd(e^n^i,t,e,r,s,o)}function Jn(t,e,n,i,r,s,o){return pd(n^(e|~i),t,e,r,s,o)}function Gw(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)ig(i,EC(t.substring(e-64,e)));t=t.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(ig(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*n,ig(i,r),i}function EC(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}xc=Je.atob.bind(Je),am=Je.btoa.bind(Je);var Ey="0123456789abcdef".split("");function TC(t){for(var e="",n=0;n<4;n++)e+=Ey[t>>8*n+4&15]+Ey[t>>8*n&15];return e}function IC(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function lm(t){return Gw(t).map(IC).join("")}var PC=function(t){for(var e=0;e<t.length;e++)t[e]=TC(t[e]);return t.join("")}(Gw("hello"))!="5d41402abc4b2a76b9719d911017c592";function qs(t,e){if(PC){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function cm(t,e){var n,i,r,s;if(t!==n){for(var o=(r=t,s=1+(256/t.length>>0),new Array(s+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var h=a[l];c=(c+h+o.charCodeAt(l))%256,a[l]=a[c],a[c]=h}n=t,i=a}else a=i;var d=e.length,m=0,p=0,v="";for(l=0;l<d;l++)p=(p+(h=a[m=(m+1)%256]))%256,a[m]=a[p],a[p]=h,o=a[(a[m]+a[p])%256],v+=String.fromCharCode(e.charCodeAt(l)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ty={print:4,modify:8,copy:16,"annot-forms":32};function qa(t,e,n,i){this.v=1,this.r=2;var r=192;t.forEach(function(a){if(Ty.perm!==void 0)throw new Error("Invalid permission: "+a);r+=Ty[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^r)),this.encryptionKey=lm(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=cm(this.encryptionKey,this.padding)}function Ha(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var r=t.charCodeAt(i);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=t[i]}return e}function Iy(t){if(Lt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,r){if(r=r||!1,typeof n!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[i,!!r],s},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,i)}catch(a){Je.console&&jt.error("jsPDF PubSub Error",a.message,a)}o[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Gc(t){if(!(this instanceof Gc))return new Gc(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function $w(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ms(t,e,n,i,r){if(!(this instanceof Ms))return new Ms(t,e,n,i,r);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,$w.call(this,i,r)}function No(t,e,n,i,r){if(!(this instanceof No))return new No(t,e,n,i,r);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,$w.call(this,i,r)}function $e(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",h=null;Lt(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,r=t.format||r,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),i=i||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=Iy;var v="1.3",b=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(g){v=g};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return x};var w=p.__private__.getPageFormat=function(g){return x[g]};r=r||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},S=A.COMPAT;function k(){this.saveGraphicsState(),X(new Ke(je,0,0,-je,0,vs()*je).toString()+" cm"),this.setFontSize(this.getFontSize()/je),c="n",S=A.ADVANCED}function F(){this.restoreGraphicsState(),c="S",S=A.COMPAT}var G=p.__private__.combineFontStyleAndFontWeight=function(g,P){if(g=="bold"&&P=="normal"||g=="bold"&&P==400||g=="normal"&&P=="italic"||g=="bold"&&P=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return P&&(g=P==400||P==="normal"?g==="italic"?"italic":"normal":P!=700&&P!=="bold"||g!=="normal"?(P==700?"bold":P)+""+g:"bold"),g};p.advancedAPI=function(g){var P=S===A.COMPAT;return P&&k.call(this),typeof g!="function"||(g(this),P&&F.call(this)),this},p.compatAPI=function(g){var P=S===A.ADVANCED;return P&&F.call(this),typeof g!="function"||(g(this),P&&k.call(this)),this},p.isAdvancedAPI=function(){return S===A.ADVANCED};var O,N=function(g){if(S!==A.ADVANCED)throw new Error(g+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=p.roundToPrecision=p.__private__.roundToPrecision=function(g,P){var W=e||P;if(isNaN(g)||isNaN(W))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return g.toFixed(W).replace(/0+$/,"")};O=p.hpf=p.__private__.hpf=typeof l=="number"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return $(g,l)}:l==="smart"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return $(g,g>-1&&g<1?16:5)}:function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return $(g,16)};var J=p.f2=p.__private__.f2=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f2");return $(g,2)},C=p.__private__.f3=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f3");return $(g,3)},E=p.scale=p.__private__.scale=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.scale");return S===A.COMPAT?g*je:S===A.ADVANCED?g:void 0},B=function(g){return S===A.COMPAT?vs()-g:S===A.ADVANCED?g:void 0},V=function(g){return E(B(g))};p.__private__.setPrecision=p.setPrecision=function(g){typeof parseInt(g,10)=="number"&&(e=parseInt(g,10))};var H,U="00000000000000000000000000000000",Q=p.__private__.getFileId=function(){return U},K=p.__private__.setFileId=function(g){return U=g!==void 0&&/^[a-fA-F0-9]{32}$/.test(g)?g.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Gn=new qa(h.userPermissions,h.userPassword,h.ownerPassword,U)),U};p.setFileId=function(g){return K(g),this},p.getFileId=function(){return Q()};var re=p.__private__.convertDateToPDFDate=function(g){var P=g.getTimezoneOffset(),W=P<0?"+":"-",Z=Math.floor(Math.abs(P/60)),le=Math.abs(P%60),me=[W,z(Z),"'",z(le),"'"].join("");return["D:",g.getFullYear(),z(g.getMonth()+1),z(g.getDate()),z(g.getHours()),z(g.getMinutes()),z(g.getSeconds()),me].join("")},ie=p.__private__.convertPDFDateToDate=function(g){var P=parseInt(g.substr(2,4),10),W=parseInt(g.substr(6,2),10)-1,Z=parseInt(g.substr(8,2),10),le=parseInt(g.substr(10,2),10),me=parseInt(g.substr(12,2),10),xe=parseInt(g.substr(14,2),10);return new Date(P,W,Z,le,me,xe,0)},pe=p.__private__.setCreationDate=function(g){var P;if(g===void 0&&(g=new Date),g instanceof Date)P=re(g);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(g))throw new Error("Invalid argument passed to jsPDF.setCreationDate");P=g}return H=P},T=p.__private__.getCreationDate=function(g){var P=H;return g==="jsDate"&&(P=ie(H)),P};p.setCreationDate=function(g){return pe(g),this},p.getCreationDate=function(g){return T(g)};var j,z=p.__private__.padd2=function(g){return("0"+parseInt(g)).slice(-2)},Y=p.__private__.padd2Hex=function(g){return("00"+(g=g.toString())).substr(g.length)},ne=0,ce=[],fe=[],de=0,Ee=[],Se=[],Oe=!1,Me=fe,Ye=function(){ne=0,de=0,fe=[],ce=[],Ee=[],Vr=fn(),Hi=fn()};p.__private__.setCustomOutputDestination=function(g){Oe=!0,Me=g};var ye=function(g){Oe||(Me=g)};p.__private__.resetCustomOutputDestination=function(){Oe=!1,Me=fe};var X=p.__private__.out=function(g){return g=g.toString(),de+=g.length+1,Me.push(g),Me},ot=p.__private__.write=function(g){return X(arguments.length===1?g.toString():Array.prototype.join.call(arguments," "))},qe=p.__private__.getArrayBuffer=function(g){for(var P=g.length,W=new ArrayBuffer(P),Z=new Uint8Array(W);P--;)Z[P]=g.charCodeAt(P);return W},Ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ie};var Ce=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(g){return Ce=S===A.ADVANCED?g/je:g,this};var Fe,ke=p.__private__.getFontSize=p.getFontSize=function(){return S===A.COMPAT?Ce:Ce*je},He=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(g){return He=g,this},p.__private__.getR2L=p.getR2L=function(){return He};var it,ct=p.__private__.setZoomMode=function(g){var P=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(g))Fe=g;else if(isNaN(g)){if(P.indexOf(g)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+g+'" is not recognized.');Fe=g}else Fe=parseInt(g,10)};p.__private__.getZoomMode=function(){return Fe};var ft,At=p.__private__.setPageMode=function(g){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(g)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+g+'" is not recognized.');it=g};p.__private__.getPageMode=function(){return it};var kt=p.__private__.setLayoutMode=function(g){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(g)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+g+'" is not recognized.');ft=g};p.__private__.getLayoutMode=function(){return ft},p.__private__.setDisplayMode=p.setDisplayMode=function(g,P,W){return ct(g),kt(P),At(W),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(g){if(Object.keys(Qe).indexOf(g)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[g]},p.__private__.getDocumentProperties=function(){return Qe},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(g){for(var P in Qe)Qe.hasOwnProperty(P)&&g[P]&&(Qe[P]=g[P]);return this},p.__private__.setDocumentProperty=function(g,P){if(Object.keys(Qe).indexOf(g)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[g]=P};var dt,je,Wn,xt,Bi,Mt={},Yt={},fr=[],Tt={},uo={},Zt={},Ui={},jr=null,en=0,rt=[],It=new Iy(p),ho=t.hotfixes||[],Mn={},dr={},pr=[],Ke=function g(P,W,Z,le,me,xe){if(!(this instanceof g))return new g(P,W,Z,le,me,xe);isNaN(P)&&(P=1),isNaN(W)&&(W=0),isNaN(Z)&&(Z=0),isNaN(le)&&(le=1),isNaN(me)&&(me=0),isNaN(xe)&&(xe=0),this._matrix=[P,W,Z,le,me,xe]};Object.defineProperty(Ke.prototype,"sx",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(Ke.prototype,"shy",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(Ke.prototype,"shx",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(Ke.prototype,"sy",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(Ke.prototype,"tx",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(Ke.prototype,"ty",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(Ke.prototype,"a",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(Ke.prototype,"b",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(Ke.prototype,"c",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(Ke.prototype,"d",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(Ke.prototype,"e",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(Ke.prototype,"f",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(Ke.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ke.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ke.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ke.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ke.prototype.join=function(g){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(O).join(g)},Ke.prototype.multiply=function(g){var P=g.sx*this.sx+g.shy*this.shx,W=g.sx*this.shy+g.shy*this.sy,Z=g.shx*this.sx+g.sy*this.shx,le=g.shx*this.shy+g.sy*this.sy,me=g.tx*this.sx+g.ty*this.shx+this.tx,xe=g.tx*this.shy+g.ty*this.sy+this.ty;return new Ke(P,W,Z,le,me,xe)},Ke.prototype.decompose=function(){var g=this.sx,P=this.shy,W=this.shx,Z=this.sy,le=this.tx,me=this.ty,xe=Math.sqrt(g*g+P*P),Ve=(g/=xe)*W+(P/=xe)*Z;W-=g*Ve,Z-=P*Ve;var We=Math.sqrt(W*W+Z*Z);return Ve/=We,g*(Z/=We)<P*(W/=We)&&(g=-g,P=-P,Ve=-Ve,xe=-xe),{scale:new Ke(xe,0,0,We,0,0),translate:new Ke(1,0,0,1,le,me),rotate:new Ke(g,P,-P,g,0,0),skew:new Ke(1,0,Ve,1,0,0)}},Ke.prototype.toString=function(g){return this.join(" ")},Ke.prototype.inversed=function(){var g=this.sx,P=this.shy,W=this.shx,Z=this.sy,le=this.tx,me=this.ty,xe=1/(g*Z-P*W),Ve=Z*xe,We=-P*xe,at=-W*xe,ut=g*xe;return new Ke(Ve,We,at,ut,-Ve*le-at*me,-We*le-ut*me)},Ke.prototype.applyToPoint=function(g){var P=g.x*this.sx+g.y*this.shx+this.tx,W=g.x*this.shy+g.y*this.sy+this.ty;return new Sa(P,W)},Ke.prototype.applyToRectangle=function(g){var P=this.applyToPoint(g),W=this.applyToPoint(new Sa(g.x+g.w,g.y+g.h));return new jl(P.x,P.y,W.x-P.x,W.y-P.y)},Ke.prototype.clone=function(){var g=this.sx,P=this.shy,W=this.shx,Z=this.sy,le=this.tx,me=this.ty;return new Ke(g,P,W,Z,le,me)},p.Matrix=Ke;var qi=p.matrixMult=function(g,P){return P.multiply(g)},gr=new Ke(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=gr;var fi=function(g,P){if(!uo[g]){var W=(P instanceof Ms?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);P.id=W,uo[g]=W,Tt[W]=P,It.publish("addPattern",P)}};p.ShadingPattern=Ms,p.TilingPattern=No,p.addShadingPattern=function(g,P){return N("addShadingPattern()"),fi(g,P),this},p.beginTilingPattern=function(g){N("beginTilingPattern()"),sh(g.boundingBox[0],g.boundingBox[1],g.boundingBox[2]-g.boundingBox[0],g.boundingBox[3]-g.boundingBox[1],g.matrix)},p.endTilingPattern=function(g,P){N("endTilingPattern()"),P.stream=Se[j].join(`
`),fi(g,P),It.publish("endTilingPattern",P),pr.pop().restore()};var _n=p.__private__.newObject=function(){var g=fn();return Ai(g,!0),g},fn=p.__private__.newObjectDeferred=function(){return ne++,ce[ne]=function(){return de},ne},Ai=function(g,P){return P=typeof P=="boolean"&&P,ce[g]=de,P&&X(g+" 0 obj"),g},ua=p.__private__.newAdditionalObject=function(){var g={objId:fn(),content:""};return Ee.push(g),g},Vr=fn(),Hi=fn(),zi=p.__private__.decodeColorString=function(g){var P=g.split(" ");if(P.length!==2||P[1]!=="g"&&P[1]!=="G")P.length===5&&(P[4]==="k"||P[4]==="K")&&(P=[(1-P[0])*(1-P[3]),(1-P[1])*(1-P[3]),(1-P[2])*(1-P[3]),"r"]);else{var W=parseFloat(P[0]);P=[W,W,W,"r"]}for(var Z="#",le=0;le<3;le++)Z+=("0"+Math.floor(255*parseFloat(P[le])).toString(16)).slice(-2);return Z},Wi=p.__private__.encodeColorString=function(g){var P;typeof g=="string"&&(g={ch1:g});var W=g.ch1,Z=g.ch2,le=g.ch3,me=g.ch4,xe=g.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof W=="string"&&W.charAt(0)!=="#"){var Ve=new Ww(W);if(Ve.ok)W=Ve.toHex();else if(!/^\d*\.?\d*$/.test(W))throw new Error('Invalid color "'+W+'" passed to jsPDF.encodeColorString.')}if(typeof W=="string"&&/^#[0-9A-Fa-f]{3}$/.test(W)&&(W="#"+W[1]+W[1]+W[2]+W[2]+W[3]+W[3]),typeof W=="string"&&/^#[0-9A-Fa-f]{6}$/.test(W)){var We=parseInt(W.substr(1),16);W=We>>16&255,Z=We>>8&255,le=255&We}if(Z===void 0||me===void 0&&W===Z&&Z===le)if(typeof W=="string")P=W+" "+xe[0];else switch(g.precision){case 2:P=J(W/255)+" "+xe[0];break;case 3:default:P=C(W/255)+" "+xe[0]}else if(me===void 0||Lt(me)==="object"){if(me&&!isNaN(me.a)&&me.a===0)return P=["1.","1.","1.",xe[1]].join(" ");if(typeof W=="string")P=[W,Z,le,xe[1]].join(" ");else switch(g.precision){case 2:P=[J(W/255),J(Z/255),J(le/255),xe[1]].join(" ");break;default:case 3:P=[C(W/255),C(Z/255),C(le/255),xe[1]].join(" ")}}else if(typeof W=="string")P=[W,Z,le,me,xe[2]].join(" ");else switch(g.precision){case 2:P=[J(W),J(Z),J(le),J(me),xe[2]].join(" ");break;case 3:default:P=[C(W),C(Z),C(le),C(me),xe[2]].join(" ")}return P},mr=p.__private__.getFilters=function(){return o},Ni=p.__private__.putStream=function(g){var P=(g=g||{}).data||"",W=g.filters||mr(),Z=g.alreadyAppliedFilters||[],le=g.addLength1||!1,me=P.length,xe=g.objectId,Ve=function($n){return $n};if(h!==null&&xe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Ve=Gn.encryptor(xe,0));var We={};W===!0&&(W=["FlateEncode"]);var at=g.additionalKeyValues||[],ut=(We=$e.API.processDataByFilters!==void 0?$e.API.processDataByFilters(P,W):{data:P,reverseChain:[]}).reverseChain+(Array.isArray(Z)?Z.join(" "):Z.toString());if(We.data.length!==0&&(at.push({key:"Length",value:We.data.length}),le===!0&&at.push({key:"Length1",value:me})),ut.length!=0)if(ut.split("/").length-1==1)at.push({key:"Filter",value:ut});else{at.push({key:"Filter",value:"["+ut+"]"});for(var _t=0;_t<at.length;_t+=1)if(at[_t].key==="DecodeParms"){for(var Xt=[],tn=0;tn<We.reverseChain.split("/").length-1;tn+=1)Xt.push("null");Xt.push(at[_t].value),at[_t].value="["+Xt.join(" ")+"]"}}X("<<");for(var dn=0;dn<at.length;dn++)X("/"+at[dn].key+" "+at[dn].value);X(">>"),We.data.length!==0&&(X("stream"),X(Ve(We.data)),X("endstream"))},yr=p.__private__.putPage=function(g){var P=g.number,W=g.data,Z=g.objId,le=g.contentsObjId;Ai(Z,!0),X("<</Type /Page"),X("/Parent "+g.rootDictionaryObjId+" 0 R"),X("/Resources "+g.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(O(g.mediaBox.bottomLeftX))+" "+parseFloat(O(g.mediaBox.bottomLeftY))+" "+O(g.mediaBox.topRightX)+" "+O(g.mediaBox.topRightY)+"]"),g.cropBox!==null&&X("/CropBox ["+O(g.cropBox.bottomLeftX)+" "+O(g.cropBox.bottomLeftY)+" "+O(g.cropBox.topRightX)+" "+O(g.cropBox.topRightY)+"]"),g.bleedBox!==null&&X("/BleedBox ["+O(g.bleedBox.bottomLeftX)+" "+O(g.bleedBox.bottomLeftY)+" "+O(g.bleedBox.topRightX)+" "+O(g.bleedBox.topRightY)+"]"),g.trimBox!==null&&X("/TrimBox ["+O(g.trimBox.bottomLeftX)+" "+O(g.trimBox.bottomLeftY)+" "+O(g.trimBox.topRightX)+" "+O(g.trimBox.topRightY)+"]"),g.artBox!==null&&X("/ArtBox ["+O(g.artBox.bottomLeftX)+" "+O(g.artBox.bottomLeftY)+" "+O(g.artBox.topRightX)+" "+O(g.artBox.topRightY)+"]"),typeof g.userUnit=="number"&&g.userUnit!==1&&X("/UserUnit "+g.userUnit),It.publish("putPage",{objId:Z,pageContext:rt[P],pageNumber:P,page:W}),X("/Contents "+le+" 0 R"),X(">>"),X("endobj");var me=W.join(`
`);return S===A.ADVANCED&&(me+=`
Q`),Ai(le,!0),Ni({data:me,filters:mr(),objectId:le}),X("endobj"),Z},fo=p.__private__.putPages=function(){var g,P,W=[];for(g=1;g<=en;g++)rt[g].objId=fn(),rt[g].contentsObjId=fn();for(g=1;g<=en;g++)W.push(yr({number:g,data:Se[g],objId:rt[g].objId,contentsObjId:rt[g].contentsObjId,mediaBox:rt[g].mediaBox,cropBox:rt[g].cropBox,bleedBox:rt[g].bleedBox,trimBox:rt[g].trimBox,artBox:rt[g].artBox,userUnit:rt[g].userUnit,rootDictionaryObjId:Vr,resourceDictionaryObjId:Hi}));Ai(Vr,!0),X("<</Type /Pages");var Z="/Kids [";for(P=0;P<en;P++)Z+=W[P]+" 0 R ";X(Z+"]"),X("/Count "+en),X(">>"),X("endobj"),It.publish("postPutPages")},ha=function(g){It.publish("putFont",{font:g,out:X,newObject:_n,putStream:Ni}),g.isAlreadyPutted!==!0&&(g.objectNumber=_n(),X("<<"),X("/Type /Font"),X("/BaseFont /"+Ha(g.postScriptName)),X("/Subtype /Type1"),typeof g.encoding=="string"&&X("/Encoding /"+g.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},fa=function(){for(var g in Mt)Mt.hasOwnProperty(g)&&(d===!1||d===!0&&m.hasOwnProperty(g))&&ha(Mt[g])},da=function(g){g.objectNumber=_n();var P=[];P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Form"}),P.push({key:"BBox",value:"["+[O(g.x),O(g.y),O(g.x+g.width),O(g.y+g.height)].join(" ")+"]"}),P.push({key:"Matrix",value:"["+g.matrix.toString()+"]"});var W=g.pages[1].join(`
`);Ni({data:W,additionalKeyValues:P,objectId:g.objectNumber}),X("endobj")},pa=function(){for(var g in Mn)Mn.hasOwnProperty(g)&&da(Mn[g])},Uu=function(g,P){var W,Z=[],le=1/(P-1);for(W=0;W<1;W+=le)Z.push(W);if(Z.push(1),g[0].offset!=0){var me={offset:0,color:g[0].color};g.unshift(me)}if(g[g.length-1].offset!=1){var xe={offset:1,color:g[g.length-1].color};g.push(xe)}for(var Ve="",We=0,at=0;at<Z.length;at++){for(W=Z[at];W>g[We+1].offset;)We++;var ut=g[We].offset,_t=(W-ut)/(g[We+1].offset-ut),Xt=g[We].color,tn=g[We+1].color;Ve+=Y(Math.round((1-_t)*Xt[0]+_t*tn[0]).toString(16))+Y(Math.round((1-_t)*Xt[1]+_t*tn[1]).toString(16))+Y(Math.round((1-_t)*Xt[2]+_t*tn[2]).toString(16))}return Ve.trim()},Kd=function(g,P){P||(P=21);var W=_n(),Z=Uu(g.colors,P),le=[];le.push({key:"FunctionType",value:"0"}),le.push({key:"Domain",value:"[0.0 1.0]"}),le.push({key:"Size",value:"["+P+"]"}),le.push({key:"BitsPerSample",value:"8"}),le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ni({data:Z,additionalKeyValues:le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:W}),X("endobj"),g.objectNumber=_n(),X("<< /ShadingType "+g.type),X("/ColorSpace /DeviceRGB");var me="/Coords ["+O(parseFloat(g.coords[0]))+" "+O(parseFloat(g.coords[1]))+" ";g.type===2?me+=O(parseFloat(g.coords[2]))+" "+O(parseFloat(g.coords[3])):me+=O(parseFloat(g.coords[2]))+" "+O(parseFloat(g.coords[3]))+" "+O(parseFloat(g.coords[4]))+" "+O(parseFloat(g.coords[5])),X(me+="]"),g.matrix&&X("/Matrix ["+g.matrix.toString()+"]"),X("/Function "+W+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},Yd=function(g,P){var W=fn(),Z=_n();P.push({resourcesOid:W,objectOid:Z}),g.objectNumber=Z;var le=[];le.push({key:"Type",value:"/Pattern"}),le.push({key:"PatternType",value:"1"}),le.push({key:"PaintType",value:"1"}),le.push({key:"TilingType",value:"1"}),le.push({key:"BBox",value:"["+g.boundingBox.map(O).join(" ")+"]"}),le.push({key:"XStep",value:O(g.xStep)}),le.push({key:"YStep",value:O(g.yStep)}),le.push({key:"Resources",value:W+" 0 R"}),g.matrix&&le.push({key:"Matrix",value:"["+g.matrix.toString()+"]"}),Ni({data:g.stream,additionalKeyValues:le,objectId:g.objectNumber}),X("endobj")},ga=function(g){var P;for(P in Tt)Tt.hasOwnProperty(P)&&(Tt[P]instanceof Ms?Kd(Tt[P]):Tt[P]instanceof No&&Yd(Tt[P],g))},qu=function(g){for(var P in g.objectNumber=_n(),X("<<"),g)switch(P){case"opacity":X("/ca "+J(g[P]));break;case"stroke-opacity":X("/CA "+J(g[P]))}X(">>"),X("endobj")},Xd=function(){var g;for(g in Zt)Zt.hasOwnProperty(g)&&qu(Zt[g])},Pl=function(){for(var g in X("/XObject <<"),Mn)Mn.hasOwnProperty(g)&&Mn[g].objectNumber>=0&&X("/"+g+" "+Mn[g].objectNumber+" 0 R");It.publish("putXobjectDict"),X(">>")},Jd=function(){Gn.oid=_n(),X("<<"),X("/Filter /Standard"),X("/V "+Gn.v),X("/R "+Gn.r),X("/U <"+Gn.toHexString(Gn.U)+">"),X("/O <"+Gn.toHexString(Gn.O)+">"),X("/P "+Gn.P),X(">>"),X("endobj")},Hu=function(){for(var g in X("/Font <<"),Mt)Mt.hasOwnProperty(g)&&(d===!1||d===!0&&m.hasOwnProperty(g))&&X("/"+g+" "+Mt[g].objectNumber+" 0 R");X(">>")},Qd=function(){if(Object.keys(Tt).length>0){for(var g in X("/Shading <<"),Tt)Tt.hasOwnProperty(g)&&Tt[g]instanceof Ms&&Tt[g].objectNumber>=0&&X("/"+g+" "+Tt[g].objectNumber+" 0 R");It.publish("putShadingPatternDict"),X(">>")}},ma=function(g){if(Object.keys(Tt).length>0){for(var P in X("/Pattern <<"),Tt)Tt.hasOwnProperty(P)&&Tt[P]instanceof p.TilingPattern&&Tt[P].objectNumber>=0&&Tt[P].objectNumber<g&&X("/"+P+" "+Tt[P].objectNumber+" 0 R");It.publish("putTilingPatternDict"),X(">>")}},Zd=function(){if(Object.keys(Zt).length>0){var g;for(g in X("/ExtGState <<"),Zt)Zt.hasOwnProperty(g)&&Zt[g].objectNumber>=0&&X("/"+g+" "+Zt[g].objectNumber+" 0 R");It.publish("putGStateDict"),X(">>")}},an=function(g){Ai(g.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Hu(),Qd(),ma(g.objectOid),Zd(),Pl(),X(">>"),X("endobj")},zu=function(){var g=[];fa(),Xd(),pa(),ga(g),It.publish("putResources"),g.forEach(an),an({resourcesOid:Hi,objectOid:Number.MAX_SAFE_INTEGER}),It.publish("postPutResources")},Wu=function(){It.publish("putAdditionalObjects");for(var g=0;g<Ee.length;g++){var P=Ee[g];Ai(P.objId,!0),X(P.content),X("endobj")}It.publish("postPutAdditionalObjects")},Gu=function(g){Yt[g.fontName]=Yt[g.fontName]||{},Yt[g.fontName][g.fontStyle]=g.id},Cl=function(g,P,W,Z,le){var me={id:"F"+(Object.keys(Mt).length+1).toString(10),postScriptName:g,fontName:P,fontStyle:W,encoding:Z,isStandardFont:le||!1,metadata:{}};return It.publish("addFont",{font:me,instance:this}),Mt[me.id]=me,Gu(me),me.id},ep=function(g){for(var P=0,W=Ie.length;P<W;P++){var Z=Cl.call(this,g[P][0],g[P][1],g[P][2],Ie[P][3],!0);d===!1&&(m[Z]=!0);var le=g[P][0].split("-");Gu({id:Z,fontName:le[0],fontStyle:le[1]||""})}It.publish("addFonts",{fonts:Mt,dictionary:Yt})},Gi=function(g){return g.foo=function(){try{return g.apply(this,arguments)}catch(Z){var P=Z.stack||"";~P.indexOf(" at ")&&(P=P.split(" at ")[1]);var W="Error in function "+P.split(`
`)[0].split("<")[0]+": "+Z.message;if(!Je.console)throw new Error(W);Je.console.error(W,Z),Je.alert&&alert(W)}},g.foo.bar=g,g.foo},ya=function(g,P){var W,Z,le,me,xe,Ve,We,at,ut;if(le=(P=P||{}).sourceEncoding||"Unicode",xe=P.outputEncoding,(P.autoencode||xe)&&Mt[dt].metadata&&Mt[dt].metadata[le]&&Mt[dt].metadata[le].encoding&&(me=Mt[dt].metadata[le].encoding,!xe&&Mt[dt].encoding&&(xe=Mt[dt].encoding),!xe&&me.codePages&&(xe=me.codePages[0]),typeof xe=="string"&&(xe=me[xe]),xe)){for(We=!1,Ve=[],W=0,Z=g.length;W<Z;W++)(at=xe[g.charCodeAt(W)])?Ve.push(String.fromCharCode(at)):Ve.push(g[W]),Ve[W].charCodeAt(0)>>8&&(We=!0);g=Ve.join("")}for(W=g.length;We===void 0&&W!==0;)g.charCodeAt(W-1)>>8&&(We=!0),W--;if(!We)return g;for(Ve=P.noBOM?[]:[254,255],W=0,Z=g.length;W<Z;W++){if((ut=(at=g.charCodeAt(W))>>8)>>8)throw new Error("Character at position "+W+" of string '"+g+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ve.push(ut),Ve.push(at-(ut<<8))}return String.fromCharCode.apply(void 0,Ve)},di=p.__private__.pdfEscape=p.pdfEscape=function(g,P){return ya(g,P).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nl=p.__private__.beginPage=function(g){Se[++en]=[],rt[en]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(g[0]),topRightY:Number(g[1])}},Ku(en),ye(Se[j])},$u=function(g,P){var W,Z,le;switch(n=P||n,typeof g=="string"&&(W=w(g.toLowerCase()),Array.isArray(W)&&(Z=W[0],le=W[1])),Array.isArray(g)&&(Z=g[0]*je,le=g[1]*je),isNaN(Z)&&(Z=r[0],le=r[1]),(Z>14400||le>14400)&&(jt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Z=Math.min(14400,Z),le=Math.min(14400,le)),r=[Z,le],n.substr(0,1)){case"l":le>Z&&(r=[le,Z]);break;case"p":Z>le&&(r=[le,Z])}Nl(r),eh(Dl),X($i),Ml!==0&&X(Ml+" J"),Fl!==0&&X(Fl+" j"),It.publish("addPage",{pageNumber:en})},tp=function(g){g>0&&g<=en&&(Se.splice(g,1),rt.splice(g,1),en--,j>en&&(j=en),this.setPage(j))},Ku=function(g){g>0&&g<=en&&(j=g)},np=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Se.length-1},Yu=function(g,P,W){var Z,le=void 0;return W=W||{},g=g!==void 0?g:Mt[dt].fontName,P=P!==void 0?P:Mt[dt].fontStyle,Z=g.toLowerCase(),Yt[Z]!==void 0&&Yt[Z][P]!==void 0?le=Yt[Z][P]:Yt[g]!==void 0&&Yt[g][P]!==void 0?le=Yt[g][P]:W.disableWarning===!1&&jt.warn("Unable to look up font label for font '"+g+"', '"+P+"'. Refer to getFontList() for available fonts."),le||W.noFallback||(le=Yt.times[P])==null&&(le=Yt.times.normal),le},ip=p.__private__.putInfo=function(){var g=_n(),P=function(Z){return Z};for(var W in h!==null&&(P=Gn.encryptor(g,0)),X("<<"),X("/Producer ("+di(P("jsPDF "+$e.version))+")"),Qe)Qe.hasOwnProperty(W)&&Qe[W]&&X("/"+W.substr(0,1).toUpperCase()+W.substr(1)+" ("+di(P(Qe[W]))+")");X("/CreationDate ("+di(P(H))+")"),X(">>"),X("endobj")},Ll=p.__private__.putCatalog=function(g){var P=(g=g||{}).rootDictionaryObjId||Vr;switch(_n(),X("<<"),X("/Type /Catalog"),X("/Pages "+P+" 0 R"),Fe||(Fe="fullwidth"),Fe){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var W=""+Fe;W.substr(W.length-1)==="%"&&(Fe=parseInt(Fe)/100),typeof Fe=="number"&&X("/OpenAction [3 0 R /XYZ null null "+J(Fe)+"]")}switch(ft||(ft="continuous"),ft){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}it&&X("/PageMode /"+it),It.publish("putCatalog"),X(">>"),X("endobj")},rp=p.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(ne+1)),X("/Root "+ne+" 0 R"),X("/Info "+(ne-1)+" 0 R"),h!==null&&X("/Encrypt "+Gn.oid+" 0 R"),X("/ID [ <"+U+"> <"+U+"> ]"),X(">>")},sp=p.__private__.putHeader=function(){X("%PDF-"+v),X("%ºß¬à")},op=p.__private__.putXRef=function(){var g="0000000000";X("xref"),X("0 "+(ne+1)),X("0000000000 65535 f ");for(var P=1;P<=ne;P++)typeof ce[P]=="function"?X((g+ce[P]()).slice(-10)+" 00000 n "):ce[P]!==void 0?X((g+ce[P]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},Br=p.__private__.buildDocument=function(){Ye(),ye(fe),It.publish("buildDocument"),sp(),fo(),Wu(),zu(),h!==null&&Jd(),ip(),Ll();var g=de;return op(),rp(),X("startxref"),X(""+g),X("%%EOF"),ye(Se[j]),fe.join(`
`)},va=p.__private__.getBlob=function(g){return new Blob([qe(g)],{type:"application/pdf"})},_a=p.output=p.__private__.output=Gi(function(g,P){switch(typeof(P=P||{})=="string"?P={filename:P}:P.filename=P.filename||"generated.pdf",g){case void 0:return Br();case"save":p.save(P.filename);break;case"arraybuffer":return qe(Br());case"blob":return va(Br());case"bloburi":case"bloburl":if(Je.URL!==void 0&&typeof Je.URL.createObjectURL=="function")return Je.URL&&Je.URL.createObjectURL(va(Br()))||void 0;jt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var W="",Z=Br();try{W=am(Z)}catch{W=am(unescape(encodeURIComponent(Z)))}return"data:application/pdf;filename="+P.filename+";base64,"+W;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';P.pdfObjectUrl&&(le=P.pdfObjectUrl,me="");var xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+le+'"'+me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(P)+");<\/script></body></html>",Ve=Je.open();return Ve!==null&&Ve.document.write(xe),Ve}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var We='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(P.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+P.filename+'" width="500px" height="400px" /></body></html>',at=Je.open();if(at!==null){at.document.write(We);var ut=this;at.document.documentElement.querySelector("#pdfViewer").onload=function(){at.document.title=P.filename,at.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ut.output("bloburl"))}}return at}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Je)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",P)+'"></iframe></body></html>',Xt=Je.open();if(Xt!==null&&(Xt.document.write(_t),Xt.document.title=P.filename),Xt||typeof safari>"u")return Xt;break;case"datauri":case"dataurl":return Je.document.location.href=this.output("datauristring",P);default:return null}}),Xu=function(g){return Array.isArray(ho)===!0&&ho.indexOf(g)>-1};switch(i){case"pt":je=1;break;case"mm":je=72/25.4;break;case"cm":je=72/2.54;break;case"in":je=72;break;case"px":je=Xu("px_scaling")==1?.75:96/72;break;case"pc":case"em":je=12;break;case"ex":je=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);je=i}var Gn=null;pe(),K();var ap=function(g){return h!==null?Gn.encryptor(g,0):function(P){return P}},Ju=p.__private__.getPageInfo=p.getPageInfo=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:rt[g].objId,pageNumber:g,pageContext:rt[g]}},et=p.__private__.getPageInfoByObjId=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var P in rt)if(rt[P].objId===g)break;return Ju(P)},lp=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:rt[j].objId,pageNumber:j,pageContext:rt[j]}};p.addPage=function(){return $u.apply(this,arguments),this},p.setPage=function(){return Ku.apply(this,arguments),ye.call(this,Se[j]),this},p.insertPage=function(g){return this.addPage(),this.movePage(j,g),this},p.movePage=function(g,P){var W,Z;if(g>P){W=Se[g],Z=rt[g];for(var le=g;le>P;le--)Se[le]=Se[le-1],rt[le]=rt[le-1];Se[P]=W,rt[P]=Z,this.setPage(P)}else if(g<P){W=Se[g],Z=rt[g];for(var me=g;me<P;me++)Se[me]=Se[me+1],rt[me]=rt[me+1];Se[P]=W,rt[P]=Z,this.setPage(P)}return this},p.deletePage=function(){return tp.apply(this,arguments),this},p.__private__.text=p.text=function(g,P,W,Z,le){var me,xe,Ve,We,at,ut,_t,Xt,tn,dn=(Z=Z||{}).scope||this;if(typeof g=="number"&&typeof P=="number"&&(typeof W=="string"||Array.isArray(W))){var $n=W;W=P,P=g,g=$n}if(arguments[3]instanceof Ke?(N("The transform parameter of text() with a Matrix value"),tn=le):(Ve=arguments[4],We=arguments[5],Lt(_t=arguments[3])==="object"&&_t!==null||(typeof Ve=="string"&&(We=Ve,Ve=null),typeof _t=="string"&&(We=_t,_t=null),typeof _t=="number"&&(Ve=_t,_t=null),Z={flags:_t,angle:Ve,align:We})),isNaN(P)||isNaN(W)||g==null)throw new Error("Invalid arguments passed to jsPDF.text");if(g.length===0)return dn;var xn="",Ki=!1,Si=typeof Z.lineHeightFactor=="number"?Z.lineHeightFactor:go,qr=dn.internal.scaleFactor;function oh(Vt){return Vt=Vt.split("	").join(Array(Z.TabLen||9).join(" ")),di(Vt,_t)}function ql(Vt){for(var Bt,ln=Vt.concat(),wn=[],Gr=ln.length;Gr--;)typeof(Bt=ln.shift())=="string"?wn.push(Bt):Array.isArray(Vt)&&(Bt.length===1||Bt[1]===void 0&&Bt[2]===void 0)?wn.push(Bt[0]):wn.push([Bt[0],Bt[1],Bt[2]]);return wn}function Hl(Vt,Bt){var ln;if(typeof Vt=="string")ln=Bt(Vt)[0];else if(Array.isArray(Vt)){for(var wn,Gr,Ss=Vt.concat(),ka=[],lh=Ss.length;lh--;)typeof(wn=Ss.shift())=="string"?ka.push(Bt(wn)[0]):Array.isArray(wn)&&typeof wn[0]=="string"&&(Gr=Bt(wn[0],wn[1],wn[2]),ka.push([Gr[0],Gr[1],Gr[2]]));ln=ka}return ln}var Ea=!1,zl=!0;if(typeof g=="string")Ea=!0;else if(Array.isArray(g)){var Wl=g.concat();xe=[];for(var Ta,pi=Wl.length;pi--;)(typeof(Ta=Wl.shift())!="string"||Array.isArray(Ta)&&typeof Ta[0]!="string")&&(zl=!1);Ea=zl}if(Ea===!1)throw new Error('Type of text must be string or Array. "'+g+'" is not recognized.');typeof g=="string"&&(g=g.match(/[\r?\n]/)?g.split(/\r\n|\r|\n/g):[g]);var Ia=Ce/dn.internal.scaleFactor,Pa=Ia*(Si-1);switch(Z.baseline){case"bottom":W-=Pa;break;case"top":W+=Ia-Pa;break;case"hanging":W+=Ia-2*Pa;break;case"middle":W+=Ia/2-Pa}if((ut=Z.maxWidth||0)>0&&(typeof g=="string"?g=dn.splitTextToSize(g,ut):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(Vt,Bt){return Vt.concat(dn.splitTextToSize(Bt,ut))},[]))),me={text:g,x:P,y:W,options:Z,mutex:{pdfEscape:di,activeFontKey:dt,fonts:Mt,activeFontSize:Ce}},It.publish("preProcessText",me),g=me.text,Ve=(Z=me.options).angle,!(tn instanceof Ke)&&Ve&&typeof Ve=="number"){Ve*=Math.PI/180,Z.rotationDirection===0&&(Ve=-Ve),S===A.ADVANCED&&(Ve=-Ve);var Ca=Math.cos(Ve),Gl=Math.sin(Ve);tn=new Ke(Ca,Gl,-Gl,Ca,0,0)}else Ve&&Ve instanceof Ke&&(tn=Ve);S!==A.ADVANCED||tn||(tn=gr),(at=Z.charSpace||Aa)!==void 0&&(xn+=O(E(at))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Xt=Z.horizontalScale)!==void 0&&(xn+=O(100*Xt)+` Tz
`),Z.lang;var gi=-1,vp=Z.renderingMode!==void 0?Z.renderingMode:Z.stroke,$l=dn.internal.getCurrentPageInfo().pageContext;switch(vp){case 0:case!1:case"fill":gi=0;break;case 1:case!0:case"stroke":gi=1;break;case 2:case"fillThenStroke":gi=2;break;case 3:case"invisible":gi=3;break;case 4:case"fillAndAddForClipping":gi=4;break;case 5:case"strokeAndAddPathForClipping":gi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gi=6;break;case 7:case"addToPathForClipping":gi=7}var ah=$l.usedRenderingMode!==void 0?$l.usedRenderingMode:-1;gi!==-1?xn+=gi+` Tr
`:ah!==-1&&(xn+=`0 Tr
`),gi!==-1&&($l.usedRenderingMode=gi),We=Z.align||"left";var Yi,Kl=Ce*Si,_p=dn.internal.pageSize.getWidth(),wp=Mt[dt];at=Z.charSpace||Aa,ut=Z.maxWidth||0,_t=Object.assign({autoencode:!0,noBOM:!0},Z.flags);var _s=[];if(Object.prototype.toString.call(g)==="[object Array]"){var Li;xe=ql(g),We!=="left"&&(Yi=xe.map(function(Vt){return dn.getStringUnitWidth(Vt,{font:wp,charSpace:at,fontSize:Ce,doKerning:!1})*Ce/qr}));var Xi,ws=0;if(We==="right"){P-=Yi[0],g=[],pi=xe.length;for(var _r=0;_r<pi;_r++)_r===0?(Xi=Ur(P),Li=ms(W)):(Xi=E(ws-Yi[_r]),Li=-Kl),g.push([xe[_r],Xi,Li]),ws=Yi[_r]}else if(We==="center"){P-=Yi[0]/2,g=[],pi=xe.length;for(var Hr=0;Hr<pi;Hr++)Hr===0?(Xi=Ur(P),Li=ms(W)):(Xi=E((ws-Yi[Hr])/2),Li=-Kl),g.push([xe[Hr],Xi,Li]),ws=Yi[Hr]}else if(We==="left"){g=[],pi=xe.length;for(var Na=0;Na<pi;Na++)g.push(xe[Na])}else{if(We!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');g=[],pi=xe.length,ut=ut!==0?ut:_p;for(var Ji=0;Ji<pi;Ji++)Li=Ji===0?ms(W):-Kl,Xi=Ji===0?Ur(P):0,Ji<pi-1?_s.push(O(E((ut-Yi[Ji])/(xe[Ji].split(" ").length-1)))):_s.push(0),g.push([xe[Ji],Xi,Li])}}var La=typeof Z.R2L=="boolean"?Z.R2L:He;La===!0&&(g=Hl(g,function(Vt,Bt,ln){return[Vt.split("").reverse().join(""),Bt,ln]})),me={text:g,x:P,y:W,options:Z,mutex:{pdfEscape:di,activeFontKey:dt,fonts:Mt,activeFontSize:Ce}},It.publish("postProcessText",me),g=me.text,Ki=me.mutex.isHex||!1;var Yl=Mt[dt].encoding;Yl!=="WinAnsiEncoding"&&Yl!=="StandardEncoding"||(g=Hl(g,function(Vt,Bt,ln){return[oh(Vt),Bt,ln]})),xe=ql(g),g=[];for(var bs,Qi,zr,vo=0,Ra=1,_o=Array.isArray(xe[0])?Ra:vo,As="",Xl=function(Vt,Bt,ln){var wn="";return ln instanceof Ke?(ln=typeof Z.angle=="number"?qi(ln,new Ke(1,0,0,1,Vt,Bt)):qi(new Ke(1,0,0,1,Vt,Bt),ln),S===A.ADVANCED&&(ln=qi(new Ke(1,0,0,-1,0,0),ln)),wn=ln.join(" ")+` Tm
`):wn=O(Vt)+" "+O(Bt)+` Td
`,wn},Ri=0;Ri<xe.length;Ri++){switch(As="",_o){case Ra:zr=(Ki?"<":"(")+xe[Ri][0]+(Ki?">":")"),bs=parseFloat(xe[Ri][1]),Qi=parseFloat(xe[Ri][2]);break;case vo:zr=(Ki?"<":"(")+xe[Ri]+(Ki?">":")"),bs=Ur(P),Qi=ms(W)}_s!==void 0&&_s[Ri]!==void 0&&(As=_s[Ri]+` Tw
`),Ri===0?g.push(As+Xl(bs,Qi,tn)+zr):_o===vo?g.push(As+zr):_o===Ra&&g.push(As+Xl(bs,Qi,tn)+zr)}g=_o===vo?g.join(` Tj
T* `):g.join(` Tj
`),g+=` Tj
`;var Wr=`BT
/`;return Wr+=dt+" "+Ce+` Tf
`,Wr+=O(Ce*Si)+` TL
`,Wr+=mo+`
`,Wr+=xn,Wr+=g,X(Wr+="ET"),m[dt]=!0,dn};var cp=p.__private__.clip=p.clip=function(g){return X(g==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return cp("evenodd")},p.__private__.discardPath=p.discardPath=function(){return X("n"),this};var vr=p.__private__.isValidStyle=function(g){var P=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(g)!==-1&&(P=!0),P};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(g){return vr(g)&&(c=g),this};var Qu=p.__private__.getStyle=p.getStyle=function(g){var P=c;switch(g){case"D":case"S":P="S";break;case"F":P="f";break;case"FD":case"DF":P="B";break;case"f":case"f*":case"B":case"B*":P=g}return P},Zu=p.close=function(){return X("h"),this};p.stroke=function(){return X("S"),this},p.fill=function(g){return wa("f",g),this},p.fillEvenOdd=function(g){return wa("f*",g),this},p.fillStroke=function(g){return wa("B",g),this},p.fillStrokeEvenOdd=function(g){return wa("B*",g),this};var wa=function(g,P){Lt(P)==="object"?hp(P,g):X(g)},Rl=function(g){g===null||S===A.ADVANCED&&g===void 0||(g=Qu(g),X(g))};function up(g,P,W,Z,le){var me=new No(P||this.boundingBox,W||this.xStep,Z||this.yStep,this.gState,le||this.matrix);me.stream=this.stream;var xe=g+"$$"+this.cloneIndex+++"$$";return fi(xe,me),me}var hp=function(g,P){var W=uo[g.key],Z=Tt[W];if(Z instanceof Ms)X("q"),X(fp(P)),Z.gState&&p.setGState(Z.gState),X(g.matrix.toString()+" cm"),X("/"+W+" sh"),X("Q");else if(Z instanceof No){var le=new Ke(1,0,0,-1,0,vs());g.matrix&&(le=le.multiply(g.matrix||gr),W=up.call(Z,g.key,g.boundingBox,g.xStep,g.yStep,le).id),X("q"),X("/Pattern cs"),X("/"+W+" scn"),Z.gState&&p.setGState(Z.gState),X(P),X("Q")}},fp=function(g){switch(g){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},kl=p.moveTo=function(g,P){return X(O(E(g))+" "+O(V(P))+" m"),this},po=p.lineTo=function(g,P){return X(O(E(g))+" "+O(V(P))+" l"),this},gs=p.curveTo=function(g,P,W,Z,le,me){return X([O(E(g)),O(V(P)),O(E(W)),O(V(Z)),O(E(le)),O(V(me)),"c"].join(" ")),this};p.__private__.line=p.line=function(g,P,W,Z,le){if(isNaN(g)||isNaN(P)||isNaN(W)||isNaN(Z)||!vr(le))throw new Error("Invalid arguments passed to jsPDF.line");return S===A.COMPAT?this.lines([[W-g,Z-P]],g,P,[1,1],le||"S"):this.lines([[W-g,Z-P]],g,P,[1,1]).stroke()},p.__private__.lines=p.lines=function(g,P,W,Z,le,me){var xe,Ve,We,at,ut,_t,Xt,tn,dn,$n,xn,Ki;if(typeof g=="number"&&(Ki=W,W=P,P=g,g=Ki),Z=Z||[1,1],me=me||!1,isNaN(P)||isNaN(W)||!Array.isArray(g)||!Array.isArray(Z)||!vr(le)||typeof me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(kl(P,W),xe=Z[0],Ve=Z[1],at=g.length,$n=P,xn=W,We=0;We<at;We++)(ut=g[We]).length===2?($n=ut[0]*xe+$n,xn=ut[1]*Ve+xn,po($n,xn)):(_t=ut[0]*xe+$n,Xt=ut[1]*Ve+xn,tn=ut[2]*xe+$n,dn=ut[3]*Ve+xn,$n=ut[4]*xe+$n,xn=ut[5]*Ve+xn,gs(_t,Xt,tn,dn,$n,xn));return me&&Zu(),Rl(le),this},p.path=function(g){for(var P=0;P<g.length;P++){var W=g[P],Z=W.c;switch(W.op){case"m":kl(Z[0],Z[1]);break;case"l":po(Z[0],Z[1]);break;case"c":gs.apply(this,Z);break;case"h":Zu()}}return this},p.__private__.rect=p.rect=function(g,P,W,Z,le){if(isNaN(g)||isNaN(P)||isNaN(W)||isNaN(Z)||!vr(le))throw new Error("Invalid arguments passed to jsPDF.rect");return S===A.COMPAT&&(Z=-Z),X([O(E(g)),O(V(P)),O(E(W)),O(E(Z)),"re"].join(" ")),Rl(le),this},p.__private__.triangle=p.triangle=function(g,P,W,Z,le,me,xe){if(isNaN(g)||isNaN(P)||isNaN(W)||isNaN(Z)||isNaN(le)||isNaN(me)||!vr(xe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[W-g,Z-P],[le-W,me-Z],[g-le,P-me]],g,P,[1,1],xe,!0),this},p.__private__.roundedRect=p.roundedRect=function(g,P,W,Z,le,me,xe){if(isNaN(g)||isNaN(P)||isNaN(W)||isNaN(Z)||isNaN(le)||isNaN(me)||!vr(xe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ve=4/3*(Math.SQRT2-1);return le=Math.min(le,.5*W),me=Math.min(me,.5*Z),this.lines([[W-2*le,0],[le*Ve,0,le,me-me*Ve,le,me],[0,Z-2*me],[0,me*Ve,-le*Ve,me,-le,me],[2*le-W,0],[-le*Ve,0,-le,-me*Ve,-le,-me],[0,2*me-Z],[0,-me*Ve,le*Ve,-me,le,-me]],g+le,P,[1,1],xe,!0),this},p.__private__.ellipse=p.ellipse=function(g,P,W,Z,le){if(isNaN(g)||isNaN(P)||isNaN(W)||isNaN(Z)||!vr(le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var me=4/3*(Math.SQRT2-1)*W,xe=4/3*(Math.SQRT2-1)*Z;return kl(g+W,P),gs(g+W,P-xe,g+me,P-Z,g,P-Z),gs(g-me,P-Z,g-W,P-xe,g-W,P),gs(g-W,P+xe,g-me,P+Z,g,P+Z),gs(g+me,P+Z,g+W,P+xe,g+W,P),Rl(le),this},p.__private__.circle=p.circle=function(g,P,W,Z){if(isNaN(g)||isNaN(P)||isNaN(W)||!vr(Z))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(g,P,W,W,Z)},p.setFont=function(g,P,W){return W&&(P=G(P,W)),dt=Yu(g,P,{disableWarning:!1}),this};var dp=p.__private__.getFont=p.getFont=function(){return Mt[Yu.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var g,P,W={};for(g in Yt)if(Yt.hasOwnProperty(g))for(P in W[g]=[],Yt[g])Yt[g].hasOwnProperty(P)&&W[g].push(P);return W},p.addFont=function(g,P,W,Z,le){var me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&me.indexOf(arguments[3])!==-1?le=arguments[3]:arguments[3]&&me.indexOf(arguments[3])==-1&&(W=G(W,Z)),le=le||"Identity-H",Cl.call(this,g,P,W,le)};var go,Dl=t.lineWidth||.200025,ba=p.__private__.getLineWidth=p.getLineWidth=function(){return Dl},eh=p.__private__.setLineWidth=p.setLineWidth=function(g){return Dl=g,X(O(E(g))+" w"),this};p.__private__.setLineDash=$e.API.setLineDash=$e.API.setLineDashPattern=function(g,P){if(g=g||[],P=P||0,isNaN(P)||!Array.isArray(g))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return g=g.map(function(W){return O(E(W))}).join(" "),P=O(E(P)),X("["+g+"] "+P+" d"),this};var th=p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*go};p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*go};var nh=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(g){return typeof(g=g||1.15)=="number"&&(go=g),this},ih=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return go};nh(t.lineHeight);var Ur=p.__private__.getHorizontalCoordinate=function(g){return E(g)},ms=p.__private__.getVerticalCoordinate=function(g){return S===A.ADVANCED?g:rt[j].mediaBox.topRightY-rt[j].mediaBox.bottomLeftY-E(g)},pp=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(g){return O(Ur(g))},ys=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(g){return O(ms(g))},$i=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return zi($i)},p.__private__.setStrokeColor=p.setDrawColor=function(g,P,W,Z){return $i=Wi({ch1:g,ch2:P,ch3:W,ch4:Z,pdfColorType:"draw",precision:2}),X($i),this};var Ol=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return zi(Ol)},p.__private__.setFillColor=p.setFillColor=function(g,P,W,Z){return Ol=Wi({ch1:g,ch2:P,ch3:W,ch4:Z,pdfColorType:"fill",precision:2}),X(Ol),this};var mo=t.textColor||"0 g",gp=p.__private__.getTextColor=p.getTextColor=function(){return zi(mo)};p.__private__.setTextColor=p.setTextColor=function(g,P,W,Z){return mo=Wi({ch1:g,ch2:P,ch3:W,ch4:Z,pdfColorType:"text",precision:3}),this};var Aa=t.charSpace,mp=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Aa||0)};p.__private__.setCharSpace=p.setCharSpace=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Aa=g,this};var Ml=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(g){var P=p.CapJoinStyles[g];if(P===void 0)throw new Error("Line cap style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ml=P,X(P+" J"),this};var Fl=0;p.__private__.setLineJoin=p.setLineJoin=function(g){var P=p.CapJoinStyles[g];if(P===void 0)throw new Error("Line join style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fl=P,X(P+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(g){if(g=g||0,isNaN(g))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(O(E(g))+" M"),this},p.GState=Gc,p.setGState=function(g){(g=typeof g=="string"?Zt[Ui[g]]:rh(null,g)).equals(jr)||(X("/"+g.id+" gs"),jr=g)};var rh=function(g,P){if(!g||!Ui[g]){var W=!1;for(var Z in Zt)if(Zt.hasOwnProperty(Z)&&Zt[Z].equals(P)){W=!0;break}if(W)P=Zt[Z];else{var le="GS"+(Object.keys(Zt).length+1).toString(10);Zt[le]=P,P.id=le}return g&&(Ui[g]=P.id),It.publish("addGState",P),P}};p.addGState=function(g,P){return rh(g,P),this},p.saveGraphicsState=function(){return X("q"),fr.push({key:dt,size:Ce,color:mo}),this},p.restoreGraphicsState=function(){X("Q");var g=fr.pop();return dt=g.key,Ce=g.size,mo=g.color,jr=null,this},p.setCurrentTransformationMatrix=function(g){return X(g.toString()+" cm"),this},p.comment=function(g){return X("#"+g),this};var Sa=function(g,P){var W=g||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return W},set:function(me){isNaN(me)||(W=parseFloat(me))}});var Z=P||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Z},set:function(me){isNaN(me)||(Z=parseFloat(me))}});var le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return le},set:function(me){le=me.toString()}}),this},jl=function(g,P,W,Z){Sa.call(this,g,P),this.type="rect";var le=W||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return le},set:function(xe){isNaN(xe)||(le=parseFloat(xe))}});var me=Z||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return me},set:function(xe){isNaN(xe)||(me=parseFloat(xe))}}),this},Vl=function(){this.page=en,this.currentPage=j,this.pages=Se.slice(0),this.pagesContext=rt.slice(0),this.x=Wn,this.y=xt,this.matrix=Bi,this.width=yo(j),this.height=vs(j),this.outputDestination=Me,this.id="",this.objectNumber=-1};Vl.prototype.restore=function(){en=this.page,j=this.currentPage,rt=this.pagesContext,Se=this.pages,Wn=this.x,xt=this.y,Bi=this.matrix,Bl(j,this.width),Ul(j,this.height),Me=this.outputDestination};var sh=function(g,P,W,Z,le){pr.push(new Vl),en=j=0,Se=[],Wn=g,xt=P,Bi=le,Nl([W,Z])},yp=function(g){if(dr[g])pr.pop().restore();else{var P=new Vl,W="Xo"+(Object.keys(Mn).length+1).toString(10);P.id=W,dr[g]=W,Mn[W]=P,It.publish("addFormObject",P),pr.pop().restore()}};for(var xa in p.beginFormObject=function(g,P,W,Z,le){return sh(g,P,W,Z,le),this},p.endFormObject=function(g){return yp(g),this},p.doFormObject=function(g,P){var W=Mn[dr[g]];return X("q"),X(P.toString()+" cm"),X("/"+W.id+" Do"),X("Q"),this},p.getFormObject=function(g){var P=Mn[dr[g]];return{x:P.x,y:P.y,width:P.width,height:P.height,matrix:P.matrix}},p.save=function(g,P){return g=g||"generated.pdf",(P=P||{}).returnPromise=P.returnPromise||!1,P.returnPromise===!1?(Eo(va(Br()),g),typeof Eo.unload=="function"&&Je.setTimeout&&setTimeout(Eo.unload,911),this):new Promise(function(W,Z){try{var le=Eo(va(Br()),g);typeof Eo.unload=="function"&&Je.setTimeout&&setTimeout(Eo.unload,911),W(le)}catch(me){Z(me.message)}})},$e.API)$e.API.hasOwnProperty(xa)&&(xa==="events"&&$e.API.events.length?function(g,P){var W,Z,le;for(le=P.length-1;le!==-1;le--)W=P[le][0],Z=P[le][1],g.subscribe.apply(g,[W].concat(typeof Z=="function"?[Z]:Z))}(It,$e.API.events):p[xa]=$e.API[xa]);var yo=p.getPageWidth=function(g){return(rt[g=g||j].mediaBox.topRightX-rt[g].mediaBox.bottomLeftX)/je},Bl=p.setPageWidth=function(g,P){rt[g].mediaBox.topRightX=P*je+rt[g].mediaBox.bottomLeftX},vs=p.getPageHeight=function(g){return(rt[g=g||j].mediaBox.topRightY-rt[g].mediaBox.bottomLeftY)/je},Ul=p.setPageHeight=function(g,P){rt[g].mediaBox.topRightY=P*je+rt[g].mediaBox.bottomLeftY};return p.internal={pdfEscape:di,getStyle:Qu,getFont:dp,getFontSize:ke,getCharSpace:mp,getTextColor:gp,getLineHeight:th,getLineHeightFactor:ih,getLineWidth:ba,write:ot,getHorizontalCoordinate:Ur,getVerticalCoordinate:ms,getCoordinateString:pp,getVerticalCoordinateString:ys,collections:{},newObject:_n,newAdditionalObject:ua,newObjectDeferred:fn,newObjectDeferredBegin:Ai,getFilters:mr,putStream:Ni,events:It,scaleFactor:je,pageSize:{getWidth:function(){return yo(j)},setWidth:function(g){Bl(j,g)},getHeight:function(){return vs(j)},setHeight:function(g){Ul(j,g)}},encryptionOptions:h,encryption:Gn,getEncryptor:ap,output:_a,getNumberOfPages:np,pages:Se,out:X,f2:J,f3:C,getPageInfo:Ju,getPageInfoByObjId:et,getCurrentPageInfo:lp,getPDFVersion:b,Point:Sa,Rectangle:jl,Matrix:Ke,hasHotfix:Xu},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return yo(j)},set:function(g){Bl(j,g)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return vs(j)},set:function(g){Ul(j,g)},enumerable:!0,configurable:!0}),ep.call(p,Ie),dt="F1",$u(r,n),It.publish("initialized"),p}qa.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},qa.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},qa.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},qa.prototype.processOwnerPassword=function(t,e){return cm(lm(e).substr(0,5),t)},qa.prototype.encryptor=function(t,e){var n=lm(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return cm(n,i)}},Gc.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Lt(t)!==Lt(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},$e.API={events:[]},$e.version="2.5.1";var rn=$e.API,I0=1,ra=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Va=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},st=function(t){return t.toFixed(2)},Rs=function(t){return t.toFixed(5)};rn.__acroform__={};var bi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Py=function(t){return t*I0},br=function(t){var e=new Yw,n=Ue.internal.getHeight(t)||0,i=Ue.internal.getWidth(t)||0;return e.BBox=[0,0,Number(st(i)),Number(st(n))],e},CC=rn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},NC=rn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},LC=rn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},cn=rn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return LC(t,e-1)},un=rn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return CC(t,e-1)},hn=rn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return NC(t,e-1)},RC=rn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=i(s+a)||0,l.upperRight_X=n(r+o)||0,l.upperRight_Y=i(s)||0,[Number(st(l.lowerLeft_X)),Number(st(l.lowerLeft_Y)),Number(st(l.upperRight_X)),Number(st(l.upperRight_Y))]},kC=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=um(t,n),r=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+r+" "+st(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=br(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},um=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=t.multiline?r.map(function(C){return C.split(`
`)}):r.map(function(C){return[C]});var s=n,o=Ue.internal.getHeight(t)||0;o=o<0?-o:o;var a=Ue.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(C,E,B){if(C+1<r.length){var V=E+" "+r[C+1][0];return Lh(V,t,B).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,h,d=Lh("3",t,s).height,m=t.multiline?o-s:(o-d)/2,p=m+=2,v=0,b=0,x=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Lh(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var w="",A=0,S=0;S<r.length;S++)if(r.hasOwnProperty(S)){var k=!1;if(r[S].length!==1&&x!==r[S].length-1){if((d+2)*(A+2)+2>o)continue e;w+=r[S][x],k=!0,b=S,S--}else{w=(w+=r[S][x]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var F=parseInt(S),G=l(F,w,s),O=S>=r.length-1;if(G&&!O){w+=" ",x=0;continue}if(G||O){if(O)b=F;else if(t.multiline&&(d+2)*(A+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(A+2)+2>o)continue e;b=F}}for(var N="",$=v;$<=b;$++){var J=r[$];if(t.multiline){if($===b){N+=J[x]+" ",x=(x+1)%J.length;continue}if($===v){N+=J[J.length-1]+" ";continue}}N+=J[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,h=Lh(N,t,s).width,t.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;case"left":default:c=2}e+=st(c)+" "+st(p)+` Td
`,e+="("+ra(N)+`) Tj
`,e+=-st(c)+` 0 Td
`,p=-(s+2),h=0,v=k?b:b+1,A++,w=""}break}return i.text=e,i.fontSize=s,i},Lh=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},DC={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},OC=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},MC=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,r=t[n];e.internal.newObjectDeferredBegin(r.objId,!0),Lt(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete t[i]}},FC=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ur.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(DC)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");I0=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Xw,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];s.objId=void 0,s.hasAnnotation&&OC(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,r){var s=!i;for(var o in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(o)){var a=i[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=RC(a.Rect,r)),r.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ue.createDefaultAppearanceStream(a),Lt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=kC(a);l.push({key:"AP",value:"<</N "+h+">>"}),r.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var d="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var p=a.appearanceStreamContent[m];if(d+="/"+m+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var v=p[o];typeof v=="function"&&(v=v.call(r,a)),d+="/"+o+" "+v+" ",r.internal.acroformPlugin.xForms.indexOf(v)>=0||r.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(r,a)),d+="/"+o+" "+v,r.internal.acroformPlugin.xForms.indexOf(v)>=0||r.internal.acroformPlugin.xForms.push(v);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:a.objId}),r.internal.out("endobj")}s&&MC(r.internal.acroformPlugin.xForms,r)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Kw=rn.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(o){return o};if(Array.isArray(t)){for(var r="[",s=0;s<t.length;s++)switch(s!==0&&(r+=" "),Lt(t[s])){case"boolean":case"number":case"object":r+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),r+="("+ra(i(t[s].toString()))+")"):r+=t[s].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rg=function(t,e,n){var i=function(r){return r};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+ra(i(t))+")"},Tr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Tr.prototype.toString=function(){return this.objId+" 0 R"},Tr.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Tr.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],r=this[i];r&&(Array.isArray(r)?t.push({key:i,value:Kw(r,this.objId,this.scope)}):r instanceof Tr?(r.scope=this.scope,t.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&t.push({key:i,value:r}))}return t};var Yw=function(){Tr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};bi(Yw,Tr);var Xw=function(){Tr.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ra(n(t))+")"}},set:function(n){t=n}})};bi(Xw,Tr);var ur=function t(){Tr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!cn(e,3)},set:function(w){w?this.F=un(e,3):this.F=hn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(w){i=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(w){i[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(w){i[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(w){i[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(w){i[3]=w}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof wf)return;s="FieldObject"+t.FieldNum++}var w=function(A){return A};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+ra(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/I0:c},set:function(w){c=w}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(w){h=w}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof wf||this instanceof Gs))return rg(d,this.objId,this.scope)},set:function(w){w=w.toString(),d=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof bn?m:rg(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof bn?w:w.substr(0,1)==="("?Va(w.substr(1,w.length-2)):Va(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof bn?Va(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof bn?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof bn?p:rg(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=this instanceof bn?w:w.substr(0,1)==="("?Va(w.substr(1,w.length-2)):Va(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof bn?Va(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof bn?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(w){w=!!w,b=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(w){v=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,1)},set:function(w){w?this.Ff=un(this.Ff,1):this.Ff=hn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,2)},set:function(w){w?this.Ff=un(this.Ff,2):this.Ff=hn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,3)},set:function(w){w?this.Ff=un(this.Ff,3):this.Ff=hn(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');x=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(x){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};bi(ur,Tr);var Fo=function(){ur.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Kw(e,this.objId,this.scope)},set:function(n){var i,r;r=[],typeof(i=n)=="string"&&(r=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(i,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,18)},set:function(n){n?this.Ff=un(this.Ff,18):this.Ff=hn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=un(this.Ff,19):this.Ff=hn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,20)},set:function(n){n?(this.Ff=un(this.Ff,20),e.sort()):this.Ff=hn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,22)},set:function(n){n?this.Ff=un(this.Ff,22):this.Ff=hn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,23)},set:function(n){n?this.Ff=un(this.Ff,23):this.Ff=hn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,27)},set:function(n){n?this.Ff=un(this.Ff,27):this.Ff=hn(this.Ff,27)}}),this.hasAppearanceStream=!1};bi(Fo,ur);var jo=function(){Fo.call(this),this.fontName="helvetica",this.combo=!1};bi(jo,Fo);var Vo=function(){jo.call(this),this.combo=!0};bi(Vo,jo);var Ec=function(){Vo.call(this),this.edit=!0};bi(Ec,Vo);var bn=function(){ur.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,15)},set:function(n){n?this.Ff=un(this.Ff,15):this.Ff=hn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,16)},set:function(n){n?this.Ff=un(this.Ff,16):this.Ff=hn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,17)},set:function(n){n?this.Ff=un(this.Ff,17):this.Ff=hn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,26)},set:function(n){n?this.Ff=un(this.Ff,26):this.Ff=hn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,r=[];for(i in r.push("<<"),e)r.push("/"+i+" ("+ra(n(e[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(n){Lt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};bi(bn,ur);var Tc=function(){bn.call(this),this.pushButton=!0};bi(Tc,bn);var Bo=function(){bn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};bi(Bo,bn);var wf=function(){var t,e;ur.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),i)o.push("/"+s+" ("+ra(r(i[s]))+")");return o.push(">>"),o.join(`
`)},set:function(r){Lt(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ue.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bi(wf,ur),Bo.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Bo.prototype.createOption=function(t){var e=new wf;return e.Parent=this,e.optionName=t,this.Kids.push(e),jC.call(this.scope,e),e};var Ic=function(){bn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ue.CheckBox.createAppearanceStream()};bi(Ic,bn);var Gs=function(){ur.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,13)},set:function(e){e?this.Ff=un(this.Ff,13):this.Ff=hn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,21)},set:function(e){e?this.Ff=un(this.Ff,21):this.Ff=hn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,23)},set:function(e){e?this.Ff=un(this.Ff,23):this.Ff=hn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,24)},set:function(e){e?this.Ff=un(this.Ff,24):this.Ff=hn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,25)},set:function(e){e?this.Ff=un(this.Ff,25):this.Ff=hn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,26)},set:function(e){e?this.Ff=un(this.Ff,26):this.Ff=hn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bi(Gs,ur);var Pc=function(){Gs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,14)},set:function(t){t?this.Ff=un(this.Ff,14):this.Ff=hn(this.Ff,14)}}),this.password=!0};bi(Pc,Gs);var Ue={CheckBox:{createAppearanceStream:function(){return{N:{On:Ue.CheckBox.YesNormal},D:{On:Ue.CheckBox.YesPushDown,Off:Ue.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=br(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=um(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+st(Ue.internal.getWidth(t))+" "+st(Ue.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+st(s.fontSize)+" Tf "+r),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=br(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),r=[],s=Ue.internal.getHeight(t),o=Ue.internal.getWidth(t),a=um(t,t.caption);return r.push("1 g"),r.push("0 0 "+st(o)+" "+st(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+st(o-1)+" "+st(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+st(a.fontSize)+" Tf "+i),r.push(a.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=br(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+st(Ue.internal.getWidth(t))+" "+st(Ue.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ue.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ue.RadioButton.Circle.YesNormal,e.D[t]=Ue.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=br(t);e.scope=t.scope;var n=[],i=Ue.internal.getWidth(t)<=Ue.internal.getHeight(t)?Ue.internal.getWidth(t)/4:Ue.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Ue.internal.Bezier_C,s=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Rs(Ue.internal.getWidth(t)/2)+" "+Rs(Ue.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=br(t);e.scope=t.scope;var n=[],i=Ue.internal.getWidth(t)<=Ue.internal.getHeight(t)?Ue.internal.getWidth(t)/4:Ue.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*Ue.internal.Bezier_C).toFixed(5)),o=Number((i*Ue.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Rs(Ue.internal.getWidth(t)/2)+" "+Rs(Ue.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Rs(Ue.internal.getWidth(t)/2)+" "+Rs(Ue.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=br(t);e.scope=t.scope;var n=[],i=Ue.internal.getWidth(t)<=Ue.internal.getHeight(t)?Ue.internal.getWidth(t)/4:Ue.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*Ue.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Rs(Ue.internal.getWidth(t)/2)+" "+Rs(Ue.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ue.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ue.RadioButton.Cross.YesNormal,e.D[t]=Ue.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=br(t);e.scope=t.scope;var n=[],i=Ue.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+st(Ue.internal.getWidth(t)-2)+" "+st(Ue.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(st(i.x1.x)+" "+st(i.x1.y)+" m"),n.push(st(i.x2.x)+" "+st(i.x2.y)+" l"),n.push(st(i.x4.x)+" "+st(i.x4.y)+" m"),n.push(st(i.x3.x)+" "+st(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=br(t);e.scope=t.scope;var n=Ue.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+st(Ue.internal.getWidth(t))+" "+st(Ue.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+st(Ue.internal.getWidth(t)-2)+" "+st(Ue.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(st(n.x1.x)+" "+st(n.x1.y)+" m"),i.push(st(n.x2.x)+" "+st(n.x2.y)+" l"),i.push(st(n.x4.x)+" "+st(n.x4.y)+" m"),i.push(st(n.x3.x)+" "+st(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=br(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+st(Ue.internal.getWidth(t))+" "+st(Ue.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Ue.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ue.internal.getWidth(t),n=Ue.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},Ue.internal.getWidth=function(t){var e=0;return Lt(t)==="object"&&(e=Py(t.Rect[2])),e},Ue.internal.getHeight=function(t){var e=0;return Lt(t)==="object"&&(e=Py(t.Rect[3])),e};var jC=rn.addField=function(t){if(FC(this,t),!(t instanceof ur))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};rn.AcroFormChoiceField=Fo,rn.AcroFormListBox=jo,rn.AcroFormComboBox=Vo,rn.AcroFormEditBox=Ec,rn.AcroFormButton=bn,rn.AcroFormPushButton=Tc,rn.AcroFormRadioButton=Bo,rn.AcroFormCheckBox=Ic,rn.AcroFormTextField=Gs,rn.AcroFormPasswordField=Pc,rn.AcroFormAppearance=Ue,rn.AcroForm={ChoiceField:Fo,ListBox:jo,ComboBox:Vo,EditBox:Ec,Button:bn,PushButton:Tc,RadioButton:Bo,CheckBox:Ic,TextField:Gs,PasswordField:Pc,Appearance:Ue},$e.AcroForm={ChoiceField:Fo,ListBox:jo,ComboBox:Vo,EditBox:Ec,Button:bn,PushButton:Tc,RadioButton:Bo,CheckBox:Ic,TextField:Gs,PasswordField:Pc,Appearance:Ue};var VC=$e.AcroForm;function Jw(t){return t.reduce(function(e,n,i){return e[n]=i,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(C,E){var B,V,H,U,Q,K=e;if((E=E||e)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(G(C))for(Q in n)for(H=n[Q],B=0;B<H.length;B+=1){for(U=!0,V=0;V<H[B].length;V+=1)if(H[B][V]!==void 0&&H[B][V]!==C[V]){U=!1;break}if(U===!0){K=Q;break}}else for(Q in n)for(H=n[Q],B=0;B<H.length;B+=1){for(U=!0,V=0;V<H[B].length;V+=1)if(H[B][V]!==void 0&&H[B][V]!==C.charCodeAt(V)){U=!1;break}if(U===!0){K=Q;break}}return K===e&&E!==e&&(K=E),K},r=function C(E){for(var B=this.internal.write,V=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:E.width}),U.push({key:"Height",value:E.height}),E.colorSpace===x.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===x.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var Q="",K=0,re=E.transparency.length;K<re;K++)Q+=E.transparency[K]+" "+E.transparency[K]+" ";U.push({key:"Mask",value:"["+Q+"]"})}E.sMask!==void 0&&U.push({key:"SMask",value:E.objectId+1+" 0 R"});var ie=E.filter!==void 0?["/"+E.filter]:void 0;if(V({data:E.data,additionalKeyValues:U,alreadyAppliedFilters:ie,objectId:E.objectId}),B("endobj"),"sMask"in E&&E.sMask!==void 0){var pe="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,T={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:pe,data:E.sMask};"filter"in E&&(T.filter=E.filter),C.call(this,T)}if(E.colorSpace===x.INDEXED){var j=this.internal.newObject();V({data:N(new Uint8Array(E.palette)),objectId:j}),B("endobj")}},s=function(){var C=this.internal.collections.addImage_images;for(var E in C)r.call(this,C[E])},o=function(){var C,E=this.internal.collections.addImage_images,B=this.internal.write;for(var V in E)B("/I"+(C=E[V]).index,C.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var C=this.internal.collections.addImage_images;return a.call(this),C},c=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(C){return typeof t["process"+C.toUpperCase()]=="function"},d=function(C){return Lt(C)==="object"&&C.nodeType===1},m=function(C,E){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var B=""+C.getAttribute("src");if(B.indexOf("data:image/")===0)return xc(unescape(B).split("base64,").pop());var V=t.loadFile(B,!0);if(V!==void 0)return V}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var H;switch(E){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;case"JPEG":case"JPG":default:H="image/jpeg"}return xc(C.toDataURL(H,1).split("base64,").pop())}},p=function(C){var E=this.internal.collections.addImage_images;if(E){for(var B in E)if(C===E[B].alias)return E[B]}},v=function(C,E,B){return C||E||(C=-96,E=-96),C<0&&(C=-1*B.width*72/C/this.internal.scaleFactor),E<0&&(E=-1*B.height*72/E/this.internal.scaleFactor),C===0&&(C=E*B.width/B.height),E===0&&(E=C*B.height/B.width),[C,E]},b=function(C,E,B,V,H,U){var Q=v.call(this,B,V,H),K=this.internal.getCoordinateString,re=this.internal.getVerticalCoordinateString,ie=l.call(this);if(B=Q[0],V=Q[1],ie[H.index]=H,U){U*=Math.PI/180;var pe=Math.cos(U),T=Math.sin(U),j=function(Y){return Y.toFixed(4)},z=[j(pe),j(T),j(-1*T),j(pe),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,K(C),re(E+V),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([K(B),"0","0",K(V),"0","0","cm"].join(" "))):this.internal.write([K(B),"0","0",K(V),K(C),re(E+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=t.__addimage__.sHashCode=function(C){var E,B,V=0;if(typeof C=="string")for(B=C.length,E=0;E<B;E++)V=(V<<5)-V+C.charCodeAt(E),V|=0;else if(G(C))for(B=C.byteLength/2,E=0;E<B;E++)V=(V<<5)-V+C[E],V|=0;return V},S=t.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var E=!0;return C.length===0&&(E=!1),C.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(E=!1),E},k=t.__addimage__.extractImageFromDataUrl=function(C){var E=(C=C||"").split("base64,"),B=null;if(E.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(V)&&(B={mimeType:V[1],charset:V[2],data:E[1]})}return B},F=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(C){return F()&&C instanceof ArrayBuffer};var G=t.__addimage__.isArrayBufferView=function(C){return F()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},O=t.__addimage__.binaryStringToUint8Array=function(C){for(var E=C.length,B=new Uint8Array(E),V=0;V<E;V++)B[V]=C.charCodeAt(V);return B},N=t.__addimage__.arrayBufferToBinaryString=function(C){for(var E="",B=G(C)?C:new Uint8Array(C),V=0;V<B.length;V+=8192)E+=String.fromCharCode.apply(null,B.subarray(V,V+8192));return E};t.addImage=function(){var C,E,B,V,H,U,Q,K,re;if(typeof arguments[1]=="number"?(E=e,B=arguments[1],V=arguments[2],H=arguments[3],U=arguments[4],Q=arguments[5],K=arguments[6],re=arguments[7]):(E=arguments[1],B=arguments[2],V=arguments[3],H=arguments[4],U=arguments[5],Q=arguments[6],K=arguments[7],re=arguments[8]),Lt(C=arguments[0])==="object"&&!d(C)&&"imageData"in C){var ie=C;C=ie.imageData,E=ie.format||E||e,B=ie.x||B||0,V=ie.y||V||0,H=ie.w||ie.width||H,U=ie.h||ie.height||U,Q=ie.alias||Q,K=ie.compression||K,re=ie.rotation||ie.angle||re}var pe=this.internal.getFilters();if(K===void 0&&pe.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(B)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var T=$.call(this,C,E,Q,K);return b.call(this,B,V,H,U,T,re),this};var $=function(C,E,B,V){var H,U,Q;if(typeof C=="string"&&i(C)===e){C=unescape(C);var K=J(C,!1);(K!==""||(K=t.loadFile(C,!0))!==void 0)&&(C=K)}if(d(C)&&(C=m(C,E)),E=i(C,E),!h(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((Q=B)==null||Q.length===0)&&(B=function(re){return typeof re=="string"||G(re)?A(re):G(re.data)?A(re.data):null}(C)),(H=p.call(this,B))||(F()&&(C instanceof Uint8Array||E==="RGBA"||(U=C,C=O(C))),H=this["process"+E.toUpperCase()](C,c.call(this),B,function(re){return re&&typeof re=="string"&&(re=re.toUpperCase()),re in t.image_compression?re:w.NONE}(V),U)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},J=t.__addimage__.convertBase64ToBinaryString=function(C,E){var B;E=typeof E!="boolean"||E;var V,H="";if(typeof C=="string"){V=(B=k(C))!==null?B.data:C;try{H=xc(V)}catch(U){if(E)throw S(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};t.getImageProperties=function(C){var E,B,V="";if(d(C)&&(C=m(C)),typeof C=="string"&&i(C)===e&&((V=J(C,!1))===""&&(V=t.loadFile(C)||""),C=V),B=i(C),!h(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!F()||C instanceof Uint8Array||(C=O(C)),!(E=this["process"+B.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=B,E}})($e.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};$e.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,r,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,h=!1,d=0;d<c.length&&!h;d++)switch((i=c[d]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var m=0;m<c.length;m++){i=c[m];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(b.objId),A=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+p(w(i.contents))+")",s+=" /Popup "+x.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(w(A))+") >>",b.content=s;var S=b.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+o(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+S,i.open&&(s+=" /Open true"),s+=" >>",x.content=s,this.internal.write(b.objId,"0 R",x.objId,"0 R");break;case"freetext":r="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var k=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+p(v(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var F=this.annotations._nameMap[i.options.name];i.options.pageNumber=F.page,i.options.top=F.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var G=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+G+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,r,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(i),w:l(n+r),h:c(i+s)},options:o,type:"link"})},t.textWithLink=function(n,i,r,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(n,a).length;o=Math.ceil(c*h)}else a=l,o=c;return this.text(n,i,r,s),r+=.2*c,s.align==="center"&&(i-=l/2),s.align==="right"&&(i-=l),this.link(i,r-c,a,o,s),l},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}($e.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},a=t.__arabicParser__.isArabicEndLetter=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(b){return o(b)&&r.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(b){var x=0,w=n,A="",S=0;for(x=0;x<b.length;x+=1)w[b.charCodeAt(x)]!==void 0?(S++,typeof(w=w[b.charCodeAt(x)])=="number"&&(A+=String.fromCharCode(w),w=n,S=0),x===b.length-1&&(w=n,A+=b.charAt(x-(S-1)),x-=S-1,S=0)):(w=n,A+=b.charAt(x-S),x-=S,S=0);return A};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&i[b.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(b,x,w){return o(b)?s(b)===!1?-1:!c(b)||!o(x)&&!o(w)||!o(w)&&a(x)||a(b)&&!o(x)||a(b)&&l(x)||a(b)&&a(x)?0:h(b)&&o(x)&&!a(x)&&o(w)&&c(w)?3:a(b)||!o(w)?1:2:-1},p=function(b){var x=0,w=0,A=0,S="",k="",F="",G=(b=b||"").split("\\s+"),O=[];for(x=0;x<G.length;x+=1){for(O.push(""),w=0;w<G[x].length;w+=1)S=G[x][w],k=G[x][w-1],F=G[x][w+1],o(S)?(A=m(S,k,F),O[x]+=A!==-1?String.fromCharCode(e[S.charCodeAt(0)][A]):S):O[x]+=S;O[x]=d(O[x])}return O.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var b,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(x)){var A=0;for(w=[],A=0;A<x.length;A+=1)Array.isArray(x[A])?w.push([p(x[A][0]),x[A][1],x[A][2]]):w.push([p(x[A])]);b=w}else b=p(x);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",v])}($e.API),$e.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var r;if((n=n||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}($e.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(b){l=b}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(b){v=b}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){i.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),m=c.scaleFactor||this.internal.scaleFactor,p=0,v=0,b=0,x=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,k){return S.concat(x.splitTextToSize(k,w))},[])):l=Array.isArray(l)?l:[l];for(var A=0;A<l.length;A++)p<(b=this.getStringUnitWidth(l[A],{font:d})*h)&&(p=b);return p!==0&&(v=l.length),{w:p/=m,h:Math.max((v*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,h,d,m){if(i.call(this),!h)throw new Error("No data for PDF table.");var p,v,b,x,w=[],A=[],S=[],k={},F={},G=[],O=[],N=(m=m||{}).autoSize||!1,$=m.printHeaders!==!1,J=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,C=m.margins||Object.assign({width:this.getPageWidth()},e),E=typeof m.padding=="number"?m.padding:3,B=m.headerBackgroundColor||"#c8c8c8",V=m.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=V,this.setFontSize(J),d==null)A=w=Object.keys(h[0]),S=w.map(function(){return"left"});else if(Array.isArray(d)&&Lt(d[0])==="object")for(w=d.map(function(ie){return ie.name}),A=d.map(function(ie){return ie.prompt||ie.name||""}),S=d.map(function(ie){return ie.align||"left"}),p=0;p<d.length;p+=1)F[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(A=w=d,S=w.map(function(){return"left"}));if(N||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<w.length;p+=1){for(k[x=w[p]]=h.map(function(ie){return ie[x]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(A[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=k[x],this.setFont(void 0,"normal"),b=0;b<v.length;b+=1)G.push(this.getTextDimensions(v[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[x]=Math.max.apply(null,G)+E+E,G=[]}if($){var H={};for(p=0;p<w.length;p+=1)H[w[p]]={},H[w[p]].text=A[p],H[w[p]].align=S[p];var U=a.call(this,H,F);O=w.map(function(ie){return new s(l,c,F[ie],U,H[ie].text,void 0,H[ie].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var Q=d.reduce(function(ie,pe){return ie[pe.name]=pe.align,ie},{});for(p=0;p<h.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:h[p]},this);var K=a.call(this,h[p],F);for(b=0;b<w.length;b+=1){var re=h[p][w[b]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:b,data:re},this),o.call(this,new s(l,c,F[w[b]],K,re,p+2,Q[w[b]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var h=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var v=l[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,c[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/m+h+h},this).reduce(function(p,v){return Math.max(p,v)},0)};t.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,m.push(h)),h.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}($e.API);var Qw={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Zw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],hm=Jw(Zw),eb=[100,200,300,400,500,600,700,800,900],BC=Jw(eb);function fm(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return Qw[s=s||"normal"]?s:"normal"}(t.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),r=function(s){return typeof hm[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:i,stretch:r,src:t.src||[],ref:t.ref||{name:e,style:[r,n,i].join(" ")}}}function Cy(t,e,n,i){var r;for(r=n;r>=0&&r<e.length;r+=i)if(t[e[r]])return t[e[r]];for(r=n;r>=0&&r<e.length;r-=i)if(t[e[r]])return t[e[r]]}var UC={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ny={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ly(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function qC(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},UC,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(r[(s=fm(e[a])).family]&&(s.family=r[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[i]))throw new Error("Could not find a font-family for the rule '"+Ly(s)+"' and default family '"+i+"'.");if(o=function(l,c){if(c[l])return c[l];var h=hm[l],d=h<=hm.normal?-1:1,m=Cy(c,Zw,h,d);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var h=Qw[l],d=0;d<h.length;++d)if(c[h[d]])return c[h[d]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var h=BC[l],d=Cy(c,eb,h,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Ly(s)+"'.");return o}function Ry(t){return t.trimLeft()}function HC(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function zC(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Rh,ky,Dy,sg=["times"];(function(t){var e,n,i,r,s,o,a,l,c,h=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new l,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new o,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new o,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var d=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=T;Object.defineProperty(this,"pdf",{get:function(){return j}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(ye){z=!!ye}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(ye){Y=!!ye}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(ye){isNaN(ye)||(ne=ye)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(ye){isNaN(ye)||(ce=ye)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ye){var X;typeof ye=="number"?X=[ye,ye,ye,ye]:((X=new Array(4))[0]=ye[0],X[1]=ye.length>=2?ye[1]:X[0],X[2]=ye.length>=3?ye[2]:X[0],X[3]=ye.length>=4?ye[3]:X[1]),c.margin=X}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(ye){fe=ye}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(ye){de=ye}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(ye){Ee=ye}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ye){ye instanceof h&&(c=ye)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ye){c.path=ye}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(ye){Se=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var X;X=m(ye),this.ctx.fillStyle=X.style,this.ctx.isFillTransparent=X.a===0,this.ctx.fillOpacity=X.a,this.pdf.setFillColor(X.r,X.g,X.b,{a:X.a}),this.pdf.setTextColor(X.r,X.g,X.b,{a:X.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var X=m(ye);this.ctx.strokeStyle=X.style,this.ctx.isStrokeTransparent=X.a===0,this.ctx.strokeOpacity=X.a,X.a===0?this.pdf.setDrawColor(255,255,255):(X.a,this.pdf.setDrawColor(X.r,X.g,X.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Oe=null;function Me(ye,X){if(Oe===null){var ot=function(qe){var Ie=[];return Object.keys(qe).forEach(function(Ce){qe[Ce].forEach(function(Fe){var ke=null;switch(Fe){case"bold":ke={family:Ce,weight:"bold"};break;case"italic":ke={family:Ce,style:"italic"};break;case"bolditalic":ke={family:Ce,weight:"bold",style:"italic"};break;case"":case"normal":ke={family:Ce}}ke!==null&&(ke.ref={name:Ce,style:Fe},Ie.push(ke))})}),Ie}(ye.getFontList());Oe=function(qe){for(var Ie={},Ce=0;Ce<qe.length;++Ce){var Fe=fm(qe[Ce]),ke=Fe.family,He=Fe.stretch,it=Fe.style,ct=Fe.weight;Ie[ke]=Ie[ke]||{},Ie[ke][He]=Ie[ke][He]||{},Ie[ke][He][it]=Ie[ke][He][it]||{},Ie[ke][He][it][ct]=Fe}return Ie}(ot.concat(X))}return Oe}var Ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ye},set:function(ye){Oe=null,Ye=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var X;if(this.ctx.font=ye,(X=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var ot=X[1],qe=(X[2],X[3]),Ie=X[4],Ce=(X[5],X[6]),Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ie)[2];Ie=Math.floor(Fe==="px"?parseFloat(Ie)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(Ie)*this.pdf.getFontSize():parseFloat(Ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ie);var ke=function(Qe){var dt,je,Wn=[],xt=Qe.trim();if(xt==="")return sg;if(xt in Ny)return[Ny[xt]];for(;xt!=="";){switch(je=null,dt=(xt=Ry(xt)).charAt(0)){case'"':case"'":je=HC(xt.substring(1),dt);break;default:je=zC(xt)}if(je===null||(Wn.push(je[0]),(xt=Ry(je[1]))!==""&&xt.charAt(0)!==","))return sg;xt=xt.replace(/^,/,"")}return Wn}(Ce);if(this.fontFaces){var He=qC(Me(this.pdf,this.fontFaces),ke.map(function(Qe){return{family:Qe,stretch:"normal",weight:qe,style:ot}}));this.pdf.setFont(He.ref.name,He.ref.style)}else{var it="";(qe==="bold"||parseInt(qe,10)>=700||ot==="bold")&&(it="bold"),ot==="italic"&&(it+="italic"),it.length===0&&(it="normal");for(var ct="",ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},At=0;At<ke.length;At++){if(this.pdf.internal.getFont(ke[At],it,{noFallback:!0,disableWarning:!0})!==void 0){ct=ke[At];break}if(it==="bolditalic"&&this.pdf.internal.getFont(ke[At],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=ke[At],it="bold";else if(this.pdf.internal.getFont(ke[At],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=ke[At],it="normal";break}}if(ct===""){for(var kt=0;kt<ke.length;kt++)if(ft[ke[kt]]){ct=ft[ke[kt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,it)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};d.prototype.setLineDash=function(T){this.lineDash=T},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){k.call(this,"fill",!1)},d.prototype.stroke=function(){k.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(T,j){if(isNaN(T)||isNaN(j))throw jt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(T,j));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(T,j)},d.prototype.closePath=function(){var T=new o(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&Lt(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){T=new o(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(T.x,T.y)},d.prototype.lineTo=function(T,j){if(isNaN(T)||isNaN(j))throw jt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(T,j));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},d.prototype.quadraticCurveTo=function(T,j,z,Y){if(isNaN(z)||isNaN(Y)||isNaN(T)||isNaN(j))throw jt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(z,Y)),ce=this.ctx.transform.applyToPoint(new o(T,j));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},d.prototype.bezierCurveTo=function(T,j,z,Y,ne,ce){if(isNaN(ne)||isNaN(ce)||isNaN(T)||isNaN(j)||isNaN(z)||isNaN(Y))throw jt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new o(ne,ce)),de=this.ctx.transform.applyToPoint(new o(T,j)),Ee=this.ctx.transform.applyToPoint(new o(z,Y));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:Ee.x,y2:Ee.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},d.prototype.arc=function(T,j,z,Y,ne,ce){if(isNaN(T)||isNaN(j)||isNaN(z)||isNaN(Y)||isNaN(ne))throw jt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new o(T,j));T=fe.x,j=fe.y;var de=this.ctx.transform.applyToPoint(new o(0,z)),Ee=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(de.x-Ee.x,2)+Math.pow(de.y-Ee.y,2))}Math.abs(ne-Y)>=2*Math.PI&&(Y=0,ne=2*Math.PI),this.path.push({type:"arc",x:T,y:j,radius:z,startAngle:Y,endAngle:ne,counterclockwise:ce})},d.prototype.arcTo=function(T,j,z,Y,ne){throw new Error("arcTo not implemented.")},d.prototype.rect=function(T,j,z,Y){if(isNaN(T)||isNaN(j)||isNaN(z)||isNaN(Y))throw jt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,j),this.lineTo(T+z,j),this.lineTo(T+z,j+Y),this.lineTo(T,j+Y),this.lineTo(T,j),this.lineTo(T+z,j),this.lineTo(T,j)},d.prototype.fillRect=function(T,j,z,Y){if(isNaN(T)||isNaN(j)||isNaN(z)||isNaN(Y))throw jt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,j,z,Y),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},d.prototype.strokeRect=function(T,j,z,Y){if(isNaN(T)||isNaN(j)||isNaN(z)||isNaN(Y))throw jt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(T,j,z,Y),this.stroke())},d.prototype.clearRect=function(T,j,z,Y){if(isNaN(T)||isNaN(j)||isNaN(z)||isNaN(Y))throw jt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,j,z,Y))},d.prototype.save=function(T){T=typeof T!="boolean"||T;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},d.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(j),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(T){var j,z,Y,ne;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))j=0,z=0,Y=0,ne=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(ce!==null)j=parseInt(ce[1]),z=parseInt(ce[2]),Y=parseInt(ce[3]),ne=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)j=parseInt(ce[1]),z=parseInt(ce[2]),Y=parseInt(ce[3]),ne=parseFloat(ce[4]);else{if(ne=1,typeof T=="string"&&T.charAt(0)!=="#"){var fe=new Ww(T);T=fe.ok?fe.toHex():"#000000"}T.length===4?(j=T.substring(1,2),j+=j,z=T.substring(2,3),z+=z,Y=T.substring(3,4),Y+=Y):(j=T.substring(1,3),z=T.substring(3,5),Y=T.substring(5,7)),j=parseInt(j,16),z=parseInt(z,16),Y=parseInt(Y,16)}}return{r:j,g:z,b:Y,a:ne,style:T}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(T,j,z,Y){if(isNaN(j)||isNaN(z)||typeof T!="string")throw jt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!p.call(this)){var ne=K(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;E.call(this,{text:T,x:j,y:z,scale:ce,angle:ne,align:this.textAlign,maxWidth:Y})}},d.prototype.strokeText=function(T,j,z,Y){if(isNaN(j)||isNaN(z)||typeof T!="string")throw jt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){Y=isNaN(Y)?void 0:Y;var ne=K(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;E.call(this,{text:T,x:j,y:z,scale:ce,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:Y})}},d.prototype.measureText=function(T){if(typeof T!="string")throw jt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,z=this.pdf.internal.scaleFactor,Y=j.internal.getFontSize(),ne=j.getStringUnitWidth(T)*Y/j.internal.scaleFactor,ce=function(fe){var de=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new ce({width:ne*=Math.round(96*z/72*1e4)/1e4})},d.prototype.scale=function(T,j){if(isNaN(T)||isNaN(j))throw jt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new l(T,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.rotate=function(T){if(isNaN(T))throw jt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new l(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},d.prototype.translate=function(T,j){if(isNaN(T)||isNaN(j))throw jt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new l(1,0,0,1,T,j);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.transform=function(T,j,z,Y,ne,ce){if(isNaN(T)||isNaN(j)||isNaN(z)||isNaN(Y)||isNaN(ne)||isNaN(ce))throw jt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new l(T,j,z,Y,ne,ce);this.ctx.transform=this.ctx.transform.multiply(fe)},d.prototype.setTransform=function(T,j,z,Y,ne,ce){T=isNaN(T)?1:T,j=isNaN(j)?0:j,z=isNaN(z)?0:z,Y=isNaN(Y)?1:Y,ne=isNaN(ne)?0:ne,ce=isNaN(ce)?0:ce,this.ctx.transform=new l(T,j,z,Y,ne,ce)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(T,j,z,Y,ne,ce,fe,de,Ee){var Se=this.pdf.getImageProperties(T),Oe=1,Me=1,Ye=1,ye=1;Y!==void 0&&de!==void 0&&(Ye=de/Y,ye=Ee/ne,Oe=Se.width/Y*de/Y,Me=Se.height/ne*Ee/ne),ce===void 0&&(ce=j,fe=z,j=0,z=0),Y!==void 0&&de===void 0&&(de=Y,Ee=ne),Y===void 0&&de===void 0&&(de=Se.width,Ee=Se.height);for(var X,ot=this.ctx.transform.decompose(),qe=K(ot.rotate.shx),Ie=new l,Ce=(Ie=(Ie=(Ie=Ie.multiply(ot.translate)).multiply(ot.skew)).multiply(ot.scale)).applyToRectangle(new a(ce-j*Ye,fe-z*ye,Y*Oe,ne*Me)),Fe=x.call(this,Ce),ke=[],He=0;He<Fe.length;He+=1)ke.indexOf(Fe[He])===-1&&ke.push(Fe[He]);if(S(ke),this.autoPaging)for(var it=ke[0],ct=ke[ke.length-1],ft=it;ft<ct+1;ft++){this.pdf.setPage(ft);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=ft===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],je=ft===1?0:Qe+(ft-2)*dt;if(this.ctx.clip_path.length!==0){var Wn=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(X,this.posX+this.margin[3],-je+kt+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=Wn}var xt=JSON.parse(JSON.stringify(Ce));xt=A([xt],this.posX+this.margin[3],-je+kt+this.ctx.prevPageLastElemOffset)[0];var Bi=(ft>it||ft<ct)&&b.call(this);Bi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,dt,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,qe),Bi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,qe)};var x=function(T,j,z){var Y=[];j=j||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":Y.push(Math.floor((T.y+ne)/z)+1);break;case"arc":Y.push(Math.floor((T.y+ne-T.radius)/z)+1),Y.push(Math.floor((T.y+ne+T.radius)/z)+1);break;case"qct":var ce=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);Y.push(Math.floor((ce.y+ne)/z)+1),Y.push(Math.floor((ce.y+ce.h+ne)/z)+1);break;case"bct":var fe=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);Y.push(Math.floor((fe.y+ne)/z)+1),Y.push(Math.floor((fe.y+fe.h+ne)/z)+1);break;case"rect":Y.push(Math.floor((T.y+ne)/z)+1),Y.push(Math.floor((T.y+T.h+ne)/z)+1)}for(var de=0;de<Y.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<Y[de];)w.call(this);return Y},w=function(){var T=this.fillStyle,j=this.strokeStyle,z=this.font,Y=this.lineCap,ne=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=j,this.font=z,this.lineCap=Y,this.lineWidth=ne,this.lineJoin=ce},A=function(T,j,z){for(var Y=0;Y<T.length;Y++)switch(T[Y].type){case"bct":T[Y].x2+=j,T[Y].y2+=z;case"qct":T[Y].x1+=j,T[Y].y1+=z;case"mt":case"lt":case"arc":default:T[Y].x+=j,T[Y].y+=z}return T},S=function(T){return T.sort(function(j,z){return j-z})},k=function(T,j){for(var z,Y,ne=this.fillStyle,ce=this.strokeStyle,fe=this.lineCap,de=this.lineWidth,Ee=Math.abs(de*this.ctx.transform.scaleX),Se=this.lineJoin,Oe=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),Ye=[],ye=0;ye<Me.length;ye++)if(Me[ye].x!==void 0)for(var X=x.call(this,Me[ye]),ot=0;ot<X.length;ot+=1)Ye.indexOf(X[ot])===-1&&Ye.push(X[ot]);for(var qe=0;qe<Ye.length;qe++)for(;this.pdf.internal.getNumberOfPages()<Ye[qe];)w.call(this);if(S(Ye),this.autoPaging)for(var Ie=Ye[0],Ce=Ye[Ye.length-1],Fe=Ie;Fe<Ce+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=ne,this.strokeStyle=ce,this.lineCap=fe,this.lineWidth=Ee,this.lineJoin=Se;var ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=Fe===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Fe===1?0:it+(Fe-2)*ct;if(this.ctx.clip_path.length!==0){var At=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(z,this.posX+this.margin[3],-ft+He+this.ctx.prevPageLastElemOffset),F.call(this,T,!0),this.path=At}if(Y=JSON.parse(JSON.stringify(Oe)),this.path=A(Y,this.posX+this.margin[3],-ft+He+this.ctx.prevPageLastElemOffset),j===!1||Fe===0){var kt=(Fe>Ie||Fe<Ce)&&b.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,ct,null).clip().discardPath()),F.call(this,T,j),kt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=Ee,F.call(this,T,j),this.lineWidth=de;this.path=Oe},F=function(T,j){if((T!=="stroke"||j||!v.call(this))&&(T==="stroke"||j||!p.call(this))){for(var z,Y,ne=[],ce=this.path,fe=0;fe<ce.length;fe++){var de=ce[fe];switch(de.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:de,deltas:[],abs:[]});break;case"lt":var Ee=ne.length;if(ce[fe-1]&&!isNaN(ce[fe-1].x)&&(z=[de.x-ce[fe-1].x,de.y-ce[fe-1].y],Ee>0)){for(;Ee>=0;Ee--)if(ne[Ee-1].close!==!0&&ne[Ee-1].begin!==!0){ne[Ee-1].deltas.push(z),ne[Ee-1].abs.push(de);break}}break;case"bct":z=[de.x1-ce[fe-1].x,de.y1-ce[fe-1].y,de.x2-ce[fe-1].x,de.y2-ce[fe-1].y,de.x-ce[fe-1].x,de.y-ce[fe-1].y],ne[ne.length-1].deltas.push(z);break;case"qct":var Se=ce[fe-1].x+2/3*(de.x1-ce[fe-1].x),Oe=ce[fe-1].y+2/3*(de.y1-ce[fe-1].y),Me=de.x+2/3*(de.x1-de.x),Ye=de.y+2/3*(de.y1-de.y),ye=de.x,X=de.y;z=[Se-ce[fe-1].x,Oe-ce[fe-1].y,Me-ce[fe-1].x,Ye-ce[fe-1].y,ye-ce[fe-1].x,X-ce[fe-1].y],ne[ne.length-1].deltas.push(z);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(de)}}Y=j?null:T==="stroke"?"stroke":"fill";for(var ot=!1,qe=0;qe<ne.length;qe++)if(ne[qe].arc)for(var Ie=ne[qe].abs,Ce=0;Ce<Ie.length;Ce++){var Fe=Ie[Ce];Fe.type==="arc"?N.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,j,!ot):B.call(this,Fe.x,Fe.y),ot=!0}else if(ne[qe].close===!0)this.pdf.internal.out("h"),ot=!1;else if(ne[qe].begin!==!0){var ke=ne[qe].start.x,He=ne[qe].start.y;V.call(this,ne[qe].deltas,ke,He),ot=!0}Y&&$.call(this,Y),j&&J.call(this)}},G=function(T){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-z;case"top":return T+j-z;case"hanging":return T+j-2*z;case"middle":return T+j/2-z;case"ideographic":return T;case"alphabetic":default:return T}},O=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(j,z){this.colorStops.push([j,z])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(T,j,z,Y,ne,ce,fe,de,Ee){for(var Se=U.call(this,z,Y,ne,ce),Oe=0;Oe<Se.length;Oe++){var Me=Se[Oe];Oe===0&&(Ee?C.call(this,Me.x1+T,Me.y1+j):B.call(this,Me.x1+T,Me.y1+j)),H.call(this,T,j,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}de?J.call(this):$.call(this,fe)},$=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(T,j){this.pdf.internal.out(n(T)+" "+i(j)+" m")},E=function(T){var j;switch(T.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var z=this.pdf.getTextDimensions(T.text),Y=G.call(this,T.y),ne=O.call(this,Y)-z.h,ce=this.ctx.transform.applyToPoint(new o(T.x,Y)),fe=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var Ee,Se,Oe,Me=this.ctx.transform.applyToRectangle(new a(T.x,Y,z.w,z.h)),Ye=de.applyToRectangle(new a(T.x,ne,z.w,z.h)),ye=x.call(this,Ye),X=[],ot=0;ot<ye.length;ot+=1)X.indexOf(ye[ot])===-1&&X.push(ye[ot]);if(S(X),this.autoPaging)for(var qe=X[0],Ie=X[X.length-1],Ce=qe;Ce<Ie+1;Ce++){this.pdf.setPage(Ce);var Fe=Ce===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],it=He-this.margin[0],ct=this.pdf.internal.pageSize.width-this.margin[1],ft=ct-this.margin[3],At=Ce===1?0:ke+(Ce-2)*it;if(this.ctx.clip_path.length!==0){var kt=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Ee,this.posX+this.margin[3],-1*At+Fe),F.call(this,"fill",!0),this.path=kt}var Qe=A([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-At+Fe+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*T.scale),Oe=this.lineWidth,this.lineWidth=Oe*T.scale);var dt=this.autoPaging!=="text";if(dt||Qe.y+Qe.h<=He){if(dt||Qe.y>=Fe&&Qe.x<=ct){var je=dt?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||ct-Qe.x)[0],Wn=A([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-At+Fe+this.ctx.prevPageLastElemOffset)[0],xt=dt&&(Ce>qe||Ce<Ie)&&b.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,it,null).clip().discardPath()),this.pdf.text(je,Wn.x,Wn.y,{angle:T.angle,align:j,renderingMode:T.renderingMode}),xt&&this.pdf.restoreGraphicsState()}}else Qe.y<He&&(this.ctx.prevPageLastElemOffset+=He-Qe.y);T.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Oe)}else T.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*T.scale),Oe=this.lineWidth,this.lineWidth=Oe*T.scale),this.pdf.text(T.text,ce.x+this.posX,ce.y+this.posY,{angle:T.angle,align:j,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Oe)},B=function(T,j,z,Y){z=z||0,Y=Y||0,this.pdf.internal.out(n(T+z)+" "+i(j+Y)+" l")},V=function(T,j,z){return this.pdf.lines(T,j,z,null,null)},H=function(T,j,z,Y,ne,ce,fe,de){this.pdf.internal.out([e(r(z+T)),e(s(Y+j)),e(r(ne+T)),e(s(ce+j)),e(r(fe+T)),e(s(de+j)),"c"].join(" "))},U=function(T,j,z,Y){for(var ne=2*Math.PI,ce=Math.PI/2;j>z;)j-=ne;var fe=Math.abs(z-j);fe<ne&&Y&&(fe=ne-fe);for(var de=[],Ee=Y?-1:1,Se=j;fe>1e-5;){var Oe=Se+Ee*Math.min(fe,ce);de.push(Q.call(this,T,Se,Oe)),fe-=Math.abs(Oe-Se),Se=Oe}return de},Q=function(T,j,z){var Y=(z-j)/2,ne=T*Math.cos(Y),ce=T*Math.sin(Y),fe=ne,de=-ce,Ee=fe*fe+de*de,Se=Ee+fe*ne+de*ce,Oe=4/3*(Math.sqrt(2*Ee*Se)-Se)/(fe*ce-de*ne),Me=fe-Oe*de,Ye=de+Oe*fe,ye=Me,X=-Ye,ot=Y+j,qe=Math.cos(ot),Ie=Math.sin(ot);return{x1:T*Math.cos(j),y1:T*Math.sin(j),x2:Me*qe-Ye*Ie,y2:Me*Ie+Ye*qe,x3:ye*qe-X*Ie,y3:ye*Ie+X*qe,x4:T*Math.cos(z),y4:T*Math.sin(z)}},K=function(T){return 180*T/Math.PI},re=function(T,j,z,Y,ne,ce){var fe=T+.5*(z-T),de=j+.5*(Y-j),Ee=ne+.5*(z-ne),Se=ce+.5*(Y-ce),Oe=Math.min(T,ne,fe,Ee),Me=Math.max(T,ne,fe,Ee),Ye=Math.min(j,ce,de,Se),ye=Math.max(j,ce,de,Se);return new a(Oe,Ye,Me-Oe,ye-Ye)},ie=function(T,j,z,Y,ne,ce,fe,de){var Ee,Se,Oe,Me,Ye,ye,X,ot,qe,Ie,Ce,Fe,ke,He,it=z-T,ct=Y-j,ft=ne-z,At=ce-Y,kt=fe-ne,Qe=de-ce;for(Se=0;Se<41;Se++)qe=(X=(Oe=T+(Ee=Se/40)*it)+Ee*((Ye=z+Ee*ft)-Oe))+Ee*(Ye+Ee*(ne+Ee*kt-Ye)-X),Ie=(ot=(Me=j+Ee*ct)+Ee*((ye=Y+Ee*At)-Me))+Ee*(ye+Ee*(ce+Ee*Qe-ye)-ot),Se==0?(Ce=qe,Fe=Ie,ke=qe,He=Ie):(Ce=Math.min(Ce,qe),Fe=Math.min(Fe,Ie),ke=Math.max(ke,qe),He=Math.max(He,Ie));return new a(Math.round(Ce),Math.round(Fe),Math.round(ke-Ce),Math.round(He-Fe))},pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,j,z=(T=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:j}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})($e.API),function(t){var e=function(s){var o,a,l,c,h,d,m,p,v,b;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(d=(h=((h=((h=((h=(h-(b=h%85))/85)-(v=h%85))/85)-(p=h%85))/85)-(m=h%85))/85)%85,a.push(d+33,m+33,p+33,v+33,b+33)):a.push(122);return function(x,w){for(var A=w;A>0;A--)x.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,h,d=String,m="length",p=255,v="charCodeAt",b="slice",x="replace";for(s[b](-2),s=s[b](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),l=[],c=0,h=(s+=o="uuuuu"[b](s[m]%5||5))[m];h>c;c+=5)a=52200625*(s[v](c)-33)+614125*(s[v](c+1)-33)+7225*(s[v](c+2)-33)+85*(s[v](c+3)-33)+(s[v](c+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(w,A){for(var S=A;S>0;S--)w.pop()}(l,o[m]),d.fromCharCode.apply(d,l)},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},r=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=om(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}($e.API),function(t){t.loadFile=function(e,n,i){return function(r,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,h){var d=new XMLHttpRequest,m=0,p=function(v){var b=v.length,x=[],w=String.fromCharCode;for(m=0;m<b;m+=1)x.push(w(255&v.charCodeAt(m)));return x.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?h(p(this.responseText)):h(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)}(r,s,o)}catch{}return a}(e,n,i)},t.loadImageFile=t.loadFile}($e.API),function(t){function e(){return(Je.html2canvas?Promise.resolve(Je.html2canvas):tm(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Je.DOMPurify?Promise.resolve(Je.DOMPurify):tm(()=>import("./purify.es-cf254a40.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var i=function(o){var a=Lt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},r=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:r("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,h){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||d.appendChild(l(m,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var m=0;m<c.length;++m){var p=c[m],v=p.src.find(function(b){return b.format==="truetype"});v&&l.addFont(v.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(i(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(i(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||$e.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,h){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,h).then(function(d){return l.updateProgress(1),d})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(c,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,$e.getPageSize=function(o,a,l){if(Lt(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,d=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var p,v=0,b=0;if(m.hasOwnProperty(d))v=m[d][1]/h,b=m[d][0]/h;else try{v=l[1],b=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",b>v&&(p=b,b=v,v=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>b&&(p=b,b=v,v=p)}return{width:b,height:v,unit:a,k:h,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(fm):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}($e.API),$e.API.addJS=function(t){return Dy=t,this.internal.events.subscribe("postPutResources",function(){Rh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Rh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ky=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Dy+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Rh!==void 0&&ky!==void 0&&this.internal.out("/Names <</JavaScript "+Rh+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=n.outline.render().split(/\r\n/),s=0;s<r.length;s++){var o=r[s],a=i.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(s=0;s<c;s++){var d=n.internal.newObject();h.push(d);var m=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<h.length;s++)n.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,r,s){var o={title:r,options:s,children:[]};return i==null&&(i=this.root),i.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var o=i.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,r){for(var s=0;s<r.children.length;s++)i.count++,this.count_r(i,r.children[s]);return i.count}}])}($e.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,r,s,o,a){var l,c=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(d){for(var m,p=256*d.charCodeAt(4)+d.charCodeAt(5),v=d.length,b={width:0,height:0,numcomponents:1},x=4;x<v;x+=2){if(x+=p,e.indexOf(d.charCodeAt(x+1))!==-1){m=256*d.charCodeAt(x+5)+d.charCodeAt(x+6),b={width:256*d.charCodeAt(x+7)+d.charCodeAt(x+8),height:m,numcomponents:d.charCodeAt(x+9)};break}p=256*d.charCodeAt(x+2)+d.charCodeAt(x+3)}return b}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:i,alias:r}}return h}}($e.API);var Ba,kh,Oy,My,Fy,WC=function(){var t,e,n;function i(s){var o,a,l,c,h,d,m,p,v,b,x,w,A,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),v=(function(){var k,F;for(F=[],k=0;k<4;++k)F.push(String.fromCharCode(this.data[this.pos++]));return F}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*h/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),s=(d!=null?d.data:void 0)||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((b=l-this.transparency.indexed.length)>0)for(A=0;0<=b?A<b:A>b;0<=b?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(x=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,x.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,x.slice(m+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(d,m,p,v){var b,x,w,A,S,k,F,G,O,N,$,J,C,E,B,V,H,U,Q,K,re,ie=Math.ceil((c.width-d)/p),pe=Math.ceil((c.height-m)/v),T=c.width==ie&&c.height==pe;for(E=o*ie,J=T?a:new Uint8Array(E*pe),k=s.length,C=0,x=0;C<pe&&l<k;){switch(s[l++]){case 0:for(A=H=0;H<E;A=H+=1)J[x++]=s[l++];break;case 1:for(A=U=0;U<E;A=U+=1)b=s[l++],S=A<o?0:J[x-o],J[x++]=(b+S)%256;break;case 2:for(A=Q=0;Q<E;A=Q+=1)b=s[l++],w=(A-A%o)/o,B=C&&J[(C-1)*E+w*o+A%o],J[x++]=(B+b)%256;break;case 3:for(A=K=0;K<E;A=K+=1)b=s[l++],w=(A-A%o)/o,S=A<o?0:J[x-o],B=C&&J[(C-1)*E+w*o+A%o],J[x++]=(b+Math.floor((S+B)/2))%256;break;case 4:for(A=re=0;re<E;A=re+=1)b=s[l++],w=(A-A%o)/o,S=A<o?0:J[x-o],C===0?B=V=0:(B=J[(C-1)*E+w*o+A%o],V=w&&J[(C-1)*E+(w-1)*o+A%o]),F=S+B-V,G=Math.abs(F-S),N=Math.abs(F-B),$=Math.abs(F-V),O=G<=N&&G<=$?S:N<=$?B:V,J[x++]=(b+O)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!T){var j=((m+C*v)*c.width+d)*o,z=C*E;for(A=0;A<ie;A+=1){for(var Y=0;Y<o;Y+=1)a[j++]=J[z++];j+=(p-1)*o}}C++}}return s=xC(s),c.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},i.prototype.decodePalette=function(){var s,o,a,l,c,h,d,m,p;for(a=this.palette,h=this.transparency.indexed||[],c=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=d=0,m=a.length;d<m;o=d+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(p=h[s++])!=null?p:255;return c},i.prototype.copyToImageData=function(s,o){var a,l,c,h,d,m,p,v,b,x,w;if(l=this.colors,b=null,a=this.hasAlphaChannel,this.palette.length&&(b=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),v=(c=s.data||s).length,d=b||o,h=m=0,l===1)for(;h<v;)p=b?4*o[h/4]:m,x=d[p++],c[h++]=x,c[h++]=x,c[h++]=x,c[h++]=a?d[p++]:255,m=p;else for(;h<v;)p=b?4*o[h/4]:m,c[h++]=d[p++],c[h++]=d[p++],c[h++]=d[p++],c[h++]=a?d[p++]:255,m=p},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var r=function(){if(Object.prototype.toString.call(Je)==="[object Window]"){try{e=Je.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),t=function(s){var o;if(r()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var o,a,l,c,h,d,m,p;if(this.animation){for(p=[],a=h=0,d=(m=this.animation.frames).length;h<d;a=++h)o=m[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,p.push(o.image=t(l));return p}},i.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},i.prototype.animate=function(s){var o,a,l,c,h,d,m=this;return a=0,d=this.animation,c=d.numFrames,l=d.frames,h=d.numPlays,(o=function(){var p,v;if(p=a++%c,v=l[p],m.renderFrame(s,p),c>1&&a/c<h)return m.animation._timeout=setTimeout(o,v.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function GC(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,r=t[e++],s=r>>7,o=1<<(7&r)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,h=[],d=0,m=null,p=0,v=null;for(this.width=n,this.height=i;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];d=t[e++]|t[e++]<<8,m=t[e++],!(1&b)&&(m=null),p=b>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var x=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,k=t[e++],F=k>>6&1,G=1<<(7&k)+1,O=a,N=l,$=!1;k>>7&&($=!0,O=e,N=G,e+=3*G);var J=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}h.push({x,y:w,width:A,height:S,has_local_palette:$,palette_offset:O,palette_size:N,data_offset:J,data_length:e-J,transparent_index:m,interlaced:!!F,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return v},this.frameInfo=function(E){if(E<0||E>=h.length)throw new Error("Frame index out of range.");return h[E]},this.decodeAndBlitFrameBGRA=function(E,B){var V=this.frameInfo(E),H=V.width*V.height,U=new Uint8Array(H);jy(t,V.data_offset,U,H);var Q=V.palette_offset,K=V.transparent_index;K===null&&(K=256);var re=V.width,ie=n-re,pe=re,T=4*(V.y*n+V.x),j=4*((V.y+V.height)*n+V.x),z=T,Y=4*ie;V.interlaced===!0&&(Y+=4*n*7);for(var ne=8,ce=0,fe=U.length;ce<fe;++ce){var de=U[ce];if(pe===0&&(pe=re,(z+=Y)>=j&&(Y=4*ie+4*n*(ne-1),z=T+(re+ie)*(ne<<1),ne>>=1)),de===K)z+=4;else{var Ee=t[Q+3*de],Se=t[Q+3*de+1],Oe=t[Q+3*de+2];B[z++]=Oe,B[z++]=Se,B[z++]=Ee,B[z++]=255}--pe}},this.decodeAndBlitFrameRGBA=function(E,B){var V=this.frameInfo(E),H=V.width*V.height,U=new Uint8Array(H);jy(t,V.data_offset,U,H);var Q=V.palette_offset,K=V.transparent_index;K===null&&(K=256);var re=V.width,ie=n-re,pe=re,T=4*(V.y*n+V.x),j=4*((V.y+V.height)*n+V.x),z=T,Y=4*ie;V.interlaced===!0&&(Y+=4*n*7);for(var ne=8,ce=0,fe=U.length;ce<fe;++ce){var de=U[ce];if(pe===0&&(pe=re,(z+=Y)>=j&&(Y=4*ie+4*n*(ne-1),z=T+(re+ie)*(ne<<1),ne>>=1)),de===K)z+=4;else{var Ee=t[Q+3*de],Se=t[Q+3*de+1],Oe=t[Q+3*de+2];B[z++]=Ee,B[z++]=Se,B[z++]=Oe,B[z++]=255}--pe}}}function jy(t,e,n,i){for(var r=t[e++],s=1<<r,o=s+1,a=o+1,l=r+1,c=(1<<l)-1,h=0,d=0,m=0,p=t[e++],v=new Int32Array(4096),b=null;;){for(;h<16&&p!==0;)d|=t[e++]<<h,h+=8,p===1?p=t[e++]:--p;if(h<l)break;var x=d&c;if(d>>=l,h-=l,x!==s){if(x===o)break;for(var w=x<a?x:b,A=0,S=w;S>s;)S=v[S]>>8,++A;var k=S;if(m+A+(w!==x?1:0)>i)return void jt.log("Warning, gif stream longer than expected.");n[m++]=k;var F=m+=A;for(w!==x&&(n[m++]=k),S=w;A--;)S=v[S],n[--F]=255&S,S>>=8;b!==null&&a<4096&&(v[a++]=b<<8|k,a>=c+1&&l<12&&(++l,c=c<<1|1)),b=x}else a=o+1,c=(1<<(l=r+1))-1,b=null}return m!==i&&jt.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function og(t){var e,n,i,r,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),d=new Array(65535),m=new Array(65535),p=new Array(64),v=new Array(64),b=[],x=0,w=7,A=new Array(64),S=new Array(64),k=new Array(64),F=new Array(256),G=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(T,j){for(var z=0,Y=0,ne=new Array,ce=1;ce<=16;ce++){for(var fe=1;fe<=T[ce];fe++)ne[j[Y]]=[],ne[j[Y]][0]=z,ne[j[Y]][1]=ce,Y++,z++;z*=2}return ne}function Q(T){for(var j=T[0],z=T[1]-1;z>=0;)j&1<<z&&(x|=1<<w),z--,--w<0&&(x==255?(K(255),K(0)):K(x),w=7,x=0)}function K(T){b.push(T)}function re(T){K(T>>8&255),K(255&T)}function ie(T,j,z,Y,ne){for(var ce,fe=ne[0],de=ne[240],Ee=function(Ie,Ce){var Fe,ke,He,it,ct,ft,At,kt,Qe,dt,je=0;for(Qe=0;Qe<8;++Qe){Fe=Ie[je],ke=Ie[je+1],He=Ie[je+2],it=Ie[je+3],ct=Ie[je+4],ft=Ie[je+5],At=Ie[je+6];var Wn=Fe+(kt=Ie[je+7]),xt=Fe-kt,Bi=ke+At,Mt=ke-At,Yt=He+ft,fr=He-ft,Tt=it+ct,uo=it-ct,Zt=Wn+Tt,Ui=Wn-Tt,jr=Bi+Yt,en=Bi-Yt;Ie[je]=Zt+jr,Ie[je+4]=Zt-jr;var rt=.707106781*(en+Ui);Ie[je+2]=Ui+rt,Ie[je+6]=Ui-rt;var It=.382683433*((Zt=uo+fr)-(en=Mt+xt)),ho=.5411961*Zt+It,Mn=1.306562965*en+It,dr=.707106781*(jr=fr+Mt),pr=xt+dr,Ke=xt-dr;Ie[je+5]=Ke+ho,Ie[je+3]=Ke-ho,Ie[je+1]=pr+Mn,Ie[je+7]=pr-Mn,je+=8}for(je=0,Qe=0;Qe<8;++Qe){Fe=Ie[je],ke=Ie[je+8],He=Ie[je+16],it=Ie[je+24],ct=Ie[je+32],ft=Ie[je+40],At=Ie[je+48];var qi=Fe+(kt=Ie[je+56]),gr=Fe-kt,fi=ke+At,_n=ke-At,fn=He+ft,Ai=He-ft,ua=it+ct,Vr=it-ct,Hi=qi+ua,zi=qi-ua,Wi=fi+fn,mr=fi-fn;Ie[je]=Hi+Wi,Ie[je+32]=Hi-Wi;var Ni=.707106781*(mr+zi);Ie[je+16]=zi+Ni,Ie[je+48]=zi-Ni;var yr=.382683433*((Hi=Vr+Ai)-(mr=_n+gr)),fo=.5411961*Hi+yr,ha=1.306562965*mr+yr,fa=.707106781*(Wi=Ai+_n),da=gr+fa,pa=gr-fa;Ie[je+40]=pa+fo,Ie[je+24]=pa-fo,Ie[je+8]=da+ha,Ie[je+56]=da-ha,je++}for(Qe=0;Qe<64;++Qe)dt=Ie[Qe]*Ce[Qe],p[Qe]=dt>0?dt+.5|0:dt-.5|0;return p}(T,j),Se=0;Se<64;++Se)v[O[Se]]=Ee[Se];var Oe=v[0]-z;z=v[0],Oe==0?Q(Y[0]):(Q(Y[m[ce=32767+Oe]]),Q(d[ce]));for(var Me=63;Me>0&&v[Me]==0;)Me--;if(Me==0)return Q(fe),z;for(var Ye,ye=1;ye<=Me;){for(var X=ye;v[ye]==0&&ye<=Me;)++ye;var ot=ye-X;if(ot>=16){Ye=ot>>4;for(var qe=1;qe<=Ye;++qe)Q(de);ot&=15}ce=32767+v[ye],Q(ne[(ot<<4)+m[ce]]),Q(d[ce]),ye++}return Me!=63&&Q(fe),z}function pe(T){T=Math.min(Math.max(T,1),100),s!=T&&(function(j){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var ne=o((z[Y]*j+50)/100);ne=Math.min(Math.max(ne,1),255),a[O[Y]]=ne}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var de=o((ce[fe]*j+50)/100);de=Math.min(Math.max(de,1),255),l[O[fe]]=de}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,Oe=0;Oe<8;Oe++)for(var Me=0;Me<8;Me++)c[Se]=1/(a[O[Se]]*Ee[Oe]*Ee[Me]*8),h[Se]=1/(l[O[Se]]*Ee[Oe]*Ee[Me]*8),Se++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),s=T)}this.encode=function(T,j){j&&pe(j),b=new Array,x=0,w=7,re(65496),re(65504),re(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),re(1),re(1),K(0),K(0),function(){re(65499),re(132),K(0);for(var ke=0;ke<64;ke++)K(a[ke]);K(1);for(var He=0;He<64;He++)K(l[He])}(),function(ke,He){re(65472),re(17),K(8),re(He),re(ke),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(T.width,T.height),function(){re(65476),re(418),K(0);for(var ke=0;ke<16;ke++)K(N[ke+1]);for(var He=0;He<=11;He++)K($[He]);K(16);for(var it=0;it<16;it++)K(J[it+1]);for(var ct=0;ct<=161;ct++)K(C[ct]);K(1);for(var ft=0;ft<16;ft++)K(E[ft+1]);for(var At=0;At<=11;At++)K(B[At]);K(17);for(var kt=0;kt<16;kt++)K(V[kt+1]);for(var Qe=0;Qe<=161;Qe++)K(H[Qe])}(),re(65498),re(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var z=0,Y=0,ne=0;x=0,w=7,this.encode.displayName="_encode_";for(var ce,fe,de,Ee,Se,Oe,Me,Ye,ye,X=T.data,ot=T.width,qe=T.height,Ie=4*ot,Ce=0;Ce<qe;){for(ce=0;ce<Ie;){for(Se=Ie*Ce+ce,Me=-1,Ye=0,ye=0;ye<64;ye++)Oe=Se+(Ye=ye>>3)*Ie+(Me=4*(7&ye)),Ce+Ye>=qe&&(Oe-=Ie*(Ce+1+Ye-qe)),ce+Me>=Ie&&(Oe-=ce+Me-Ie+4),fe=X[Oe++],de=X[Oe++],Ee=X[Oe++],A[ye]=(G[fe]+G[de+256>>0]+G[Ee+512>>0]>>16)-128,S[ye]=(G[fe+768>>0]+G[de+1024>>0]+G[Ee+1280>>0]>>16)-128,k[ye]=(G[fe+1280>>0]+G[de+1536>>0]+G[Ee+1792>>0]>>16)-128;z=ie(A,c,z,e,i),Y=ie(S,h,Y,n,r),ne=ie(k,h,ne,n,r),ce+=32}Ce+=8}if(w>=0){var Fe=[];Fe[1]=w+1,Fe[0]=(1<<w+1)-1,Q(Fe)}return re(65497),new Uint8Array(b)},t=t||50,function(){for(var T=String.fromCharCode,j=0;j<256;j++)F[j]=T(j)}(),e=U(N,$),n=U(E,B),i=U(J,C),r=U(V,H),function(){for(var T=1,j=2,z=1;z<=15;z++){for(var Y=T;Y<j;Y++)m[32767+Y]=z,d[32767+Y]=[],d[32767+Y][1]=z,d[32767+Y][0]=Y;for(var ne=-(j-1);ne<=-T;ne++)m[32767+ne]=z,d[32767+ne]=[],d[32767+ne][1]=z,d[32767+ne][0]=j-1+ne;T<<=1,j<<=1}}(),function(){for(var T=0;T<256;T++)G[T]=19595*T,G[T+256>>0]=38470*T,G[T+512>>0]=7471*T+32768,G[T+768>>0]=-11059*T,G[T+1024>>0]=-21709*T,G[T+1280>>0]=32768*T+8421375,G[T+1536>>0]=-27439*T,G[T+1792>>0]=-5329*T}(),pe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function nr(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Vy(t){function e(N){if(!N)throw Error("assert :P")}function n(N,$,J){for(var C=0;4>C;C++)if(N[$+C]!=J.charCodeAt(C))return!0;return!1}function i(N,$,J,C,E){for(var B=0;B<E;B++)N[$+B]=J[C+B]}function r(N,$,J,C){for(var E=0;E<C;E++)N[$+E]=J}function s(N){return new Int32Array(N)}function o(N,$){for(var J=[],C=0;C<N;C++)J.push(new $);return J}function a(N,$){var J=[];return function C(E,B,V){for(var H=V[B],U=0;U<H&&(E.push(V.length>B+1?[]:new $),!(V.length<B+1));U++)C(E[U],B+1,V)}(J,0,N),J}var l=function(){var N=this;function $(u,f){for(var y=1<<f-1>>>0;u&y;)y>>>=1;return y?(u&y-1)+y:u}function J(u,f,y,_,I){e(!(_%y));do u[f+(_-=y)]=I;while(0<_)}function C(u,f,y,_,I){if(e(2328>=I),512>=I)var L=s(512);else if((L=s(I))==null)return 0;return function(R,D,M,q,ee,ue){var he,ae,we=D,ge=1<<M,te=s(16),oe=s(16);for(e(ee!=0),e(q!=null),e(R!=null),e(0<M),ae=0;ae<ee;++ae){if(15<q[ae])return 0;++te[q[ae]]}if(te[0]==ee)return 0;for(oe[1]=0,he=1;15>he;++he){if(te[he]>1<<he)return 0;oe[he+1]=oe[he]+te[he]}for(ae=0;ae<ee;++ae)he=q[ae],0<q[ae]&&(ue[oe[he]++]=ae);if(oe[15]==1)return(q=new E).g=0,q.value=ue[0],J(R,we,1,ge,q),ge;var ve,Ae=-1,_e=ge-1,Be=0,Ne=1,Ge=1,Re=1<<M;for(ae=0,he=1,ee=2;he<=M;++he,ee<<=1){if(Ne+=Ge<<=1,0>(Ge-=te[he]))return 0;for(;0<te[he];--te[he])(q=new E).g=he,q.value=ue[ae++],J(R,we+Be,ee,Re,q),Be=$(Be,he)}for(he=M+1,ee=2;15>=he;++he,ee<<=1){if(Ne+=Ge<<=1,0>(Ge-=te[he]))return 0;for(;0<te[he];--te[he]){if(q=new E,(Be&_e)!=Ae){for(we+=Re,ve=1<<(Ae=he)-M;15>Ae&&!(0>=(ve-=te[Ae]));)++Ae,ve<<=1;ge+=Re=1<<(ve=Ae-M),R[D+(Ae=Be&_e)].g=ve+M,R[D+Ae].value=we-D-Ae}q.g=he-M,q.value=ue[ae++],J(R,we+(Be>>M),ee,Re,q),Be=$(Be,he)}}return Ne!=2*oe[15]-1?0:ge}(u,f,y,_,I,L)}function E(){this.value=this.g=0}function B(){this.value=this.g=0}function V(){this.G=o(5,E),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(pi,B)}function H(u,f,y,_){e(u!=null),e(f!=null),e(2147483648>_),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=f,u.pa=y,u.Jd=f,u.Yc=y+_,u.Zc=4<=_?y+_-4+1:y,ce(u)}function U(u,f){for(var y=0;0<f--;)y|=de(u,128)<<f;return y}function Q(u,f){var y=U(u,f);return fe(u)?-y:y}function K(u,f,y,_){var I,L=0;for(e(u!=null),e(f!=null),e(4294967288>_),u.Sb=_,u.Ra=0,u.u=0,u.h=0,4<_&&(_=4),I=0;I<_;++I)L+=f[y+I]<<8*I;u.Ra=L,u.bb=_,u.oa=f,u.pa=y}function re(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Ca-8>>>0,++u.bb,u.u-=8;z(u)&&(u.h=1,u.u=0)}function ie(u,f){if(e(0<=f),!u.h&&f<=Pa){var y=j(u)&Ia[f];return u.u+=f,re(u),y}return u.h=1,u.u=0}function pe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(u){return u.Ra>>>(u.u&Ca-1)>>>0}function z(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Ca}function Y(u,f){u.u=f,u.h=z(u)}function ne(u){u.u>=Gl&&(e(u.u>=Gl),re(u))}function ce(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function fe(u){return U(u,1)}function de(u,f){var y=u.Ca;0>u.b&&ce(u);var _=u.b,I=y*f>>>8,L=(u.I>>>_>I)+0;for(L?(y-=I,u.I-=I+1<<_>>>0):y=I+1,_=y,I=0;256<=_;)I+=8,_>>=8;return _=7^I+gi[_],u.b-=_,u.Ca=(y<<_)-1,L}function Ee(u,f,y){u[f+0]=y>>24&255,u[f+1]=y>>16&255,u[f+2]=y>>8&255,u[f+3]=y>>0&255}function Se(u,f){return u[f+0]<<0|u[f+1]<<8}function Oe(u,f){return Se(u,f)|u[f+2]<<16}function Me(u,f){return Se(u,f)|Se(u,f+2)<<16}function Ye(u,f){var y=1<<f;return e(u!=null),e(0<f),u.X=s(y),u.X==null?0:(u.Mb=32-f,u.Xa=f,1)}function ye(u,f){e(u!=null),e(f!=null),e(u.Xa==f.Xa),i(f.X,0,u.X,0,1<<f.Xa)}function X(){this.X=[],this.Xa=this.Mb=0}function ot(u,f,y,_){e(y!=null),e(_!=null);var I=y[0],L=_[0];return I==0&&(I=(u*L+f/2)/f),L==0&&(L=(f*I+u/2)/u),0>=I||0>=L?0:(y[0]=I,_[0]=L,1)}function qe(u,f){return u+(1<<f)-1>>>f}function Ie(u,f){return((4278255360&u)+(4278255360&f)>>>0&4278255360)+((16711935&u)+(16711935&f)>>>0&16711935)>>>0}function Ce(u,f){N[f]=function(y,_,I,L,R,D,M){var q;for(q=0;q<R;++q){var ee=N[u](D[M+q-1],I,L+q);D[M+q]=Ie(y[_+q],ee)}}}function Fe(){this.ud=this.hd=this.jd=0}function ke(u,f){return((4278124286&(u^f))>>>1)+(u&f)>>>0}function He(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function it(u,f){return He(u+(u-f+.5>>1))}function ct(u,f,y){return Math.abs(f-y)-Math.abs(u-y)}function ft(u,f,y,_,I,L,R){for(_=L[R-1],y=0;y<I;++y)L[R+y]=_=Ie(u[f+y],_)}function At(u,f,y,_,I){var L;for(L=0;L<y;++L){var R=u[f+L],D=R>>8&255,M=16711935&(M=(M=16711935&R)+((D<<16)+D));_[I+L]=(4278255360&R)+M>>>0}}function kt(u,f){f.jd=u>>0&255,f.hd=u>>8&255,f.ud=u>>16&255}function Qe(u,f,y,_,I,L){var R;for(R=0;R<_;++R){var D=f[y+R],M=D>>>8,q=D,ee=255&(ee=(ee=D>>>16)+((u.jd<<24>>24)*(M<<24>>24)>>>5));q=255&(q=(q=q+((u.hd<<24>>24)*(M<<24>>24)>>>5))+((u.ud<<24>>24)*(ee<<24>>24)>>>5)),I[L+R]=(4278255360&D)+(ee<<16)+q}}function dt(u,f,y,_,I){N[f]=function(L,R,D,M,q,ee,ue,he,ae){for(M=ue;M<he;++M)for(ue=0;ue<ae;++ue)q[ee++]=I(D[_(L[R++])])},N[u]=function(L,R,D,M,q,ee,ue){var he=8>>L.b,ae=L.Ea,we=L.K[0],ge=L.w;if(8>he)for(L=(1<<L.b)-1,ge=(1<<he)-1;R<D;++R){var te,oe=0;for(te=0;te<ae;++te)te&L||(oe=_(M[q++])),ee[ue++]=I(we[oe&ge]),oe>>=he}else N["VP8LMapColor"+y](M,q,we,ge,ee,ue,R,D,ae)}}function je(u,f,y,_,I){for(y=f+y;f<y;){var L=u[f++];_[I++]=L>>16&255,_[I++]=L>>8&255,_[I++]=L>>0&255}}function Wn(u,f,y,_,I){for(y=f+y;f<y;){var L=u[f++];_[I++]=L>>16&255,_[I++]=L>>8&255,_[I++]=L>>0&255,_[I++]=L>>24&255}}function xt(u,f,y,_,I){for(y=f+y;f<y;){var L=(R=u[f++])>>16&240|R>>12&15,R=R>>0&240|R>>28&15;_[I++]=L,_[I++]=R}}function Bi(u,f,y,_,I){for(y=f+y;f<y;){var L=(R=u[f++])>>16&248|R>>13&7,R=R>>5&224|R>>3&31;_[I++]=L,_[I++]=R}}function Mt(u,f,y,_,I){for(y=f+y;f<y;){var L=u[f++];_[I++]=L>>0&255,_[I++]=L>>8&255,_[I++]=L>>16&255}}function Yt(u,f,y,_,I,L){if(L==0)for(y=f+y;f<y;)Ee(_,((L=u[f++])[0]>>24|L[1]>>8&65280|L[2]<<8&16711680|L[3]<<24)>>>0),I+=32;else i(_,I,u,f,y)}function fr(u,f){N[f][0]=N[u+"0"],N[f][1]=N[u+"1"],N[f][2]=N[u+"2"],N[f][3]=N[u+"3"],N[f][4]=N[u+"4"],N[f][5]=N[u+"5"],N[f][6]=N[u+"6"],N[f][7]=N[u+"7"],N[f][8]=N[u+"8"],N[f][9]=N[u+"9"],N[f][10]=N[u+"10"],N[f][11]=N[u+"11"],N[f][12]=N[u+"12"],N[f][13]=N[u+"13"],N[f][14]=N[u+"0"],N[f][15]=N[u+"0"]}function Tt(u){return u==Sp||u==xp||u==ph||u==Ep}function uo(){this.eb=[],this.size=this.A=this.fb=0}function Zt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ui(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new uo,this.f.kb=new Zt,this.sd=null}function jr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function en(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function rt(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function It(u,f){var y=u.T,_=f.ba.f.RGBA,I=_.eb,L=_.fb+u.ka*_.A,R=Di[f.ba.S],D=u.y,M=u.O,q=u.f,ee=u.N,ue=u.ea,he=u.W,ae=f.cc,we=f.dc,ge=f.Mc,te=f.Nc,oe=u.ka,ve=u.ka+u.T,Ae=u.U,_e=Ae+1>>1;for(oe==0?R(D,M,null,null,q,ee,ue,he,q,ee,ue,he,I,L,null,null,Ae):(R(f.ec,f.fc,D,M,ae,we,ge,te,q,ee,ue,he,I,L-_.A,I,L,Ae),++y);oe+2<ve;oe+=2)ae=q,we=ee,ge=ue,te=he,ee+=u.Rc,he+=u.Rc,L+=2*_.A,R(D,(M+=2*u.fa)-u.fa,D,M,ae,we,ge,te,q,ee,ue,he,I,L-_.A,I,L,Ae);return M+=u.fa,u.j+ve<u.o?(i(f.ec,f.fc,D,M,Ae),i(f.cc,f.dc,q,ee,_e),i(f.Mc,f.Nc,ue,he,_e),y--):1&ve||R(D,M,null,null,q,ee,ue,he,q,ee,ue,he,I,L+_.A,null,null,Ae),y}function ho(u,f,y){var _=u.F,I=[u.J];if(_!=null){var L=u.U,R=f.ba.S,D=R==dh||R==ph;f=f.ba.f.RGBA;var M=[0],q=u.ka;M[0]=u.T,u.Kb&&(q==0?--M[0]:(--q,I[0]-=u.width),u.j+u.ka+u.T==u.o&&(M[0]=u.o-u.j-q));var ee=f.eb;q=f.fb+q*f.A,u=lh(_,I[0],u.width,L,M,ee,q+(D?0:3),f.A),e(y==M),u&&Tt(R)&&Ss(ee,q,D,L,M,f.A)}return 0}function Mn(u){var f=u.ma,y=f.ba.S,_=11>y,I=y==hh||y==fh||y==dh||y==Ap||y==12||Tt(y);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!zl(f.Oa,u,I?11:12))return 0;if(I&&Tt(y)&&xe(),u.da)alert("todo:use_scaling");else{if(_){if(f.Ib=rt,u.Kb){if(y=u.U+1>>1,f.memory=s(u.U+2*y),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+u.U,f.Mc=f.cc,f.Nc=f.dc+y,f.Ib=It,xe()}}else alert("todo:EmitYUV");I&&(f.Jb=ho,_&&le())}if(_&&!r2){for(u=0;256>u;++u)vE[u]=89858*(u-128)+mh>>gh,bE[u]=-22014*(u-128)+mh,wE[u]=-45773*(u-128),_E[u]=113618*(u-128)+mh>>gh;for(u=Ql;u<Pp;++u)f=76283*(u-16)+mh>>gh,AE[u-Ql]=Si(f,255),SE[u-Ql]=Si(f+8>>4,15);r2=1}return 1}function dr(u){var f=u.ma,y=u.U,_=u.T;return e(!(1&u.ka)),0>=y||0>=_?0:(y=f.Ib(u,f),f.Jb!=null&&f.Jb(u,f,y),f.Dc+=y,1)}function pr(u){u.ma.memory=null}function Ke(u,f,y,_){return ie(u,8)!=47?0:(f[0]=ie(u,14)+1,y[0]=ie(u,14)+1,_[0]=ie(u,1),ie(u,3)!=0?0:!u.h)}function qi(u,f){if(4>u)return u+1;var y=u-2>>1;return(2+(1&u)<<y)+ie(f,y)+1}function gr(u,f){return 120<f?f-120:1<=(y=((y=rE[f-1])>>4)*u+(8-(15&y)))?y:1;var y}function fi(u,f,y){var _=j(y),I=u[f+=255&_].g-8;return 0<I&&(Y(y,y.u+8),_=j(y),f+=u[f].value,f+=_&(1<<I)-1),Y(y,y.u+u[f].g),u[f].value}function _n(u,f,y){return y.g+=u.g,y.value+=u.value<<f>>>0,e(8>=y.g),u.g}function fn(u,f,y){var _=u.xc;return e((f=_==0?0:u.vc[u.md*(y>>_)+(f>>_)])<u.Wb),u.Ya[f]}function Ai(u,f,y,_){var I=u.ab,L=u.c*f,R=u.C;f=R+f;var D=y,M=_;for(_=u.Ta,y=u.Ua;0<I--;){var q=u.gc[I],ee=R,ue=f,he=D,ae=M,we=(M=_,D=y,q.Ea);switch(e(ee<ue),e(ue<=q.nc),q.hc){case 2:ah(he,ae,(ue-ee)*we,M,D);break;case 0:var ge=ee,te=ue,oe=M,ve=D,Ae=(Re=q).Ea;ge==0&&(vp(he,ae,null,null,1,oe,ve),ft(he,ae+1,0,0,Ae-1,oe,ve+1),ae+=Ae,ve+=Ae,++ge);for(var _e=1<<Re.b,Be=_e-1,Ne=qe(Ae,Re.b),Ge=Re.K,Re=Re.w+(ge>>Re.b)*Ne;ge<te;){var Et=Ge,Ct=Re,St=1;for($l(he,ae,oe,ve-Ae,1,oe,ve);St<Ae;){var pt=(St&~Be)+_e;pt>Ae&&(pt=Ae),(0,_s[Et[Ct++]>>8&15])(he,ae+ +St,oe,ve+St-Ae,pt-St,oe,ve+St),St=pt}ae+=Ae,ve+=Ae,++ge&Be||(Re+=Ne)}ue!=q.nc&&i(M,D-we,M,D+(ue-ee-1)*we,we);break;case 1:for(we=he,te=ae,Ae=(he=q.Ea)-(ve=he&~(oe=(ae=1<<q.b)-1)),ge=qe(he,q.b),_e=q.K,q=q.w+(ee>>q.b)*ge;ee<ue;){for(Be=_e,Ne=q,Ge=new Fe,Re=te+ve,Et=te+he;te<Re;)kt(Be[Ne++],Ge),Li(Ge,we,te,ae,M,D),te+=ae,D+=ae;te<Et&&(kt(Be[Ne++],Ge),Li(Ge,we,te,Ae,M,D),te+=Ae,D+=Ae),++ee&oe||(q+=ge)}break;case 3:if(he==M&&ae==D&&0<q.b){for(te=M,he=we=D+(ue-ee)*we-(ve=(ue-ee)*qe(q.Ea,q.b)),ae=M,oe=D,ge=[],ve=(Ae=ve)-1;0<=ve;--ve)ge[ve]=ae[oe+ve];for(ve=Ae-1;0<=ve;--ve)te[he+ve]=ge[ve];Yi(q,ee,ue,M,we,M,D)}else Yi(q,ee,ue,he,ae,M,D)}D=_,M=y}M!=y&&i(_,y,D,M,L)}function ua(u,f){var y=u.V,_=u.Ba+u.c*u.C,I=f-u.C;if(e(f<=u.l.o),e(16>=I),0<I){var L=u.l,R=u.Ta,D=u.Ua,M=L.width;if(Ai(u,I,y,_),I=D=[D],e((y=u.C)<(_=f)),e(L.v<L.va),_>L.o&&(_=L.o),y<L.j){var q=L.j-y;y=L.j,I[0]+=q*M}if(y>=_?y=0:(I[0]+=4*L.v,L.ka=y-L.j,L.U=L.va-L.v,L.T=_-y,y=1),y){if(D=D[0],11>(y=u.ca).S){var ee=y.f.RGBA,ue=(_=y.S,I=L.U,L=L.T,q=ee.eb,ee.A),he=L;for(ee=ee.fb+u.Ma*ee.A;0<he--;){var ae=R,we=D,ge=I,te=q,oe=ee;switch(_){case uh:Xi(ae,we,ge,te,oe);break;case hh:ws(ae,we,ge,te,oe);break;case Sp:ws(ae,we,ge,te,oe),Ss(te,oe,0,ge,1,0);break;case K1:Na(ae,we,ge,te,oe);break;case fh:Yt(ae,we,ge,te,oe,1);break;case xp:Yt(ae,we,ge,te,oe,1),Ss(te,oe,0,ge,1,0);break;case dh:Yt(ae,we,ge,te,oe,0);break;case ph:Yt(ae,we,ge,te,oe,0),Ss(te,oe,1,ge,1,0);break;case Ap:_r(ae,we,ge,te,oe);break;case Ep:_r(ae,we,ge,te,oe),ka(te,oe,ge,1,0);break;case Y1:Hr(ae,we,ge,te,oe);break;default:e(0)}D+=M,ee+=ue}u.Ma+=L}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=y.height)}}u.C=f,e(u.C<=u.i)}function Vr(u){var f;if(0<u.ua)return 0;for(f=0;f<u.Wb;++f){var y=u.Ya[f].G,_=u.Ya[f].H;if(0<y[1][_[1]+0].g||0<y[2][_[2]+0].g||0<y[3][_[3]+0].g)return 0}return 1}function Hi(u,f,y,_,I,L){if(u.Z!=0){var R=u.qd,D=u.rd;for(e(Es[u.Z]!=null);f<y;++f)Es[u.Z](R,D,_,I,_,I,L),R=_,D=I,I+=L;u.qd=R,u.rd=D}}function zi(u,f){var y=u.l.ma,_=y.Z==0||y.Z==1?u.l.j:u.C;if(_=u.C<_?_:u.C,e(f<=u.l.o),f>_){var I=u.l.width,L=y.ca,R=y.tb+I*_,D=u.V,M=u.Ba+u.c*_,q=u.gc;e(u.ab==1),e(q[0].hc==3),_p(q[0],_,f,D,M,L,R),Hi(y,_,f,L,R,I)}u.C=u.Ma=f}function Wi(u,f,y,_,I,L,R){var D=u.$/_,M=u.$%_,q=u.m,ee=u.s,ue=y+u.$,he=ue;I=y+_*I;var ae=y+_*L,we=280+ee.ua,ge=u.Pb?D:16777216,te=0<ee.ua?ee.Wa:null,oe=ee.wc,ve=ue<ae?fn(ee,M,D):null;e(u.C<L),e(ae<=I);var Ae=!1;e:for(;;){for(;Ae||ue<ae;){var _e=0;if(D>=ge){var Be=ue-y;e((ge=u).Pb),ge.wd=ge.m,ge.xd=Be,0<ge.s.ua&&ye(ge.s.Wa,ge.s.vb),ge=D+oE}if(M&oe||(ve=fn(ee,M,D)),e(ve!=null),ve.Qb&&(f[ue]=ve.qb,Ae=!0),!Ae)if(ne(q),ve.jc){_e=q,Be=f;var Ne=ue,Ge=ve.pd[j(_e)&pi-1];e(ve.jc),256>Ge.g?(Y(_e,_e.u+Ge.g),Be[Ne]=Ge.value,_e=0):(Y(_e,_e.u+Ge.g-256),e(256<=Ge.value),_e=Ge.value),_e==0&&(Ae=!0)}else _e=fi(ve.G[0],ve.H[0],q);if(q.h)break;if(Ae||256>_e){if(!Ae)if(ve.nd)f[ue]=(ve.qb|_e<<8)>>>0;else{if(ne(q),Ae=fi(ve.G[1],ve.H[1],q),ne(q),Be=fi(ve.G[2],ve.H[2],q),Ne=fi(ve.G[3],ve.H[3],q),q.h)break;f[ue]=(Ne<<24|Ae<<16|_e<<8|Be)>>>0}if(Ae=!1,++ue,++M>=_&&(M=0,++D,R!=null&&D<=L&&!(D%16)&&R(u,D),te!=null))for(;he<ue;)_e=f[he++],te.X[(506832829*_e&4294967295)>>>te.Mb]=_e}else if(280>_e){if(_e=qi(_e-256,q),Be=fi(ve.G[4],ve.H[4],q),ne(q),Be=gr(_,Be=qi(Be,q)),q.h)break;if(ue-y<Be||I-ue<_e)break e;for(Ne=0;Ne<_e;++Ne)f[ue+Ne]=f[ue+Ne-Be];for(ue+=_e,M+=_e;M>=_;)M-=_,++D,R!=null&&D<=L&&!(D%16)&&R(u,D);if(e(ue<=I),M&oe&&(ve=fn(ee,M,D)),te!=null)for(;he<ue;)_e=f[he++],te.X[(506832829*_e&4294967295)>>>te.Mb]=_e}else{if(!(_e<we))break e;for(Ae=_e-280,e(te!=null);he<ue;)_e=f[he++],te.X[(506832829*_e&4294967295)>>>te.Mb]=_e;_e=ue,e(!(Ae>>>(Be=te).Xa)),f[_e]=Be.X[Ae],Ae=!0}Ae||e(q.h==z(q))}if(u.Pb&&q.h&&ue<I)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&ye(u.s.vb,u.s.Wa);else{if(q.h)break e;R!=null&&R(u,D>L?L:D),u.a=0,u.$=ue-y}return 1}return u.a=3,0}function mr(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var f=u.Wa;f!=null&&(f.X=null),u.vb=null,e(u!=null)}function Ni(){var u=new yp;return u==null?null:(u.a=0,u.xb=Q1,fr("Predictor","VP8LPredictors"),fr("Predictor","VP8LPredictors_C"),fr("PredictorAdd","VP8LPredictorsAdd"),fr("PredictorAdd","VP8LPredictorsAdd_C"),ah=At,Li=Qe,Xi=je,ws=Wn,_r=xt,Hr=Bi,Na=Mt,N.VP8LMapColor32b=Kl,N.VP8LMapColor8b=wp,u)}function yr(u,f,y,_,I){var L=1,R=[u],D=[f],M=_.m,q=_.s,ee=null,ue=0;e:for(;;){if(y)for(;L&&ie(M,1);){var he=R,ae=D,we=_,ge=1,te=we.m,oe=we.gc[we.ab],ve=ie(te,2);if(we.Oc&1<<ve)L=0;else{switch(we.Oc|=1<<ve,oe.hc=ve,oe.Ea=he[0],oe.nc=ae[0],oe.K=[null],++we.ab,e(4>=we.ab),ve){case 0:case 1:oe.b=ie(te,3)+2,ge=yr(qe(oe.Ea,oe.b),qe(oe.nc,oe.b),0,we,oe.K),oe.K=oe.K[0];break;case 3:var Ae,_e=ie(te,8)+1,Be=16<_e?0:4<_e?1:2<_e?2:3;if(he[0]=qe(oe.Ea,Be),oe.b=Be,Ae=ge=yr(_e,1,0,we,oe.K)){var Ne,Ge=_e,Re=oe,Et=1<<(8>>Re.b),Ct=s(Et);if(Ct==null)Ae=0;else{var St=Re.K[0],pt=Re.w;for(Ct[0]=Re.K[0][0],Ne=1;Ne<1*Ge;++Ne)Ct[Ne]=Ie(St[pt+Ne],Ct[Ne-1]);for(;Ne<4*Et;++Ne)Ct[Ne]=0;Re.K[0]=null,Re.K[0]=Ct,Ae=1}}ge=Ae;break;case 2:break;default:e(0)}L=ge}}if(R=R[0],D=D[0],L&&ie(M,1)&&!(L=1<=(ue=ie(M,4))&&11>=ue)){_.a=3;break e}var Ft;if(Ft=L)t:{var Dt,lt,pn,mi=_,gn=R,yi=D,Nt=ue,Ei=y,Ti=mi.m,En=mi.s,Fn=[null],ai=1,Oi=0,wr=sE[Nt];n:for(;;){if(Ei&&ie(Ti,1)){var Tn=ie(Ti,3)+2,Kr=qe(gn,Tn),wo=qe(yi,Tn),Da=Kr*wo;if(!yr(Kr,wo,0,mi,Fn))break n;for(Fn=Fn[0],En.xc=Tn,Dt=0;Dt<Da;++Dt){var Ts=Fn[Dt]>>8&65535;Fn[Dt]=Ts,Ts>=ai&&(ai=Ts+1)}}if(Ti.h)break n;for(lt=0;5>lt;++lt){var nn=X1[lt];!lt&&0<Nt&&(nn+=1<<Nt),Oi<nn&&(Oi=nn)}var Cp=o(ai*wr,E),a2=ai,l2=o(a2,V);if(l2==null)var vh=null;else e(65536>=a2),vh=l2;var Zl=s(Oi);if(vh==null||Zl==null||Cp==null){mi.a=1;break n}var _h=Cp;for(Dt=pn=0;Dt<ai;++Dt){var er=vh[Dt],Oa=er.G,Ma=er.H,c2=0,wh=1,u2=0;for(lt=0;5>lt;++lt){nn=X1[lt],Oa[lt]=_h,Ma[lt]=pn,!lt&&0<Nt&&(nn+=1<<Nt);r:{var bh,Np=nn,Ah=mi,ec=Zl,TE=_h,IE=pn,Lp=0,Is=Ah.m,PE=ie(Is,1);if(r(ec,0,0,Np),PE){var CE=ie(Is,1)+1,NE=ie(Is,1),h2=ie(Is,NE==0?1:8);ec[h2]=1,CE==2&&(ec[h2=ie(Is,8)]=1);var Sh=1}else{var f2=s(19),d2=ie(Is,4)+4;if(19<d2){Ah.a=3;var xh=0;break r}for(bh=0;bh<d2;++bh)f2[iE[bh]]=ie(Is,3);var Rp=void 0,tc=void 0,p2=Ah,LE=f2,Eh=Np,g2=ec,kp=0,Ps=p2.m,m2=8,y2=o(128,E);i:for(;C(y2,0,7,LE,19);){if(ie(Ps,1)){var RE=2+2*ie(Ps,3);if((Rp=2+ie(Ps,RE))>Eh)break i}else Rp=Eh;for(tc=0;tc<Eh&&Rp--;){ne(Ps);var v2=y2[0+(127&j(Ps))];Y(Ps,Ps.u+v2.g);var Fa=v2.value;if(16>Fa)g2[tc++]=Fa,Fa!=0&&(m2=Fa);else{var kE=Fa==16,_2=Fa-16,DE=tE[_2],w2=ie(Ps,eE[_2])+DE;if(tc+w2>Eh)break i;for(var OE=kE?m2:0;0<w2--;)g2[tc++]=OE}}kp=1;break i}kp||(p2.a=3),Sh=kp}(Sh=Sh&&!Is.h)&&(Lp=C(TE,IE,8,ec,Np)),Sh&&Lp!=0?xh=Lp:(Ah.a=3,xh=0)}if(xh==0)break n;if(wh&&nE[lt]==1&&(wh=_h[pn].g==0),c2+=_h[pn].g,pn+=xh,3>=lt){var nc,Dp=Zl[0];for(nc=1;nc<nn;++nc)Zl[nc]>Dp&&(Dp=Zl[nc]);u2+=Dp}}if(er.nd=wh,er.Qb=0,wh&&(er.qb=(Oa[3][Ma[3]+0].value<<24|Oa[1][Ma[1]+0].value<<16|Oa[2][Ma[2]+0].value)>>>0,c2==0&&256>Oa[0][Ma[0]+0].value&&(er.Qb=1,er.qb+=Oa[0][Ma[0]+0].value<<8)),er.jc=!er.Qb&&6>u2,er.jc){var Th,Yr=er;for(Th=0;Th<pi;++Th){var Cs=Th,Ns=Yr.pd[Cs],Ih=Yr.G[0][Yr.H[0]+Cs];256<=Ih.value?(Ns.g=Ih.g+256,Ns.value=Ih.value):(Ns.g=0,Ns.value=0,Cs>>=_n(Ih,8,Ns),Cs>>=_n(Yr.G[1][Yr.H[1]+Cs],16,Ns),Cs>>=_n(Yr.G[2][Yr.H[2]+Cs],0,Ns),_n(Yr.G[3][Yr.H[3]+Cs],24,Ns))}}}En.vc=Fn,En.Wb=ai,En.Ya=vh,En.yc=Cp,Ft=1;break t}Ft=0}if(!(L=Ft)){_.a=3;break e}if(0<ue){if(q.ua=1<<ue,!Ye(q.Wa,ue)){_.a=1,L=0;break e}}else q.ua=0;var Op=_,b2=R,ME=D,Mp=Op.s,Fp=Mp.xc;if(Op.c=b2,Op.i=ME,Mp.md=qe(b2,Fp),Mp.wc=Fp==0?-1:(1<<Fp)-1,y){_.xb=dE;break e}if((ee=s(R*D))==null){_.a=1,L=0;break e}L=(L=Wi(_,ee,0,R,D,D,null))&&!M.h;break e}return L?(I!=null?I[0]=ee:(e(ee==null),e(y)),_.$=0,y||mr(q)):mr(q),L}function fo(u,f){var y=u.c*u.i,_=y+f+16*f;return e(u.c<=f),u.V=s(_),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+y+f,1)}function ha(u,f){var y=u.C,_=f-y,I=u.V,L=u.Ba+u.c*y;for(e(f<=u.l.o);0<_;){var R=16<_?16:_,D=u.l.ma,M=u.l.width,q=M*R,ee=D.ca,ue=D.tb+M*y,he=u.Ta,ae=u.Ua;Ai(u,R,I,L),q1(he,ae,ee,ue,q),Hi(D,y,y+R,ee,ue,M),_-=R,I+=R*u.c,y+=R}e(y==f),u.C=u.Ma=f}function fa(){this.ub=this.yd=this.td=this.Rb=0}function da(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pa(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Uu(){this.Yb=function(){var u=[];return function f(y,_,I){for(var L=I[_],R=0;R<L&&(y.push(I.length>_+1?[]:0),!(I.length<_+1));R++)f(y[R],_+1,I)}(u,0,[3,11]),u}()}function Kd(){this.jb=s(3),this.Wc=a([4,8],Uu),this.Xc=a([4,17],Uu)}function Yd(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ga(){this.ld=this.La=this.dd=this.tc=0}function qu(){this.Na=this.la=0}function Xd(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Jd(){this.uc=this.M=this.Nb=0,this.wa=Array(new ga),this.Y=0,this.ya=Array(new Pl),this.aa=0,this.l=new ma}function Hu(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Qd(){this.cb=this.a=0,this.sc="",this.m=new pe,this.Od=new fa,this.Kc=new da,this.ed=new Yd,this.Qa=new pa,this.Ic=this.$c=this.Aa=0,this.D=new Jd,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,pe),this.ia=0,this.pb=o(4,Xd),this.Pa=new Kd,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Hu),this.Hd=0,this.rb=Array(new qu),this.sb=0,this.wa=Array(new ga),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pl),this.L=this.aa=0,this.gd=a([4,2],ga),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ma(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Zd(){var u=new Qd;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Jl||(Jl=Gu)),u}function an(u,f,y){return u.a==0&&(u.a=f,u.sc=y,u.cb=0),0}function zu(u,f,y){return 3<=y&&u[f+0]==157&&u[f+1]==1&&u[f+2]==42}function Wu(u,f){if(u==null)return 0;if(u.a=0,u.sc="OK",f==null)return an(u,2,"null VP8Io passed to VP8GetHeaders()");var y=f.data,_=f.w,I=f.ha;if(4>I)return an(u,7,"Truncated header.");var L=y[_+0]|y[_+1]<<8|y[_+2]<<16,R=u.Od;if(R.Rb=!(1&L),R.td=L>>1&7,R.yd=L>>4&1,R.ub=L>>5,3<R.td)return an(u,3,"Incorrect keyframe parameters.");if(!R.yd)return an(u,4,"Frame not displayable.");_+=3,I-=3;var D=u.Kc;if(R.Rb){if(7>I)return an(u,7,"cannot parse picture header");if(!zu(y,_,I))return an(u,3,"Bad code word");D.c=16383&(y[_+4]<<8|y[_+3]),D.Td=y[_+4]>>6,D.i=16383&(y[_+6]<<8|y[_+5]),D.Ud=y[_+6]>>6,_+=7,I-=7,u.za=D.c+15>>4,u.Ub=D.i+15>>4,f.width=D.c,f.height=D.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,r((L=u.Pa).jb,0,255,L.jb.length),e((L=u.Qa)!=null),L.Cb=0,L.Bb=0,L.Fb=1,r(L.Zb,0,0,L.Zb.length),r(L.Lb,0,0,L.Lb)}if(R.ub>I)return an(u,7,"bad partition length");H(L=u.m,y,_,R.ub),_+=R.ub,I-=R.ub,R.Rb&&(D.Ld=fe(L),D.Kd=fe(L)),D=u.Qa;var M,q=u.Pa;if(e(L!=null),e(D!=null),D.Cb=fe(L),D.Cb){if(D.Bb=fe(L),fe(L)){for(D.Fb=fe(L),M=0;4>M;++M)D.Zb[M]=fe(L)?Q(L,7):0;for(M=0;4>M;++M)D.Lb[M]=fe(L)?Q(L,6):0}if(D.Bb)for(M=0;3>M;++M)q.jb[M]=fe(L)?U(L,8):255}else D.Bb=0;if(L.Ka)return an(u,3,"cannot parse segment header");if((D=u.ed).zd=fe(L),D.Tb=U(L,6),D.wb=U(L,3),D.Pc=fe(L),D.Pc&&fe(L)){for(q=0;4>q;++q)fe(L)&&(D.vd[q]=Q(L,6));for(q=0;4>q;++q)fe(L)&&(D.od[q]=Q(L,6))}if(u.L=D.Tb==0?0:D.zd?1:2,L.Ka)return an(u,3,"cannot parse filter header");var ee=I;if(I=M=_,_=M+ee,D=ee,u.Xb=(1<<U(u.m,2))-1,ee<3*(q=u.Xb))y=7;else{for(M+=3*q,D-=3*q,ee=0;ee<q;++ee){var ue=y[I+0]|y[I+1]<<8|y[I+2]<<16;ue>D&&(ue=D),H(u.Jc[+ee],y,M,ue),M+=ue,D-=ue,I+=3}H(u.Jc[+q],y,M,D),y=M<_?0:5}if(y!=0)return an(u,y,"cannot parse partitions");for(y=U(M=u.m,7),I=fe(M)?Q(M,4):0,_=fe(M)?Q(M,4):0,D=fe(M)?Q(M,4):0,q=fe(M)?Q(M,4):0,M=fe(M)?Q(M,4):0,ee=u.Qa,ue=0;4>ue;++ue){if(ee.Cb){var he=ee.Zb[ue];ee.Fb||(he+=y)}else{if(0<ue){u.pb[ue]=u.pb[0];continue}he=y}var ae=u.pb[ue];ae.Sc[0]=Tp[Si(he+I,127)],ae.Sc[1]=Ip[Si(he+0,127)],ae.Eb[0]=2*Tp[Si(he+_,127)],ae.Eb[1]=101581*Ip[Si(he+D,127)]>>16,8>ae.Eb[1]&&(ae.Eb[1]=8),ae.Qc[0]=Tp[Si(he+q,117)],ae.Qc[1]=Ip[Si(he+M,127)],ae.lc=he+M}if(!R.Rb)return an(u,4,"Not a key frame.");for(fe(L),R=u.Pa,y=0;4>y;++y){for(I=0;8>I;++I)for(_=0;3>_;++_)for(D=0;11>D;++D)q=de(L,hE[y][I][_][D])?U(L,8):cE[y][I][_][D],R.Wc[y][I].Yb[_][D]=q;for(I=0;17>I;++I)R.Xc[y][I]=R.Wc[y][fE[I]]}return u.kc=fe(L),u.kc&&(u.Bd=U(L,8)),u.cb=1}function Gu(u,f,y,_,I,L,R){var D=f[I].Yb[y];for(y=0;16>I;++I){if(!de(u,D[y+0]))return I;for(;!de(u,D[y+1]);)if(D=f[++I].Yb[0],y=0,I==16)return 16;var M=f[I+1].Yb;if(de(u,D[y+2])){var q=u,ee=0;if(de(q,(he=D)[(ue=y)+3]))if(de(q,he[ue+6])){for(D=0,ue=2*(ee=de(q,he[ue+8]))+(he=de(q,he[ue+9+ee])),ee=0,he=aE[ue];he[D];++D)ee+=ee+de(q,he[D]);ee+=3+(8<<ue)}else de(q,he[ue+7])?(ee=7+2*de(q,165),ee+=de(q,145)):ee=5+de(q,159);else ee=de(q,he[ue+4])?3+de(q,he[ue+5]):2;D=M[2]}else ee=1,D=M[1];M=R+lE[I],0>(q=u).b&&ce(q);var ue,he=q.b,ae=(ue=q.Ca>>1)-(q.I>>he)>>31;--q.b,q.Ca+=ae,q.Ca|=1,q.I-=(ue+1&ae)<<he,L[M]=((ee^ae)-ae)*_[(0<I)+0]}return 16}function Cl(u){var f=u.rb[u.sb-1];f.la=0,f.Na=0,r(u.zc,0,0,u.zc.length),u.ja=0}function ep(u,f){if(u==null)return 0;if(f==null)return an(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!Wu(u,f))return 0;if(e(u.cb),f.ac==null||f.ac(f)){f.ob&&(u.L=0);var y=yh[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=f.v-y>>4,u.zb=f.j-y>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=f.o+15+y>>4,u.Hb=f.va+15+y>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var _=u.ed;for(y=0;4>y;++y){var I;if(u.Qa.Cb){var L=u.Qa.Lb[y];u.Qa.Fb||(L+=_.Tb)}else L=_.Tb;for(I=0;1>=I;++I){var R=u.gd[y][I],D=L;if(_.Pc&&(D+=_.vd[0],I&&(D+=_.od[0])),0<(D=0>D?0:63<D?63:D)){var M=D;0<_.wb&&(M=4<_.wb?M>>2:M>>1)>9-_.wb&&(M=9-_.wb),1>M&&(M=1),R.dd=M,R.tc=2*D+M,R.ld=40<=D?2:15<=D?1:0}else R.tc=0;R.La=I}}}y=0}else an(u,6,"Frame setup failed"),y=u.a;if(y=y==0){if(y){u.$c=0,0<u.Aa||(u.Ic=EE);e:{y=u.Ic,_=4*(M=u.za);var q=32*M,ee=M+1,ue=0<u.L?M*(0<u.Aa?2:1):0,he=(u.Aa==2?2:1)*M;if((R=_+832+(I=3*(16*y+yh[u.L])/2*q)+(L=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=R)y=0;else{if(R>u.Vb){if(u.Vb=0,u.Ec=s(R),u.Fc=0,u.Ec==null){y=an(u,1,"no memory during frame initialization.");break e}u.Vb=R}R=u.Ec,D=u.Fc,u.Ac=R,u.Bc=D,D+=_,u.Gd=o(q,Hu),u.Hd=0,u.rb=o(ee+1,qu),u.sb=1,u.wa=ue?o(ue,ga):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=M),e(!0),u.oc=R,u.pc=D,D+=832,u.ya=o(he,Pl),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=M),u.R=16*M,u.B=8*M,M=(q=yh[u.L])*u.R,q=q/2*u.B,u.sa=R,u.ta=D+M,u.qa=u.sa,u.ra=u.ta+16*y*u.R+q,u.Ha=u.qa,u.Ia=u.ra+8*y*u.B+q,u.$c=0,D+=I,u.mb=L?R:null,u.nb=L?D:null,e(D+L<=u.Fc+u.Vb),Cl(u),r(u.Ac,u.Bc,0,_),y=1}}if(y){if(f.ka=0,f.y=u.sa,f.O=u.ta,f.f=u.qa,f.N=u.ra,f.ea=u.Ha,f.Vd=u.Ia,f.fa=u.R,f.Rc=u.B,f.F=null,f.J=0,!$1){for(y=-255;255>=y;++y)H1[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)z1[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)W1[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)G1[255+y]=0>y?0:255<y?255:y;$1=1}Ji=ip,La=tp,bs=Ku,Qi=np,zr=Yu,Yl=$u,vo=Ol,Ra=mo,_o=mp,As=Ml,Xl=gp,Ri=Aa,Wr=Fl,Vt=rh,Bt=ih,ln=Ur,wn=ms,Gr=pp,Zi[0]=vr,Zi[1]=rp,Zi[2]=lp,Zi[3]=cp,Zi[4]=Qu,Zi[5]=wa,Zi[6]=Zu,Zi[7]=Rl,Zi[8]=hp,Zi[9]=up,xs[0]=Xu,xs[1]=op,xs[2]=Br,xs[3]=va,xs[4]=Gn,xs[5]=ap,xs[6]=Ju,$r[0]=gs,$r[1]=sp,$r[2]=fp,$r[3]=kl,$r[4]=go,$r[5]=dp,$r[6]=Dl,y=1}else y=0}y&&(y=function(ae,we){for(ae.M=0;ae.M<ae.Va;++ae.M){var ge,te=ae.Jc[ae.M&ae.Xb],oe=ae.m,ve=ae;for(ge=0;ge<ve.za;++ge){var Ae=oe,_e=ve,Be=_e.Ac,Ne=_e.Bc+4*ge,Ge=_e.zc,Re=_e.ya[_e.aa+ge];if(_e.Qa.Bb?Re.$b=de(Ae,_e.Pa.jb[0])?2+de(Ae,_e.Pa.jb[2]):de(Ae,_e.Pa.jb[1]):Re.$b=0,_e.kc&&(Re.Ad=de(Ae,_e.Bd)),Re.Za=!de(Ae,145)+0,Re.Za){var Et=Re.Ob,Ct=0;for(_e=0;4>_e;++_e){var St,pt=Ge[0+_e];for(St=0;4>St;++St){pt=uE[Be[Ne+St]][pt];for(var Ft=J1[de(Ae,pt[0])];0<Ft;)Ft=J1[2*Ft+de(Ae,pt[Ft])];pt=-Ft,Be[Ne+St]=pt}i(Et,Ct,Be,Ne,4),Ct+=4,Ge[0+_e]=pt}}else pt=de(Ae,156)?de(Ae,128)?1:3:de(Ae,163)?2:0,Re.Ob[0]=pt,r(Be,Ne,pt,4),r(Ge,0,pt,4);Re.Dd=de(Ae,142)?de(Ae,114)?de(Ae,183)?1:3:2:0}if(ve.m.Ka)return an(ae,7,"Premature end-of-partition0 encountered.");for(;ae.ja<ae.za;++ae.ja){if(ve=te,Ae=(oe=ae).rb[oe.sb-1],Be=oe.rb[oe.sb+oe.ja],ge=oe.ya[oe.aa+oe.ja],Ne=oe.kc?ge.Ad:0)Ae.la=Be.la=0,ge.Za||(Ae.Na=Be.Na=0),ge.Hc=0,ge.Gc=0,ge.ia=0;else{var Dt,lt;if(Ae=Be,Be=ve,Ne=oe.Pa.Xc,Ge=oe.ya[oe.aa+oe.ja],Re=oe.pb[Ge.$b],_e=Ge.ad,Et=0,Ct=oe.rb[oe.sb-1],pt=St=0,r(_e,Et,0,384),Ge.Za)var pn=0,mi=Ne[3];else{Ft=s(16);var gn=Ae.Na+Ct.Na;if(gn=Jl(Be,Ne[1],gn,Re.Eb,0,Ft,0),Ae.Na=Ct.Na=(0<gn)+0,1<gn)Ji(Ft,0,_e,Et);else{var yi=Ft[0]+3>>3;for(Ft=0;256>Ft;Ft+=16)_e[Et+Ft]=yi}pn=1,mi=Ne[0]}var Nt=15&Ae.la,Ei=15&Ct.la;for(Ft=0;4>Ft;++Ft){var Ti=1&Ei;for(yi=lt=0;4>yi;++yi)Nt=Nt>>1|(Ti=(gn=Jl(Be,mi,gn=Ti+(1&Nt),Re.Sc,pn,_e,Et))>pn)<<7,lt=lt<<2|(3<gn?3:1<gn?2:_e[Et+0]!=0),Et+=16;Nt>>=4,Ei=Ei>>1|Ti<<7,St=(St<<8|lt)>>>0}for(mi=Nt,pn=Ei>>4,Dt=0;4>Dt;Dt+=2){for(lt=0,Nt=Ae.la>>4+Dt,Ei=Ct.la>>4+Dt,Ft=0;2>Ft;++Ft){for(Ti=1&Ei,yi=0;2>yi;++yi)gn=Ti+(1&Nt),Nt=Nt>>1|(Ti=0<(gn=Jl(Be,Ne[2],gn,Re.Qc,0,_e,Et)))<<3,lt=lt<<2|(3<gn?3:1<gn?2:_e[Et+0]!=0),Et+=16;Nt>>=2,Ei=Ei>>1|Ti<<5}pt|=lt<<4*Dt,mi|=Nt<<4<<Dt,pn|=(240&Ei)<<Dt}Ae.la=mi,Ct.la=pn,Ge.Hc=St,Ge.Gc=pt,Ge.ia=43690&pt?0:Re.ia,Ne=!(St|pt)}if(0<oe.L&&(oe.wa[oe.Y+oe.ja]=oe.gd[ge.$b][ge.Za],oe.wa[oe.Y+oe.ja].La|=!Ne),ve.Ka)return an(ae,7,"Premature end-of-file encountered.")}if(Cl(ae),oe=we,ve=1,ge=(te=ae).D,Ae=0<te.L&&te.M>=te.zb&&te.M<=te.Va,te.Aa==0)e:{if(ge.M=te.M,ge.uc=Ae,Hl(te,ge),ve=1,ge=(lt=te.D).Nb,Ae=(pt=yh[te.L])*te.R,Be=pt/2*te.B,Ft=16*ge*te.R,yi=8*ge*te.B,Ne=te.sa,Ge=te.ta-Ae+Ft,Re=te.qa,_e=te.ra-Be+yi,Et=te.Ha,Ct=te.Ia-Be+yi,Ei=(Nt=lt.M)==0,St=Nt>=te.Va-1,te.Aa==2&&Hl(te,lt),lt.uc)for(Ti=(gn=te).D.M,e(gn.D.uc),lt=gn.yb;lt<gn.Hb;++lt){pn=lt,mi=Ti;var En=(Fn=(nn=gn).D).Nb;Dt=nn.R;var Fn=Fn.wa[Fn.Y+pn],ai=nn.sa,Oi=nn.ta+16*En*Dt+16*pn,wr=Fn.dd,Tn=Fn.tc;if(Tn!=0)if(e(3<=Tn),nn.L==1)0<pn&&ln(ai,Oi,Dt,Tn+4),Fn.La&&Gr(ai,Oi,Dt,Tn),0<mi&&Bt(ai,Oi,Dt,Tn+4),Fn.La&&wn(ai,Oi,Dt,Tn);else{var Kr=nn.B,wo=nn.qa,Da=nn.ra+8*En*Kr+8*pn,Ts=nn.Ha,nn=nn.Ia+8*En*Kr+8*pn;En=Fn.ld,0<pn&&(Ra(ai,Oi,Dt,Tn+4,wr,En),As(wo,Da,Ts,nn,Kr,Tn+4,wr,En)),Fn.La&&(Ri(ai,Oi,Dt,Tn,wr,En),Vt(wo,Da,Ts,nn,Kr,Tn,wr,En)),0<mi&&(vo(ai,Oi,Dt,Tn+4,wr,En),_o(wo,Da,Ts,nn,Kr,Tn+4,wr,En)),Fn.La&&(Xl(ai,Oi,Dt,Tn,wr,En),Wr(wo,Da,Ts,nn,Kr,Tn,wr,En))}}if(te.ia&&alert("todo:DitherRow"),oe.put!=null){if(lt=16*Nt,Nt=16*(Nt+1),Ei?(oe.y=te.sa,oe.O=te.ta+Ft,oe.f=te.qa,oe.N=te.ra+yi,oe.ea=te.Ha,oe.W=te.Ia+yi):(lt-=pt,oe.y=Ne,oe.O=Ge,oe.f=Re,oe.N=_e,oe.ea=Et,oe.W=Ct),St||(Nt-=pt),Nt>oe.o&&(Nt=oe.o),oe.F=null,oe.J=null,te.Fa!=null&&0<te.Fa.length&&lt<Nt&&(oe.J=Ul(te,oe,lt,Nt-lt),oe.F=te.mb,oe.F==null&&oe.F.length==0)){ve=an(te,3,"Could not decode alpha data.");break e}lt<oe.j&&(pt=oe.j-lt,lt=oe.j,e(!(1&pt)),oe.O+=te.R*pt,oe.N+=te.B*(pt>>1),oe.W+=te.B*(pt>>1),oe.F!=null&&(oe.J+=oe.width*pt)),lt<Nt&&(oe.O+=oe.v,oe.N+=oe.v>>1,oe.W+=oe.v>>1,oe.F!=null&&(oe.J+=oe.v),oe.ka=lt-oe.j,oe.U=oe.va-oe.v,oe.T=Nt-lt,ve=oe.put(oe))}ge+1!=te.Ic||St||(i(te.sa,te.ta-Ae,Ne,Ge+16*te.R,Ae),i(te.qa,te.ra-Be,Re,_e+8*te.B,Be),i(te.Ha,te.Ia-Be,Et,Ct+8*te.B,Be))}if(!ve)return an(ae,6,"Output aborted.")}return 1}(u,f)),f.bc!=null&&f.bc(f),y&=1}return y?(u.cb=0,y):0}function Gi(u,f,y,_,I){I=u[f+y+32*_]+(I>>3),u[f+y+32*_]=-256&I?0>I?0:255:I}function ya(u,f,y,_,I,L){Gi(u,f,0,y,_+I),Gi(u,f,1,y,_+L),Gi(u,f,2,y,_-L),Gi(u,f,3,y,_-I)}function di(u){return(20091*u>>16)+u}function Nl(u,f,y,_){var I,L=0,R=s(16);for(I=0;4>I;++I){var D=u[f+0]+u[f+8],M=u[f+0]-u[f+8],q=(35468*u[f+4]>>16)-di(u[f+12]),ee=di(u[f+4])+(35468*u[f+12]>>16);R[L+0]=D+ee,R[L+1]=M+q,R[L+2]=M-q,R[L+3]=D-ee,L+=4,f++}for(I=L=0;4>I;++I)D=(u=R[L+0]+4)+R[L+8],M=u-R[L+8],q=(35468*R[L+4]>>16)-di(R[L+12]),Gi(y,_,0,0,D+(ee=di(R[L+4])+(35468*R[L+12]>>16))),Gi(y,_,1,0,M+q),Gi(y,_,2,0,M-q),Gi(y,_,3,0,D-ee),L++,_+=32}function $u(u,f,y,_){var I=u[f+0]+4,L=35468*u[f+4]>>16,R=di(u[f+4]),D=35468*u[f+1]>>16;ya(y,_,0,I+R,u=di(u[f+1]),D),ya(y,_,1,I+L,u,D),ya(y,_,2,I-L,u,D),ya(y,_,3,I-R,u,D)}function tp(u,f,y,_,I){Nl(u,f,y,_),I&&Nl(u,f+16,y,_+4)}function Ku(u,f,y,_){La(u,f+0,y,_,1),La(u,f+32,y,_+128,1)}function np(u,f,y,_){var I;for(u=u[f+0]+4,I=0;4>I;++I)for(f=0;4>f;++f)Gi(y,_,f,I,u)}function Yu(u,f,y,_){u[f+0]&&Qi(u,f+0,y,_),u[f+16]&&Qi(u,f+16,y,_+4),u[f+32]&&Qi(u,f+32,y,_+128),u[f+48]&&Qi(u,f+48,y,_+128+4)}function ip(u,f,y,_){var I,L=s(16);for(I=0;4>I;++I){var R=u[f+0+I]+u[f+12+I],D=u[f+4+I]+u[f+8+I],M=u[f+4+I]-u[f+8+I],q=u[f+0+I]-u[f+12+I];L[0+I]=R+D,L[8+I]=R-D,L[4+I]=q+M,L[12+I]=q-M}for(I=0;4>I;++I)R=(u=L[0+4*I]+3)+L[3+4*I],D=L[1+4*I]+L[2+4*I],M=L[1+4*I]-L[2+4*I],q=u-L[3+4*I],y[_+0]=R+D>>3,y[_+16]=q+M>>3,y[_+32]=R-D>>3,y[_+48]=q-M>>3,_+=64}function Ll(u,f,y){var _,I=f-32,L=xi,R=255-u[I-1];for(_=0;_<y;++_){var D,M=L,q=R+u[f-1];for(D=0;D<y;++D)u[f+D]=M[q+u[I+D]];f+=32}}function rp(u,f){Ll(u,f,4)}function sp(u,f){Ll(u,f,8)}function op(u,f){Ll(u,f,16)}function Br(u,f){var y;for(y=0;16>y;++y)i(u,f+32*y,u,f-32,16)}function va(u,f){var y;for(y=16;0<y;--y)r(u,f,u[f-1],16),f+=32}function _a(u,f,y){var _;for(_=0;16>_;++_)r(f,y+32*_,u,16)}function Xu(u,f){var y,_=16;for(y=0;16>y;++y)_+=u[f-1+32*y]+u[f+y-32];_a(_>>5,u,f)}function Gn(u,f){var y,_=8;for(y=0;16>y;++y)_+=u[f-1+32*y];_a(_>>4,u,f)}function ap(u,f){var y,_=8;for(y=0;16>y;++y)_+=u[f+y-32];_a(_>>4,u,f)}function Ju(u,f){_a(128,u,f)}function et(u,f,y){return u+2*f+y+2>>2}function lp(u,f){var y,_=f-32;for(_=new Uint8Array([et(u[_-1],u[_+0],u[_+1]),et(u[_+0],u[_+1],u[_+2]),et(u[_+1],u[_+2],u[_+3]),et(u[_+2],u[_+3],u[_+4])]),y=0;4>y;++y)i(u,f+32*y,_,0,_.length)}function cp(u,f){var y=u[f-1],_=u[f-1+32],I=u[f-1+64],L=u[f-1+96];Ee(u,f+0,16843009*et(u[f-1-32],y,_)),Ee(u,f+32,16843009*et(y,_,I)),Ee(u,f+64,16843009*et(_,I,L)),Ee(u,f+96,16843009*et(I,L,L))}function vr(u,f){var y,_=4;for(y=0;4>y;++y)_+=u[f+y-32]+u[f-1+32*y];for(_>>=3,y=0;4>y;++y)r(u,f+32*y,_,4)}function Qu(u,f){var y=u[f-1+0],_=u[f-1+32],I=u[f-1+64],L=u[f-1-32],R=u[f+0-32],D=u[f+1-32],M=u[f+2-32],q=u[f+3-32];u[f+0+96]=et(_,I,u[f-1+96]),u[f+1+96]=u[f+0+64]=et(y,_,I),u[f+2+96]=u[f+1+64]=u[f+0+32]=et(L,y,_),u[f+3+96]=u[f+2+64]=u[f+1+32]=u[f+0+0]=et(R,L,y),u[f+3+64]=u[f+2+32]=u[f+1+0]=et(D,R,L),u[f+3+32]=u[f+2+0]=et(M,D,R),u[f+3+0]=et(q,M,D)}function Zu(u,f){var y=u[f+1-32],_=u[f+2-32],I=u[f+3-32],L=u[f+4-32],R=u[f+5-32],D=u[f+6-32],M=u[f+7-32];u[f+0+0]=et(u[f+0-32],y,_),u[f+1+0]=u[f+0+32]=et(y,_,I),u[f+2+0]=u[f+1+32]=u[f+0+64]=et(_,I,L),u[f+3+0]=u[f+2+32]=u[f+1+64]=u[f+0+96]=et(I,L,R),u[f+3+32]=u[f+2+64]=u[f+1+96]=et(L,R,D),u[f+3+64]=u[f+2+96]=et(R,D,M),u[f+3+96]=et(D,M,M)}function wa(u,f){var y=u[f-1+0],_=u[f-1+32],I=u[f-1+64],L=u[f-1-32],R=u[f+0-32],D=u[f+1-32],M=u[f+2-32],q=u[f+3-32];u[f+0+0]=u[f+1+64]=L+R+1>>1,u[f+1+0]=u[f+2+64]=R+D+1>>1,u[f+2+0]=u[f+3+64]=D+M+1>>1,u[f+3+0]=M+q+1>>1,u[f+0+96]=et(I,_,y),u[f+0+64]=et(_,y,L),u[f+0+32]=u[f+1+96]=et(y,L,R),u[f+1+32]=u[f+2+96]=et(L,R,D),u[f+2+32]=u[f+3+96]=et(R,D,M),u[f+3+32]=et(D,M,q)}function Rl(u,f){var y=u[f+0-32],_=u[f+1-32],I=u[f+2-32],L=u[f+3-32],R=u[f+4-32],D=u[f+5-32],M=u[f+6-32],q=u[f+7-32];u[f+0+0]=y+_+1>>1,u[f+1+0]=u[f+0+64]=_+I+1>>1,u[f+2+0]=u[f+1+64]=I+L+1>>1,u[f+3+0]=u[f+2+64]=L+R+1>>1,u[f+0+32]=et(y,_,I),u[f+1+32]=u[f+0+96]=et(_,I,L),u[f+2+32]=u[f+1+96]=et(I,L,R),u[f+3+32]=u[f+2+96]=et(L,R,D),u[f+3+64]=et(R,D,M),u[f+3+96]=et(D,M,q)}function up(u,f){var y=u[f-1+0],_=u[f-1+32],I=u[f-1+64],L=u[f-1+96];u[f+0+0]=y+_+1>>1,u[f+2+0]=u[f+0+32]=_+I+1>>1,u[f+2+32]=u[f+0+64]=I+L+1>>1,u[f+1+0]=et(y,_,I),u[f+3+0]=u[f+1+32]=et(_,I,L),u[f+3+32]=u[f+1+64]=et(I,L,L),u[f+3+64]=u[f+2+64]=u[f+0+96]=u[f+1+96]=u[f+2+96]=u[f+3+96]=L}function hp(u,f){var y=u[f-1+0],_=u[f-1+32],I=u[f-1+64],L=u[f-1+96],R=u[f-1-32],D=u[f+0-32],M=u[f+1-32],q=u[f+2-32];u[f+0+0]=u[f+2+32]=y+R+1>>1,u[f+0+32]=u[f+2+64]=_+y+1>>1,u[f+0+64]=u[f+2+96]=I+_+1>>1,u[f+0+96]=L+I+1>>1,u[f+3+0]=et(D,M,q),u[f+2+0]=et(R,D,M),u[f+1+0]=u[f+3+32]=et(y,R,D),u[f+1+32]=u[f+3+64]=et(_,y,R),u[f+1+64]=u[f+3+96]=et(I,_,y),u[f+1+96]=et(L,I,_)}function fp(u,f){var y;for(y=0;8>y;++y)i(u,f+32*y,u,f-32,8)}function kl(u,f){var y;for(y=0;8>y;++y)r(u,f,u[f-1],8),f+=32}function po(u,f,y){var _;for(_=0;8>_;++_)r(f,y+32*_,u,8)}function gs(u,f){var y,_=8;for(y=0;8>y;++y)_+=u[f+y-32]+u[f-1+32*y];po(_>>4,u,f)}function dp(u,f){var y,_=4;for(y=0;8>y;++y)_+=u[f+y-32];po(_>>3,u,f)}function go(u,f){var y,_=4;for(y=0;8>y;++y)_+=u[f-1+32*y];po(_>>3,u,f)}function Dl(u,f){po(128,u,f)}function ba(u,f,y){var _=u[f-y],I=u[f+0],L=3*(I-_)+bp[1020+u[f-2*y]-u[f+y]],R=ch[112+(L+4>>3)];u[f-y]=xi[255+_+ch[112+(L+3>>3)]],u[f+0]=xi[255+I-R]}function eh(u,f,y,_){var I=u[f+0],L=u[f+y];return ki[255+u[f-2*y]-u[f-y]]>_||ki[255+L-I]>_}function th(u,f,y,_){return 4*ki[255+u[f-y]-u[f+0]]+ki[255+u[f-2*y]-u[f+y]]<=_}function nh(u,f,y,_,I){var L=u[f-3*y],R=u[f-2*y],D=u[f-y],M=u[f+0],q=u[f+y],ee=u[f+2*y],ue=u[f+3*y];return 4*ki[255+D-M]+ki[255+R-q]>_?0:ki[255+u[f-4*y]-L]<=I&&ki[255+L-R]<=I&&ki[255+R-D]<=I&&ki[255+ue-ee]<=I&&ki[255+ee-q]<=I&&ki[255+q-M]<=I}function ih(u,f,y,_){var I=2*_+1;for(_=0;16>_;++_)th(u,f+_,y,I)&&ba(u,f+_,y)}function Ur(u,f,y,_){var I=2*_+1;for(_=0;16>_;++_)th(u,f+_*y,1,I)&&ba(u,f+_*y,1)}function ms(u,f,y,_){var I;for(I=3;0<I;--I)ih(u,f+=4*y,y,_)}function pp(u,f,y,_){var I;for(I=3;0<I;--I)Ur(u,f+=4,y,_)}function ys(u,f,y,_,I,L,R,D){for(L=2*L+1;0<I--;){if(nh(u,f,y,L,R))if(eh(u,f,y,D))ba(u,f,y);else{var M=u,q=f,ee=y,ue=M[q-2*ee],he=M[q-ee],ae=M[q+0],we=M[q+ee],ge=M[q+2*ee],te=27*(ve=bp[1020+3*(ae-he)+bp[1020+ue-we]])+63>>7,oe=18*ve+63>>7,ve=9*ve+63>>7;M[q-3*ee]=xi[255+M[q-3*ee]+ve],M[q-2*ee]=xi[255+ue+oe],M[q-ee]=xi[255+he+te],M[q+0]=xi[255+ae-te],M[q+ee]=xi[255+we-oe],M[q+2*ee]=xi[255+ge-ve]}f+=_}}function $i(u,f,y,_,I,L,R,D){for(L=2*L+1;0<I--;){if(nh(u,f,y,L,R))if(eh(u,f,y,D))ba(u,f,y);else{var M=u,q=f,ee=y,ue=M[q-ee],he=M[q+0],ae=M[q+ee],we=ch[112+((ge=3*(he-ue))+4>>3)],ge=ch[112+(ge+3>>3)],te=we+1>>1;M[q-2*ee]=xi[255+M[q-2*ee]+te],M[q-ee]=xi[255+ue+ge],M[q+0]=xi[255+he-we],M[q+ee]=xi[255+ae-te]}f+=_}}function Ol(u,f,y,_,I,L){ys(u,f,y,1,16,_,I,L)}function mo(u,f,y,_,I,L){ys(u,f,1,y,16,_,I,L)}function gp(u,f,y,_,I,L){var R;for(R=3;0<R;--R)$i(u,f+=4*y,y,1,16,_,I,L)}function Aa(u,f,y,_,I,L){var R;for(R=3;0<R;--R)$i(u,f+=4,1,y,16,_,I,L)}function mp(u,f,y,_,I,L,R,D){ys(u,f,I,1,8,L,R,D),ys(y,_,I,1,8,L,R,D)}function Ml(u,f,y,_,I,L,R,D){ys(u,f,1,I,8,L,R,D),ys(y,_,1,I,8,L,R,D)}function Fl(u,f,y,_,I,L,R,D){$i(u,f+4*I,I,1,8,L,R,D),$i(y,_+4*I,I,1,8,L,R,D)}function rh(u,f,y,_,I,L,R,D){$i(u,f+4,1,I,8,L,R,D),$i(y,_+4,1,I,8,L,R,D)}function Sa(){this.ba=new Ui,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new en,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sh(){this.ua=0,this.Wa=new X,this.vb=new X,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new E}function yp(){this.xb=this.a=0,this.l=new ma,this.ca=new Ui,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sh,this.ab=0,this.gc=o(4,Vl),this.Oc=0}function xa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ma,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yo(u,f,y,_,I,L,R){for(u=u==null?0:u[f+0],f=0;f<R;++f)I[L+f]=u+y[_+f]&255,u=I[L+f]}function Bl(u,f,y,_,I,L,R){var D;if(u==null)yo(null,null,y,_,I,L,R);else for(D=0;D<R;++D)I[L+D]=u[f+D]+y[_+D]&255}function vs(u,f,y,_,I,L,R){if(u==null)yo(null,null,y,_,I,L,R);else{var D,M=u[f+0],q=M,ee=M;for(D=0;D<R;++D)q=ee+(M=u[f+D])-q,ee=y[_+D]+(-256&q?0>q?0:255:q)&255,q=M,I[L+D]=ee}}function Ul(u,f,y,_){var I=f.width,L=f.o;if(e(u!=null&&f!=null),0>y||0>=_||y+_>L)return null;if(!u.Cc){if(u.ga==null){var R;if(u.ga=new xa,(R=u.ga==null)||(R=f.width*f.o,e(u.Gb.length==0),u.Gb=s(R),u.Uc=0,u.Gb==null?R=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,R=1),R=!R),!R){R=u.ga;var D=u.Fa,M=u.P,q=u.qc,ee=u.mb,ue=u.nb,he=M+1,ae=q-1,we=R.l;if(e(D!=null&&ee!=null&&f!=null),Es[0]=null,Es[1]=yo,Es[2]=Bl,Es[3]=vs,R.ca=ee,R.tb=ue,R.c=f.width,R.i=f.height,e(0<R.c&&0<R.i),1>=q)f=0;else if(R.$a=D[M+0]>>0&3,R.Z=D[M+0]>>2&3,R.Lc=D[M+0]>>4&3,M=D[M+0]>>6&3,0>R.$a||1<R.$a||4<=R.Z||1<R.Lc||M)f=0;else if(we.put=dr,we.ac=Mn,we.bc=pr,we.ma=R,we.width=f.width,we.height=f.height,we.Da=f.Da,we.v=f.v,we.va=f.va,we.j=f.j,we.o=f.o,R.$a)e:{e(R.$a==1),f=Ni();t:for(;;){if(f==null){f=0;break e}if(e(R!=null),R.mc=f,f.c=R.c,f.i=R.i,f.l=R.l,f.l.ma=R,f.l.width=R.c,f.l.height=R.i,f.a=0,K(f.m,D,he,ae),!yr(R.c,R.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&Vr(f.s)?(R.ic=1,D=f.c*f.i,f.Ta=null,f.Ua=0,f.V=s(D),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(R.ic=0,f=fo(f,R.c)),!f))break t;f=1;break e}R.mc=null,f=0}else f=ae>=R.c*R.i;R=!f}if(R)return null;u.ga.Lc!=1?u.Ga=0:_=L-y}e(u.ga!=null),e(y+_<=L);e:{if(f=(D=u.ga).c,L=D.l.o,D.$a==0){if(he=u.rc,ae=u.Vc,we=u.Fa,M=u.P+1+y*f,q=u.mb,ee=u.nb+y*f,e(M<=u.P+u.qc),D.Z!=0)for(e(Es[D.Z]!=null),R=0;R<_;++R)Es[D.Z](he,ae,we,M,q,ee,f),he=q,ae=ee,ee+=f,M+=f;else for(R=0;R<_;++R)i(q,ee,we,M,f),he=q,ae=ee,ee+=f,M+=f;u.rc=he,u.Vc=ae}else{if(e(D.mc!=null),f=y+_,e((R=D.mc)!=null),e(f<=R.i),R.C>=f)f=1;else if(D.ic||le(),D.ic){D=R.V,he=R.Ba,ae=R.c;var ge=R.i,te=(we=1,M=R.$/ae,q=R.$%ae,ee=R.m,ue=R.s,R.$),oe=ae*ge,ve=ae*f,Ae=ue.wc,_e=te<ve?fn(ue,q,M):null;e(te<=oe),e(f<=ge),e(Vr(ue));t:for(;;){for(;!ee.h&&te<ve;){if(q&Ae||(_e=fn(ue,q,M)),e(_e!=null),ne(ee),256>(ge=fi(_e.G[0],_e.H[0],ee)))D[he+te]=ge,++te,++q>=ae&&(q=0,++M<=f&&!(M%16)&&zi(R,M));else{if(!(280>ge)){we=0;break t}ge=qi(ge-256,ee);var Be,Ne=fi(_e.G[4],_e.H[4],ee);if(ne(ee),!(te>=(Ne=gr(ae,Ne=qi(Ne,ee)))&&oe-te>=ge)){we=0;break t}for(Be=0;Be<ge;++Be)D[he+te+Be]=D[he+te+Be-Ne];for(te+=ge,q+=ge;q>=ae;)q-=ae,++M<=f&&!(M%16)&&zi(R,M);te<ve&&q&Ae&&(_e=fn(ue,q,M))}e(ee.h==z(ee))}zi(R,M>f?f:M);break t}!we||ee.h&&te<oe?(we=0,R.a=ee.h?5:3):R.$=te,f=we}else f=Wi(R,R.V,R.Ba,R.c,R.i,f,ha);if(!f){_=0;break e}}y+_>=L&&(u.Cc=1),_=1}if(!_)return null;if(u.Cc&&((_=u.ga)!=null&&(_.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+y*I}function g(u,f,y,_,I,L){for(;0<I--;){var R,D=u,M=f+(y?1:0),q=u,ee=f+(y?0:3);for(R=0;R<_;++R){var ue=q[ee+4*R];ue!=255&&(ue*=32897,D[M+4*R+0]=D[M+4*R+0]*ue>>23,D[M+4*R+1]=D[M+4*R+1]*ue>>23,D[M+4*R+2]=D[M+4*R+2]*ue>>23)}f+=L}}function P(u,f,y,_,I){for(;0<_--;){var L;for(L=0;L<y;++L){var R=u[f+2*L+0],D=15&(q=u[f+2*L+1]),M=4369*D,q=(240&q|q>>4)*M>>16;u[f+2*L+0]=(240&R|R>>4)*M>>16&240|(15&R|R<<4)*M>>16>>4&15,u[f+2*L+1]=240&q|D}f+=I}}function W(u,f,y,_,I,L,R,D){var M,q,ee=255;for(q=0;q<I;++q){for(M=0;M<_;++M){var ue=u[f+M];L[R+4*M]=ue,ee&=ue}f+=y,R+=D}return ee!=255}function Z(u,f,y,_,I){var L;for(L=0;L<I;++L)y[_+L]=u[f+L]>>8}function le(){Ss=g,ka=P,lh=W,q1=Z}function me(u,f,y){N[u]=function(_,I,L,R,D,M,q,ee,ue,he,ae,we,ge,te,oe,ve,Ae){var _e,Be=Ae-1>>1,Ne=D[M+0]|q[ee+0]<<16,Ge=ue[he+0]|ae[we+0]<<16;e(_!=null);var Re=3*Ne+Ge+131074>>2;for(f(_[I+0],255&Re,Re>>16,ge,te),L!=null&&(Re=3*Ge+Ne+131074>>2,f(L[R+0],255&Re,Re>>16,oe,ve)),_e=1;_e<=Be;++_e){var Et=D[M+_e]|q[ee+_e]<<16,Ct=ue[he+_e]|ae[we+_e]<<16,St=Ne+Et+Ge+Ct+524296,pt=St+2*(Et+Ge)>>3;Re=pt+Ne>>1,Ne=(St=St+2*(Ne+Ct)>>3)+Et>>1,f(_[I+2*_e-1],255&Re,Re>>16,ge,te+(2*_e-1)*y),f(_[I+2*_e-0],255&Ne,Ne>>16,ge,te+(2*_e-0)*y),L!=null&&(Re=St+Ge>>1,Ne=pt+Ct>>1,f(L[R+2*_e-1],255&Re,Re>>16,oe,ve+(2*_e-1)*y),f(L[R+2*_e+0],255&Ne,Ne>>16,oe,ve+(2*_e+0)*y)),Ne=Et,Ge=Ct}1&Ae||(Re=3*Ne+Ge+131074>>2,f(_[I+Ae-1],255&Re,Re>>16,ge,te+(Ae-1)*y),L!=null&&(Re=3*Ge+Ne+131074>>2,f(L[R+Ae-1],255&Re,Re>>16,oe,ve+(Ae-1)*y)))}}function xe(){Di[uh]=pE,Di[hh]=Z1,Di[K1]=gE,Di[fh]=e2,Di[dh]=t2,Di[Ap]=n2,Di[Y1]=mE,Di[Sp]=Z1,Di[xp]=e2,Di[ph]=t2,Di[Ep]=n2}function Ve(u){return u&~yE?0>u?0:255:u>>i2}function We(u,f){return Ve((19077*u>>8)+(26149*f>>8)-14234)}function at(u,f,y){return Ve((19077*u>>8)-(6419*f>>8)-(13320*y>>8)+8708)}function ut(u,f){return Ve((19077*u>>8)+(33050*f>>8)-17685)}function _t(u,f,y,_,I){_[I+0]=We(u,y),_[I+1]=at(u,f,y),_[I+2]=ut(u,f)}function Xt(u,f,y,_,I){_[I+0]=ut(u,f),_[I+1]=at(u,f,y),_[I+2]=We(u,y)}function tn(u,f,y,_,I){var L=at(u,f,y);f=L<<3&224|ut(u,f)>>3,_[I+0]=248&We(u,y)|L>>5,_[I+1]=f}function dn(u,f,y,_,I){var L=240&ut(u,f)|15;_[I+0]=240&We(u,y)|at(u,f,y)>>4,_[I+1]=L}function $n(u,f,y,_,I){_[I+0]=255,_t(u,f,y,_,I+1)}function xn(u,f,y,_,I){Xt(u,f,y,_,I),_[I+3]=255}function Ki(u,f,y,_,I){_t(u,f,y,_,I),_[I+3]=255}function Si(u,f){return 0>u?0:u>f?f:u}function qr(u,f,y){N[u]=function(_,I,L,R,D,M,q,ee,ue){for(var he=ee+(-2&ue)*y;ee!=he;)f(_[I+0],L[R+0],D[M+0],q,ee),f(_[I+1],L[R+0],D[M+0],q,ee+y),I+=2,++R,++M,ee+=2*y;1&ue&&f(_[I+0],L[R+0],D[M+0],q,ee)}}function oh(u,f,y){return y==0?u==0?f==0?6:5:f==0?4:0:y}function ql(u,f,y,_,I){switch(u>>>30){case 3:La(f,y,_,I,0);break;case 2:Yl(f,y,_,I);break;case 1:Qi(f,y,_,I)}}function Hl(u,f){var y,_,I=f.M,L=f.Nb,R=u.oc,D=u.pc+40,M=u.oc,q=u.pc+584,ee=u.oc,ue=u.pc+600;for(y=0;16>y;++y)R[D+32*y-1]=129;for(y=0;8>y;++y)M[q+32*y-1]=129,ee[ue+32*y-1]=129;for(0<I?R[D-1-32]=M[q-1-32]=ee[ue-1-32]=129:(r(R,D-32-1,127,21),r(M,q-32-1,127,9),r(ee,ue-32-1,127,9)),_=0;_<u.za;++_){var he=f.ya[f.aa+_];if(0<_){for(y=-1;16>y;++y)i(R,D+32*y-4,R,D+32*y+12,4);for(y=-1;8>y;++y)i(M,q+32*y-4,M,q+32*y+4,4),i(ee,ue+32*y-4,ee,ue+32*y+4,4)}var ae=u.Gd,we=u.Hd+_,ge=he.ad,te=he.Hc;if(0<I&&(i(R,D-32,ae[we].y,0,16),i(M,q-32,ae[we].f,0,8),i(ee,ue-32,ae[we].ea,0,8)),he.Za){var oe=R,ve=D-32+16;for(0<I&&(_>=u.za-1?r(oe,ve,ae[we].y[15],4):i(oe,ve,ae[we+1].y,0,4)),y=0;4>y;y++)oe[ve+128+y]=oe[ve+256+y]=oe[ve+384+y]=oe[ve+0+y];for(y=0;16>y;++y,te<<=2)oe=R,ve=D+s2[y],Zi[he.Ob[y]](oe,ve),ql(te,ge,16*+y,oe,ve)}else if(oe=oh(_,I,he.Ob[0]),xs[oe](R,D),te!=0)for(y=0;16>y;++y,te<<=2)ql(te,ge,16*+y,R,D+s2[y]);for(y=he.Gc,oe=oh(_,I,he.Dd),$r[oe](M,q),$r[oe](ee,ue),te=ge,oe=M,ve=q,255&(he=y>>0)&&(170&he?bs(te,256,oe,ve):zr(te,256,oe,ve)),he=ee,te=ue,255&(y>>=8)&&(170&y?bs(ge,320,he,te):zr(ge,320,he,te)),I<u.Ub-1&&(i(ae[we].y,0,R,D+480,16),i(ae[we].f,0,M,q+224,8),i(ae[we].ea,0,ee,ue+224,8)),y=8*L*u.B,ae=u.sa,we=u.ta+16*_+16*L*u.R,ge=u.qa,he=u.ra+8*_+y,te=u.Ha,oe=u.Ia+8*_+y,y=0;16>y;++y)i(ae,we+y*u.R,R,D+32*y,16);for(y=0;8>y;++y)i(ge,he+y*u.B,M,q+32*y,8),i(te,oe+y*u.B,ee,ue+32*y,8)}}function Ea(u,f,y,_,I,L,R,D,M){var q=[0],ee=[0],ue=0,he=M!=null?M.kd:0,ae=M??new jl;if(u==null||12>y)return 7;ae.data=u,ae.w=f,ae.ha=y,f=[f],y=[y],ae.gb=[ae.gb];e:{var we=f,ge=y,te=ae.gb;if(e(u!=null),e(ge!=null),e(te!=null),te[0]=0,12<=ge[0]&&!n(u,we[0],"RIFF")){if(n(u,we[0]+8,"WEBP")){te=3;break e}var oe=Me(u,we[0]+4);if(12>oe||4294967286<oe){te=3;break e}if(he&&oe>ge[0]-8){te=7;break e}te[0]=oe,we[0]+=12,ge[0]-=12}te=0}if(te!=0)return te;for(oe=0<ae.gb[0],y=y[0];;){e:{var ve=u;ge=f,te=y;var Ae=q,_e=ee,Be=we=[0];if((Re=ue=[ue])[0]=0,8>te[0])te=7;else{if(!n(ve,ge[0],"VP8X")){if(Me(ve,ge[0]+4)!=10){te=3;break e}if(18>te[0]){te=7;break e}var Ne=Me(ve,ge[0]+8),Ge=1+Oe(ve,ge[0]+12);if(2147483648<=Ge*(ve=1+Oe(ve,ge[0]+15))){te=3;break e}Be!=null&&(Be[0]=Ne),Ae!=null&&(Ae[0]=Ge),_e!=null&&(_e[0]=ve),ge[0]+=18,te[0]-=18,Re[0]=1}te=0}}if(ue=ue[0],we=we[0],te!=0)return te;if(ge=!!(2&we),!oe&&ue)return 3;if(L!=null&&(L[0]=!!(16&we)),R!=null&&(R[0]=ge),D!=null&&(D[0]=0),R=q[0],we=ee[0],ue&&ge&&M==null){te=0;break}if(4>y){te=7;break}if(oe&&ue||!oe&&!ue&&!n(u,f[0],"ALPH")){y=[y],ae.na=[ae.na],ae.P=[ae.P],ae.Sa=[ae.Sa];e:{Ne=u,te=f,oe=y;var Re=ae.gb;Ae=ae.na,_e=ae.P,Be=ae.Sa,Ge=22,e(Ne!=null),e(oe!=null),ve=te[0];var Et=oe[0];for(e(Ae!=null),e(Be!=null),Ae[0]=null,_e[0]=null,Be[0]=0;;){if(te[0]=ve,oe[0]=Et,8>Et){te=7;break e}var Ct=Me(Ne,ve+4);if(4294967286<Ct){te=3;break e}var St=8+Ct+1&-2;if(Ge+=St,0<Re&&Ge>Re){te=3;break e}if(!n(Ne,ve,"VP8 ")||!n(Ne,ve,"VP8L")){te=0;break e}if(Et[0]<St){te=7;break e}n(Ne,ve,"ALPH")||(Ae[0]=Ne,_e[0]=ve+8,Be[0]=Ct),ve+=St,Et-=St}}if(y=y[0],ae.na=ae.na[0],ae.P=ae.P[0],ae.Sa=ae.Sa[0],te!=0)break}y=[y],ae.Ja=[ae.Ja],ae.xa=[ae.xa];e:if(Re=u,te=f,oe=y,Ae=ae.gb[0],_e=ae.Ja,Be=ae.xa,Ne=te[0],ve=!n(Re,Ne,"VP8 "),Ge=!n(Re,Ne,"VP8L"),e(Re!=null),e(oe!=null),e(_e!=null),e(Be!=null),8>oe[0])te=7;else{if(ve||Ge){if(Re=Me(Re,Ne+4),12<=Ae&&Re>Ae-12){te=3;break e}if(he&&Re>oe[0]-8){te=7;break e}_e[0]=Re,te[0]+=8,oe[0]-=8,Be[0]=Ge}else Be[0]=5<=oe[0]&&Re[Ne+0]==47&&!(Re[Ne+4]>>5),_e[0]=oe[0];te=0}if(y=y[0],ae.Ja=ae.Ja[0],ae.xa=ae.xa[0],f=f[0],te!=0)break;if(4294967286<ae.Ja)return 3;if(D==null||ge||(D[0]=ae.xa?2:1),R=[R],we=[we],ae.xa){if(5>y){te=7;break}D=R,he=we,ge=L,u==null||5>y?u=0:5<=y&&u[f+0]==47&&!(u[f+4]>>5)?(oe=[0],Re=[0],Ae=[0],K(_e=new T,u,f,y),Ke(_e,oe,Re,Ae)?(D!=null&&(D[0]=oe[0]),he!=null&&(he[0]=Re[0]),ge!=null&&(ge[0]=Ae[0]),u=1):u=0):u=0}else{if(10>y){te=7;break}D=we,u==null||10>y||!zu(u,f+3,y-3)?u=0:(he=u[f+0]|u[f+1]<<8|u[f+2]<<16,ge=16383&(u[f+7]<<8|u[f+6]),u=16383&(u[f+9]<<8|u[f+8]),1&he||3<(he>>1&7)||!(he>>4&1)||he>>5>=ae.Ja||!ge||!u?u=0:(R&&(R[0]=ge),D&&(D[0]=u),u=1))}if(!u||(R=R[0],we=we[0],ue&&(q[0]!=R||ee[0]!=we)))return 3;M!=null&&(M[0]=ae,M.offset=f-M.w,e(4294967286>f-M.w),e(M.offset==M.ha-y));break}return te==0||te==7&&ue&&M==null?(L!=null&&(L[0]|=ae.na!=null&&0<ae.na.length),_!=null&&(_[0]=R),I!=null&&(I[0]=we),0):te}function zl(u,f,y){var _=f.width,I=f.height,L=0,R=0,D=_,M=I;if(f.Da=u!=null&&0<u.Da,f.Da&&(D=u.cd,M=u.bd,L=u.v,R=u.j,11>y||(L&=-2,R&=-2),0>L||0>R||0>=D||0>=M||L+D>_||R+M>I))return 0;if(f.v=L,f.j=R,f.va=L+D,f.o=R+M,f.U=D,f.T=M,f.da=u!=null&&0<u.da,f.da){if(!ot(D,M,y=[u.ib],L=[u.hb]))return 0;f.ib=y[0],f.hb=L[0]}return f.ob=u!=null&&u.ob,f.Kb=u==null||!u.Sd,f.da&&(f.ob=f.ib<3*_/4&&f.hb<3*I/4,f.Kb=0),1}function Wl(u){if(u==null)return 2;if(11>u.S){var f=u.f.RGBA;f.fb+=(u.height-1)*f.A,f.A=-f.A}else f=u.f.kb,u=u.height,f.O+=(u-1)*f.fa,f.fa=-f.fa,f.N+=(u-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(u-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(u-1)*f.lb,f.lb=-f.lb);return 0}function Ta(u,f,y,_){if(_==null||0>=u||0>=f)return 2;if(y!=null){if(y.Da){var I=y.cd,L=y.bd,R=-2&y.v,D=-2&y.j;if(0>R||0>D||0>=I||0>=L||R+I>u||D+L>f)return 2;u=I,f=L}if(y.da){if(!ot(u,f,I=[y.ib],L=[y.hb]))return 2;u=I[0],f=L[0]}}_.width=u,_.height=f;e:{var M=_.width,q=_.height;if(u=_.S,0>=M||0>=q||!(u>=uh&&13>u))u=2;else{if(0>=_.Rd&&_.sd==null){R=L=I=f=0;var ee=(D=M*o2[u])*q;if(11>u||(L=(q+1)/2*(f=(M+1)/2),u==12&&(R=(I=M)*q)),(q=s(ee+2*L+R))==null){u=1;break e}_.sd=q,11>u?((M=_.f.RGBA).eb=q,M.fb=0,M.A=D,M.size=ee):((M=_.f.kb).y=q,M.O=0,M.fa=D,M.Fd=ee,M.f=q,M.N=0+ee,M.Ab=f,M.Cd=L,M.ea=q,M.W=0+ee+L,M.Db=f,M.Ed=L,u==12&&(M.F=q,M.J=0+ee+2*L),M.Tc=R,M.lb=I)}if(f=1,I=_.S,L=_.width,R=_.height,I>=uh&&13>I)if(11>I)u=_.f.RGBA,f&=(D=Math.abs(u.A))*(R-1)+L<=u.size,f&=D>=L*o2[I],f&=u.eb!=null;else{u=_.f.kb,D=(L+1)/2,ee=(R+1)/2,M=Math.abs(u.fa),q=Math.abs(u.Ab);var ue=Math.abs(u.Db),he=Math.abs(u.lb),ae=he*(R-1)+L;f&=M*(R-1)+L<=u.Fd,f&=q*(ee-1)+D<=u.Cd,f=(f&=ue*(ee-1)+D<=u.Ed)&M>=L&q>=D&ue>=D,f&=u.y!=null,f&=u.f!=null,f&=u.ea!=null,I==12&&(f&=he>=L,f&=ae<=u.Tc,f&=u.F!=null)}else f=0;u=f?0:2}}return u!=0||y!=null&&y.fd&&(u=Wl(_)),u}var pi=64,Ia=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pa=24,Ca=32,Gl=8,gi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ce("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(u){return u},N.Predictor2=function(u,f,y){return f[y+0]},N.Predictor3=function(u,f,y){return f[y+1]},N.Predictor4=function(u,f,y){return f[y-1]},N.Predictor5=function(u,f,y){return ke(ke(u,f[y+1]),f[y+0])},N.Predictor6=function(u,f,y){return ke(u,f[y-1])},N.Predictor7=function(u,f,y){return ke(u,f[y+0])},N.Predictor8=function(u,f,y){return ke(f[y-1],f[y+0])},N.Predictor9=function(u,f,y){return ke(f[y+0],f[y+1])},N.Predictor10=function(u,f,y){return ke(ke(u,f[y-1]),ke(f[y+0],f[y+1]))},N.Predictor11=function(u,f,y){var _=f[y+0];return 0>=ct(_>>24&255,u>>24&255,(f=f[y-1])>>24&255)+ct(_>>16&255,u>>16&255,f>>16&255)+ct(_>>8&255,u>>8&255,f>>8&255)+ct(255&_,255&u,255&f)?_:u},N.Predictor12=function(u,f,y){var _=f[y+0];return(He((u>>24&255)+(_>>24&255)-((f=f[y-1])>>24&255))<<24|He((u>>16&255)+(_>>16&255)-(f>>16&255))<<16|He((u>>8&255)+(_>>8&255)-(f>>8&255))<<8|He((255&u)+(255&_)-(255&f)))>>>0},N.Predictor13=function(u,f,y){var _=f[y-1];return(it((u=ke(u,f[y+0]))>>24&255,_>>24&255)<<24|it(u>>16&255,_>>16&255)<<16|it(u>>8&255,_>>8&255)<<8|it(u>>0&255,_>>0&255))>>>0};var vp=N.PredictorAdd0;N.PredictorAdd1=ft,Ce("Predictor2","PredictorAdd2"),Ce("Predictor3","PredictorAdd3"),Ce("Predictor4","PredictorAdd4"),Ce("Predictor5","PredictorAdd5"),Ce("Predictor6","PredictorAdd6"),Ce("Predictor7","PredictorAdd7"),Ce("Predictor8","PredictorAdd8"),Ce("Predictor9","PredictorAdd9"),Ce("Predictor10","PredictorAdd10"),Ce("Predictor11","PredictorAdd11"),Ce("Predictor12","PredictorAdd12"),Ce("Predictor13","PredictorAdd13");var $l=N.PredictorAdd2;dt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var ah,Yi=N.ColorIndexInverseTransform,Kl=N.MapARGB,_p=N.VP8LColorIndexInverseTransformAlpha,wp=N.MapAlpha,_s=N.VP8LPredictorsAdd=[];_s.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Li,Xi,ws,_r,Hr,Na,Ji,La,Yl,bs,Qi,zr,vo,Ra,_o,As,Xl,Ri,Wr,Vt,Bt,ln,wn,Gr,Ss,ka,lh,q1,H1=s(511),z1=s(2041),W1=s(225),G1=s(767),$1=0,bp=z1,ch=W1,xi=G1,ki=H1,uh=0,hh=1,K1=2,fh=3,dh=4,Ap=5,Y1=6,Sp=7,xp=8,ph=9,Ep=10,eE=[2,3,7],tE=[3,3,11],X1=[280,256,256,256,40],nE=[0,1,1,1,0],iE=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],rE=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],sE=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],oE=8,Tp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ip=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Jl=null,aE=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],lE=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],J1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],cE=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],uE=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hE=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],fE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xs=[],Zi=[],$r=[],dE=1,Q1=2,Es=[],Di=[];me("UpsampleRgbLinePair",_t,3),me("UpsampleBgrLinePair",Xt,3),me("UpsampleRgbaLinePair",Ki,4),me("UpsampleBgraLinePair",xn,4),me("UpsampleArgbLinePair",$n,4),me("UpsampleRgba4444LinePair",dn,2),me("UpsampleRgb565LinePair",tn,2);var pE=N.UpsampleRgbLinePair,gE=N.UpsampleBgrLinePair,Z1=N.UpsampleRgbaLinePair,e2=N.UpsampleBgraLinePair,t2=N.UpsampleArgbLinePair,n2=N.UpsampleRgba4444LinePair,mE=N.UpsampleRgb565LinePair,gh=16,mh=1<<gh-1,Ql=-227,Pp=482,i2=6,yE=(256<<i2)-1,r2=0,vE=s(256),_E=s(256),wE=s(256),bE=s(256),AE=s(Pp-Ql),SE=s(Pp-Ql);qr("YuvToRgbRow",_t,3),qr("YuvToBgrRow",Xt,3),qr("YuvToRgbaRow",Ki,4),qr("YuvToBgraRow",xn,4),qr("YuvToArgbRow",$n,4),qr("YuvToRgba4444Row",dn,2),qr("YuvToRgb565Row",tn,2);var s2=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],yh=[0,2,8],xE=[8,7,6,4,4,2,2,2,1,1,1,1],EE=1;this.WebPDecodeRGBA=function(u,f,y,_,I){var L=hh,R=new Sa,D=new Ui;R.ba=D,D.S=L,D.width=[D.width],D.height=[D.height];var M=D.width,q=D.height,ee=new jr;if(ee==null||u==null)var ue=2;else e(ee!=null),ue=Ea(u,f,y,ee.width,ee.height,ee.Pd,ee.Qd,ee.format,null);if(ue!=0?M=0:(M!=null&&(M[0]=ee.width[0]),q!=null&&(q[0]=ee.height[0]),M=1),M){D.width=D.width[0],D.height=D.height[0],_!=null&&(_[0]=D.width),I!=null&&(I[0]=D.height);e:{if(_=new ma,(I=new jl).data=u,I.w=f,I.ha=y,I.kd=1,f=[0],e(I!=null),((u=Ea(I.data,I.w,I.ha,null,null,null,f,null,I))==0||u==7)&&f[0]&&(u=4),(f=u)==0){if(e(R!=null),_.data=I.data,_.w=I.w+I.offset,_.ha=I.ha-I.offset,_.put=dr,_.ac=Mn,_.bc=pr,_.ma=R,I.xa){if((u=Ni())==null){R=1;break e}if(function(he,ae){var we=[0],ge=[0],te=[0];t:for(;;){if(he==null)return 0;if(ae==null)return he.a=2,0;if(he.l=ae,he.a=0,K(he.m,ae.data,ae.w,ae.ha),!Ke(he.m,we,ge,te)){he.a=3;break t}if(he.xb=Q1,ae.width=we[0],ae.height=ge[0],!yr(we[0],ge[0],1,he,null))break t;return 1}return e(he.a!=0),0}(u,_)){if(_=(f=Ta(_.width,_.height,R.Oa,R.ba))==0){t:{_=u;n:for(;;){if(_==null){_=0;break t}if(e(_.s.yc!=null),e(_.s.Ya!=null),e(0<_.s.Wb),e((y=_.l)!=null),e((I=y.ma)!=null),_.xb!=0){if(_.ca=I.ba,_.tb=I.tb,e(_.ca!=null),!zl(I.Oa,y,fh)){_.a=2;break n}if(!fo(_,y.width)||y.da)break n;if((y.da||Tt(_.ca.S))&&le(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&le()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!Ye(_.s.vb,_.s.Wa.Xa)){_.a=1;break n}_.xb=0}if(!Wi(_,_.V,_.Ba,_.c,_.i,y.o,ua))break n;I.Dc=_.Ma,_=1;break t}e(_.a!=0),_=0}_=!_}_&&(f=u.a)}else f=u.a}else{if((u=new Zd)==null){R=1;break e}if(u.Fa=I.na,u.P=I.P,u.qc=I.Sa,Wu(u,_)){if((f=Ta(_.width,_.height,R.Oa,R.ba))==0){if(u.Aa=0,y=R.Oa,e((I=u)!=null),y!=null){if(0<(M=0>(M=y.Md)?0:100<M?255:255*M/100)){for(q=ee=0;4>q;++q)12>(ue=I.pb[q]).lc&&(ue.ia=M*xE[0>ue.lc?0:ue.lc]>>3),ee|=ue.ia;ee&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=y.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}ep(u,_)||(f=u.a)}}else f=u.a}f==0&&R.Oa!=null&&R.Oa.fd&&(f=Wl(R.ba))}R=f}L=R!=0?null:11>L?D.f.RGBA.eb:D.f.kb.y}else L=null;return L};var o2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,$){for(var J="",C=0;C<4;C++)J+=String.fromCharCode(N[$++]);return J}function h(N,$){return(N[$+0]<<0|N[$+1]<<8|N[$+2]<<16)>>>0}function d(N,$){return(N[$+0]<<0|N[$+1]<<8|N[$+2]<<16|N[$+3]<<24)>>>0}new l;var m=[0],p=[0],v=[],b=new l,x=t,w=function(N,$){var J={},C=0,E=!1,B=0,V=0;if(J.frames=[],!function(j,z,Y,ne){for(var ce=0;ce<ne;ce++)if(j[z+ce]!=Y.charCodeAt(ce))return!0;return!1}(N,$,"RIFF",4)){var H,U;for(d(N,$+=4),$+=8;$<N.length;){var Q=c(N,$),K=d(N,$+=4);$+=4;var re=K+(1&K);switch(Q){case"VP8 ":case"VP8L":J.frames[C]===void 0&&(J.frames[C]={}),(T=J.frames[C]).src_off=E?V:$-8,T.src_size=B+K+8,C++,E&&(E=!1,B=0,V=0);break;case"VP8X":(T=J.header={}).feature_flags=N[$];var ie=$+4;T.canvas_width=1+h(N,ie),ie+=3,T.canvas_height=1+h(N,ie),ie+=3;break;case"ALPH":E=!0,B=re+8,V=$-8;break;case"ANIM":(T=J.header).bgcolor=d(N,$),ie=$+4,T.loop_count=(H=N)[(U=ie)+0]<<0|H[U+1]<<8,ie+=2;break;case"ANMF":var pe,T;(T=J.frames[C]={}).offset_x=2*h(N,$),$+=3,T.offset_y=2*h(N,$),$+=3,T.width=1+h(N,$),$+=3,T.height=1+h(N,$),$+=3,T.duration=h(N,$),$+=3,pe=N[$++],T.dispose=1&pe,T.blend=pe>>1&1}Q!="ANMF"&&($+=re)}return J}}(x,0);w.response=x,w.rgbaoutput=!0,w.dataurl=!1;var A=w.header?w.header:null,S=w.frames?w.frames:null;if(A){A.loop_counter=A.loop_count,m=[A.canvas_height],p=[A.canvas_width];for(var k=0;k<S.length&&S[k].blend!=0;k++);}var F=S[0],G=b.WebPDecodeRGBA(x,F.src_off,F.src_size,p,m);F.rgba=G,F.imgwidth=p[0],F.imgheight=m[0];for(var O=0;O<p[0]*m[0]*4;O++)v[O]=G[O];return this.width=p,this.height=m,this.data=v,this}(function(t){var e=function(){return typeof om=="function"},n=function(m,p,v,b){var x=4,w=o;switch(b){case t.image_compression.FAST:x=1,w=s;break;case t.image_compression.MEDIUM:x=6,w=a;break;case t.image_compression.SLOW:x=9,w=l}m=i(m,p,v,w);var A=om(m,{level:x});return t.__addimage__.arrayBufferToBinaryString(A)},i=function(m,p,v,b){for(var x,w,A,S=m.length/p,k=new Uint8Array(m.length+S),F=h(),G=0;G<S;G+=1){if(A=G*p,x=m.subarray(A,A+p),b)k.set(b(x,v,w),A+G);else{for(var O,N=F.length,$=[];O<N;O+=1)$[O]=F[O](x,v,w);var J=d($.concat());k.set($[J],A+G)}w=x}return k},r=function(m){var p=Array.apply([],m);return p.unshift(0),p},s=function(m,p){var v,b=[],x=m.length;b[0]=1;for(var w=0;w<x;w+=1)v=m[w-p]||0,b[w+1]=m[w]-v+256&255;return b},o=function(m,p,v){var b,x=[],w=m.length;x[0]=2;for(var A=0;A<w;A+=1)b=v&&v[A]||0,x[A+1]=m[A]-b+256&255;return x},a=function(m,p,v){var b,x,w=[],A=m.length;w[0]=3;for(var S=0;S<A;S+=1)b=m[S-p]||0,x=v&&v[S]||0,w[S+1]=m[S]+256-(b+x>>>1)&255;return w},l=function(m,p,v){var b,x,w,A,S=[],k=m.length;S[0]=4;for(var F=0;F<k;F+=1)b=m[F-p]||0,x=v&&v[F]||0,w=v&&v[F-p]||0,A=c(b,x,w),S[F+1]=m[F]-A+256&255;return S},c=function(m,p,v){if(m===p&&p===v)return m;var b=Math.abs(p-v),x=Math.abs(m-v),w=Math.abs(m+p-v-v);return b<=x&&b<=w?m:x<=w?p:v},h=function(){return[r,s,o,a,l]},d=function(m){var p=m.map(function(v){return v.reduce(function(b,x){return b+Math.abs(x)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(m,p,v,b){var x,w,A,S,k,F,G,O,N,$,J,C,E,B,V,H=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(A=new WC(m)).imgData,w=A.bits,x=A.colorSpace,k=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){N=(O=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,J=new Uint8Array(N*A.colors),$=new Uint8Array(N);var Q,K=A.pixelBitlength-A.bits;for(B=0,V=0;B<N;B++){for(E=O[B],Q=0;Q<K;)J[V++]=E>>>Q&255,Q+=A.bits;$[B]=E>>>Q&255}}if(A.bits===16){N=(O=new Uint32Array(A.decodePixels().buffer)).length,J=new Uint8Array(N*(32/A.pixelBitlength)*A.colors),$=new Uint8Array(N*(32/A.pixelBitlength)),C=A.colors>1,B=0,V=0;for(var re=0;B<N;)E=O[B++],J[V++]=E>>>0&255,C&&(J[V++]=E>>>16&255,E=O[B++],J[V++]=E>>>0&255),$[re++]=E>>>16&255;w=8}b!==t.image_compression.NONE&&e()?(m=n(J,A.width*A.colors,A.colors,b),G=n($,A.width,1,b)):(m=J,G=$,H=void 0)}if(A.colorType===3&&(x=this.color_spaces.INDEXED,F=A.palette,A.transparency.indexed)){var ie=A.transparency.indexed,pe=0;for(B=0,N=ie.length;B<N;++B)pe+=ie[B];if((pe/=255)===N-1&&ie.indexOf(0)!==-1)S=[ie.indexOf(0)];else if(pe!==N){for(O=A.decodePixels(),$=new Uint8Array(O.length),B=0,N=O.length;B<N;B++)$[B]=ie[O[B]];G=n($,A.width,1)}}var T=function(j){var z;switch(j){case t.image_compression.FAST:z=11;break;case t.image_compression.MEDIUM:z=13;break;case t.image_compression.SLOW:z=14;break;default:z=12}return z}(b);return H===this.decode.FLATE_DECODE&&(U="/Predictor "+T+" "),U+="/Colors "+k+" /BitsPerComponent "+w+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(G&&this.__addimage__.isArrayBuffer(G)||this.__addimage__.isArrayBufferView(G))&&(G=this.__addimage__.arrayBufferToBinaryString(G)),{alias:v,data:m,index:p,filter:H,decodeParameters:U,transparency:S,palette:F,sMask:G,predictor:T,width:A.width,height:A.height,bitsPerComponent:w,colorSpace:x}}}})($e.API),function(t){t.processGIF89A=function(e,n,i,r){var s=new GC(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},h=new og(100).encode(c,100);return t.processJPEG.call(this,h,n,i,r)},t.processGIF87A=t.processGIF89A}($e.API),nr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},nr.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){jt.log("bit decode error:"+n)}},nr.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},nr.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+2*r*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},nr.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*i;if(r<this.palette.length){var o=this.palette[r];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},nr.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,h=i*this.width*4+4*r;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=c}this.pos+=t}},nr.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,h=r*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},nr.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=i,this.data[o+3]=255}this.pos+=this.width%4}},nr.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=o}},nr.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,i,r){var s=new nr(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new og(100).encode(l,100);return t.processJPEG.call(this,c,n,i,r)}}($e.API),Vy.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,i,r){var s=new Vy(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new og(100).encode(l,100);return t.processJPEG.call(this,c,n,i,r)}}($e.API),$e.API.processRGBA=function(t,e,n){for(var i=t.data,r=i.length,s=new Uint8Array(r/4*3),o=new Uint8Array(r/4),a=0,l=0,c=0;c<r;c+=4){var h=i[c],d=i[c+1],m=i[c+2],p=i[c+3];s[a++]=h,s[a++]=d,s[a++]=m,o[l++]=p}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},$e.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ba=$e.API,kh=Ba.getCharWidthsArray=function(t,e){var n,i,r=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:r.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:r.metadata.Unicode.kerning,h=c.fof?c.fof:1,d=e.doKerning!==!1,m=0,p=t.length,v=0,b=a[0]||l,x=[];for(n=0;n<p;n++)i=t.charCodeAt(n),typeof r.metadata.widthOfString=="function"?x.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+o*(1e3/s)||0)/1e3):(m=d&&Lt(c[i])==="object"&&!isNaN(parseInt(c[i][v],10))?c[i][v]/h:0,x.push((a[i]||b)/l+m)),v=i;return x},Oy=Ba.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return Ba.processArabic&&(t=Ba.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,r)/n:kh.apply(this,arguments).reduce(function(s,o){return s+o},0)},My=function(t,e,n,i){for(var r=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;r.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>i&&(r.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&r.push(t.slice(l,s)),r},Fy=function(t,e,n){n||(n={});var i,r,s,o,a,l,c,h=[],d=[h],m=n.textIndent||0,p=0,v=0,b=t.split(" "),x=kh.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?b[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),A=[];b.map(function(k){(k=k.split(/\s*\n/)).length>1?A=A.concat(k.map(function(F,G){return(G&&F.length?`
`:"")+F})):A.push(k[0])}),b=A,l=Oy.apply(this,[w,n])}for(s=0,o=b.length;s<o;s++){var S=0;if(i=b[s],l&&i[0]==`
`&&(i=i.substr(1),S=1),m+p+(v=(r=kh.apply(this,[i,n])).reduce(function(k,F){return k+F},0))>e||S){if(v>e){for(a=My.apply(this,[i,r,e-(m+p),e]),h.push(a.shift()),h=[a.pop()];a.length;)d.push([a.shift()]);v=r.slice(i.length-(h[0]?h[0].length:0)).reduce(function(k,F){return k+F},0)}else h=[i];d.push(h),m=v+l,p=x}else h.push(i),m+=p+v,p=x}return c=l?function(k,F){return(F?w:"")+k.join(" ")}:function(k){return k.join(" ")},d.map(c)},Ba.splitTextToSize=function(t,e,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var d=this.internal.getFont(h.fontName,h.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/r;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=i.length;a<l;a++)c=c.concat(Fy.apply(this,[i[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},r=0;r<e.length;r++)n[e[r]]="0123456789abcdef"[r],i["0123456789abcdef"[r]]=e[r];var s=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var m,p,v,b,x=["{"];for(var w in d){if(m=d[w],isNaN(parseInt(w,10))?p="'"+w+"'":(w=parseInt(w,10),p=(p=s(w).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof m=="number")m<0?(v=s(m).slice(3),b="-"):(v=s(m).slice(2),b=""),v=b+v.slice(0,-1)+i[v.slice(-1)];else{if(Lt(m)!=="object")throw new Error("Don't know what to do with value type "+Lt(m)+".");v=o(m)}x.push(p+v)}return x.push("}"),x.join("")},a=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,v,b,x={},w=1,A=x,S=[],k="",F="",G=d.length-1,O=1;O<G;O+=1)(b=d[O])=="'"?m?(v=m.join(""),m=void 0):m=[]:m?m.push(b):b=="{"?(S.push([A,v]),A={},v=void 0):b=="}"?((p=S.pop())[0][p[1]]=A,v=void 0,A=p[0]):b=="-"?w=-1:v===void 0?n.hasOwnProperty(b)?(k+=n[b],v=parseInt(k,16)*w,w=1,k=""):k+=b:n.hasOwnProperty(b)?(F+=n[b],A[v]=parseInt(F,16)*w,w=1,v=void 0,F=""):F+=b;return x},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var m=d.font,p=h.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var v=c.Unicode[m.postScriptName];v&&(m.metadata.Unicode.encoding=v,m.encoding=v.codePages[0])}])}($e.API),function(t){var e=function(n){for(var i=n.length,r=new Uint8Array(i),s=0;s<i;s++)r[s]=n.charCodeAt(s);return r};t.API.events.push(["addFont",function(n){var i=void 0,r=n.font,s=n.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(xc(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(r,i)}}])}($e),function(t){function e(){return(Je.canvg?Promise.resolve(Je.canvg):tm(()=>import("./index.es-abdb453a.js"),["assets/index.es-abdb453a.js","assets/react-vendor-f56200e5.js"])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}$e.API.addSvgAsImage=function(n,i,r,s,o,a,l,c){if(isNaN(i)||isNaN(r))throw jt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw jt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var d=h.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(v){return v.fromString(d,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){p.addImage(h.toDataURL("image/jpeg",1),i,r,s,o,l,c)})}}(),$e.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,n);return this},$e.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,r,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,h=0,d=0;function m(v,b){var x,w=!1;for(x=0;x<v.length;x+=1)v[x]===b&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(d=0;d<p;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(Lt(t)==="object"){for(r in t)if(s=t[r],m(a,r)&&s!==void 0){if(n[r].type==="boolean"&&typeof s=="boolean")n[r].value=s;else if(n[r].type==="name"&&m(n[r].valueSet,s))n[r].value=s;else if(n[r].type==="integer"&&Number.isInteger(s))n[r].value=s;else if(n[r].type==="array"){for(c=0;c<s.length;c+=1)if(i=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(h=0;h<s[c].length;h+=1)typeof s[c][h]!="number"&&(i=!1);i===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[r].value="["+l.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,b=[];for(v in n)n[v].explicitSet===!0&&(n[v].type==="name"?b.push("/"+v+" /"+n[v].value):b.push("/"+v+" "+n[v].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(r+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}($e.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],d=0,m=s.length;d<m;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(c[4-a.length],a)}return h.join("")},i=function(s){var o,a,l,c,h,d,m;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,m=(a=Object.keys(s).sort(function(p,v){return p-v})).length;d<m;d++)o=a[d],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",v=0;v<m.length;v++)p+=String.fromCharCode(m[v]);var b=c();h({data:p,addLength1:!0,objectId:b}),l("endobj");var x=c();h({data:i(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ha(a.fontName)),l("/FontFile2 "+b+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var A=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ha(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+x+" 0 R"),l("/BaseFont /"+Ha(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+A+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,m="",p=0;p<d.length;p++)m+=String.fromCharCode(d[p]);var v=c();h({data:m,addLength1:!0,objectId:v}),l("endobj");var b=c();h({data:i(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var x=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Ha(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Ha(a.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var r=function(s){var o,a=s.text||"",l=s.x,c=s.y,h=s.options||{},d=s.mutex||{},m=d.pdfEscape,p=d.activeFontKey,v=d.fonts,b=p,x="",w=0,A="",S=v[b].encoding;if(v[b].encoding!=="Identity-H")return{text:a,x:l,y:c,options:h,mutex:d};for(A=a,b=p,Array.isArray(a)&&(A=a[0]),w=0;w<A.length;w+=1)v[b].metadata.hasOwnProperty("cmap")&&(o=v[b].metadata.cmap.unicode.codeMap[A[w].charCodeAt(0)]),o||A[w].charCodeAt(0)<256&&v[b].metadata.hasOwnProperty("Unicode")?x+=A[w]:x+="";var k="";return parseInt(b.slice(1))<14||S==="WinAnsiEncoding"?k=m(x,b).split("").map(function(F){return F.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(k=n(x,v[b])),d.isHex=!0,{text:k,x:l,y:c,options:h,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([r(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(r(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=r(Object.assign({},l,{text:o})).text}])}($e),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}($e.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var r,s,o,a,l,c,h,d=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,S=0;this.__bidiEngine__={};var k=function(C){var E=C.charCodeAt(),B=E>>8,V=b[B];return V!==void 0?d[256*V+(255&E)]:B===252||B===253?"AL":w.test(B)?"L":B===8?"R":"N"},F=function(C){for(var E,B=0;B<C.length;B++){if((E=k(C.charAt(B)))==="L")return!1;if(E==="R")return!0}return!1},G=function(C,E,B,V){var H,U,Q,K,re=E[V];switch(re){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(re="AN");break;case"AL":A=!0,re="R";break;case"WS":re="N";break;case"CS":V<1||V+1>=E.length||(H=B[V-1])!=="EN"&&H!=="AN"||(U=E[V+1])!=="EN"&&U!=="AN"?re="N":A&&(U="AN"),re=U===H?U:"N";break;case"ES":re=(H=V>0?B[V-1]:"B")==="EN"&&V+1<E.length&&E[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&B[V-1]==="EN"){re="EN";break}if(A){re="N";break}for(Q=V+1,K=E.length;Q<K&&E[Q]==="ET";)Q++;re=Q<K&&E[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(K=E.length,Q=V+1;Q<K&&E[Q]==="NSM";)Q++;if(Q<K){var ie=C[V],pe=ie>=1425&&ie<=2303||ie===64286;if(H=E[Q],pe&&(H==="R"||H==="AL")){re="R";break}}}re=V<1||(H=E[V-1])==="B"?"N":B[V-1];break;case"B":A=!1,r=!0,re=S;break;case"S":s=!0,re="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":re="N"}return re},O=function(C,E,B){var V=C.split("");return B&&N(V,B,{hiLevel:S}),V.reverse(),E&&E.reverse(),V.join("")},N=function(C,E,B){var V,H,U,Q,K,re=-1,ie=C.length,pe=0,T=[],j=S?p:m,z=[];for(A=!1,r=!1,s=!1,H=0;H<ie;H++)z[H]=k(C[H]);for(U=0;U<ie;U++){if(K=pe,T[U]=G(C,z,T,U),V=240&(pe=j[K][v[T[U]]]),pe&=15,E[U]=Q=j[pe][5],V>0)if(V===16){for(H=re;H<U;H++)E[H]=1;re=-1}else re=-1;if(j[pe][6])re===-1&&(re=U);else if(re>-1){for(H=re;H<U;H++)E[H]=Q;re=-1}z[U]==="B"&&(E[U]=0),B.hiLevel|=Q}s&&function(Y,ne,ce){for(var fe=0;fe<ce;fe++)if(Y[fe]==="S"){ne[fe]=S;for(var de=fe-1;de>=0&&Y[de]==="WS";de--)ne[de]=S}}(z,E,ie)},$=function(C,E,B,V,H){if(!(H.hiLevel<C)){if(C===1&&S===1&&!r)return E.reverse(),void(B&&B.reverse());for(var U,Q,K,re,ie=E.length,pe=0;pe<ie;){if(V[pe]>=C){for(K=pe+1;K<ie&&V[K]>=C;)K++;for(re=pe,Q=K-1;re<Q;re++,Q--)U=E[re],E[re]=E[Q],E[Q]=U,B&&(U=B[re],B[re]=B[Q],B[Q]=U);pe=K}pe++}}},J=function(C,E,B){var V=C.split(""),H={hiLevel:S};return B||(B=[]),N(V,B,H),function(U,Q,K){if(K.hiLevel!==0&&h)for(var re,ie=0;ie<U.length;ie++)Q[ie]===1&&(re=x.indexOf(U[ie]))>=0&&(U[ie]=x[re+1])}(V,B,H),$(2,V,E,B,H),$(1,V,E,B,H),V.join("")};return this.__bidiEngine__.doBidiReorder=function(C,E,B){if(function(H,U){if(U)for(var Q=0;Q<H.length;Q++)U[Q]=Q;a===void 0&&(a=F(H)),c===void 0&&(c=F(H))}(C,E),o||!l||c)if(o&&l&&a^c)S=a?1:0,C=O(C,E,B);else if(!o&&l&&c)S=a?1:0,C=J(C,E,B),C=O(C,E);else if(!o||a||l||c){if(o&&!l&&a^c)C=O(C,E),a?(S=0,C=J(C,E,B)):(S=1,C=J(C,E,B),C=O(C,E));else if(o&&a&&!l&&c)S=1,C=J(C,E,B),C=O(C,E);else if(!o&&!l&&a^c){var V=h;a?(S=1,C=J(C,E,B),S=0,h=!1,C=J(C,E,B),h=V):(S=0,C=J(C,E,B),C=O(C,E),S=1,h=!1,C=J(C,E,B),h=V,C=O(C,E))}}else S=0,C=J(C,E,B);else S=a?1:0,C=J(C,E,B);return C},this.__bidiEngine__.setOptions=function(C){C&&(o=C.isInputVisual,l=C.isOutputVisual,a=C.isInputRtl,c=C.isOutputRtl,h=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var r=i.text,s=(i.x,i.y,i.options||{}),o=(i.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var a=0;for(o=[],a=0;a<r.length;a+=1)Object.prototype.toString.call(r[a])==="[object Array]"?o.push([n.doBidiReorder(r[a][0]),r[a][1],r[a][2]]):o.push([n.doBidiReorder(r[a])]);i.text=o}else i.text=n.doBidiReorder(r);n.setOptions({isInputVisual:!0})}])}($e),$e.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Zs(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new aN(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new $C(this.contents),this.head=new YC(this),this.name=new eN(this),this.cmap=new tb(this),this.toUnicode={},this.hhea=new XC(this),this.maxp=new tN(this),this.hmtx=new nN(this),this.post=new QC(this),this.os2=new JC(this),this.loca=new oN(this),this.glyf=new iN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(n=r>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var r,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)r=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t}();var hr,Zs=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,r;for(r=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)r.push(this.writeByte(e.charCodeAt(n)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,r,s,o,a,l;return e=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*r+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,r,s;for(s=[],i=0,r=e.length;i<r;i++)n=e[i],s.push(this.writeByte(n));return s},t}(),$C=function(){var t;function e(n){var i,r,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,r,s,o,a,l,c,h,d,m,p,v,b;for(b in p=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),o=Math.floor(d/l),h=16*p-d,(r=new Zs).writeInt(this.scalarType),r.writeShort(p),r.writeShort(d),r.writeShort(o),r.writeShort(h),s=16*p,c=r.pos+s,a=null,v=[],n)for(m=n[b],r.writeString(b),r.writeInt(t(m)),r.writeInt(c),r.writeInt(m.length),v=v.concat(m),b==="head"&&(a=c),c+=m.length;c%4;)v.push(0),c++;return r.write(v),i=2981146554-t(r.data),r.pos=a+8,r.writeUInt32(i),r.data},t=function(n){var i,r,s,o;for(n=nb.call(n);n.length%4;)n.push(0);for(s=new Zs(n),r=0,i=0,o=n.length;i<o;i=i+=4)r+=s.readUInt32();return 4294967295&r},e}(),KC={}.hasOwnProperty,Fr=function(t,e){for(var n in e)KC.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};hr=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var YC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new Zs).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e}(),By=function(){function t(e,n){var i,r,s,o,a,l,c,h,d,m,p,v,b,x,w,A,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),m=p/2,e.pos+=6,s=function(){var k,F;for(F=[],l=k=0;0<=m?k<m:k>m;l=0<=m?++k:--k)F.push(e.readUInt16());return F}(),e.pos+=2,b=function(){var k,F;for(F=[],l=k=0;0<=m?k<m:k>m;l=0<=m?++k:--k)F.push(e.readUInt16());return F}(),c=function(){var k,F;for(F=[],l=k=0;0<=m?k<m:k>m;l=0<=m?++k:--k)F.push(e.readUInt16());return F}(),h=function(){var k,F;for(F=[],l=k=0;0<=m?k<m:k>m;l=0<=m?++k:--k)F.push(e.readUInt16());return F}(),r=(this.length-e.pos+this.offset)/2,a=function(){var k,F;for(F=[],l=k=0;0<=r?k<r:k>r;l=0<=r?++k:--k)F.push(e.readUInt16());return F}(),l=w=0,S=s.length;w<S;l=++w)for(x=s[l],i=A=v=b[l];v<=x?A<=x:A>=x;i=v<=x?++A:--A)h[l]===0?o=i+c[l]:(o=a[h[l]/2+(i-v)-(m-l)]||0)!==0&&(o+=c[l]),this.codeMap[i]=65535&o}e.pos=d}return t.encode=function(e,n){var i,r,s,o,a,l,c,h,d,m,p,v,b,x,w,A,S,k,F,G,O,N,$,J,C,E,B,V,H,U,Q,K,re,ie,pe,T,j,z,Y,ne,ce,fe,de,Ee,Se,Oe;switch(V=new Zs,o=Object.keys(e).sort(function(Me,Ye){return Me-Ye}),n){case"macroman":for(b=0,x=function(){var Me=[];for(v=0;v<256;++v)Me.push(0);return Me}(),A={0:0},s={},H=0,re=o.length;H<re;H++)A[de=e[r=o[H]]]==null&&(A[de]=++b),s[r]={old:e[r],new:A[e[r]]},x[r]=A[e[r]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(x),{charMap:s,subtable:V.data,maxGlyphID:b+1};case"unicode":for(E=[],d=[],S=0,A={},i={},w=c=null,U=0,ie=o.length;U<ie;U++)A[F=e[r=o[U]]]==null&&(A[F]=++S),i[r]={old:F,new:A[F]},a=A[F]-r,w!=null&&a===c||(w&&d.push(w),E.push(r),c=a),w=r;for(w&&d.push(w),d.push(65535),E.push(65535),J=2*($=E.length),N=2*Math.pow(Math.log($)/Math.LN2,2),m=Math.log(N/2)/Math.LN2,O=2*$-N,l=[],G=[],p=[],v=Q=0,pe=E.length;Q<pe;v=++Q){if(C=E[v],h=d[v],C===65535){l.push(0),G.push(0);break}if(C-(B=i[C].new)>=32768)for(l.push(0),G.push(2*(p.length+$-v)),r=K=C;C<=h?K<=h:K>=h;r=C<=h?++K:--K)p.push(i[r].new);else l.push(B-C),G.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*$+2*p.length),V.writeUInt16(0),V.writeUInt16(J),V.writeUInt16(N),V.writeUInt16(m),V.writeUInt16(O),ce=0,T=d.length;ce<T;ce++)r=d[ce],V.writeUInt16(r);for(V.writeUInt16(0),fe=0,j=E.length;fe<j;fe++)r=E[fe],V.writeUInt16(r);for(Ee=0,z=l.length;Ee<z;Ee++)a=l[Ee],V.writeUInt16(a);for(Se=0,Y=G.length;Se<Y;Se++)k=G[Se],V.writeUInt16(k);for(Oe=0,ne=p.length;Oe<ne;Oe++)b=p[Oe],V.writeUInt16(b);return{charMap:i,subtable:V.data,maxGlyphID:S+1}}},t}(),tb=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,r,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)i=new By(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var r,s;return i==null&&(i="macroman"),r=By.encode(n,i),(s=new Zs).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},e}(),XC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),JC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,r;for(r=[],i=0;i<10;++i)r.push(n.readByte());return r}(),this.charRange=function(){var i,r;for(r=[],i=0;i<4;++i)r.push(n.readInt());return r}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,r;for(r=[],i=0;i<2;i=++i)r.push(n.readInt());return r}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),QC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="post",e.prototype.parse=function(n){var i,r,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(r=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)i=n.readByte(),s.push(this.names.push(n.readString(i)));return s;case 151552:return r=n.readUInt16(),this.offsets=n.read(r);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),ZC=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},eN=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="name",e.prototype.parse=function(n){var i,r,s,o,a,l,c,h,d,m,p;for(n.pos=this.offset,n.readShort(),i=n.readShort(),l=n.readShort(),r=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)r.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=d=0,m=r.length;d<m;o=++d)s=r[o],n.pos=s.offset,h=n.readString(s.length),a=new ZC(h,s),c[p=s.nameID]==null&&(c[p]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),tN=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),nN=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,r,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,d;for(d=[],i=h=0;0<=s?h<s:h>s;i=0<=s?++h:--h)d.push(n.readInt16());return d}(),this.widths=(function(){var h,d,m,p;for(p=[],h=0,d=(m=this.metrics).length;h<d;h++)o=m[h],p.push(o.advance);return p}).call(this),r=this.widths[this.widths.length-1],c=[],i=a=0;0<=s?a<s:a>s;i=0<=s?++a:--a)c.push(this.widths.push(r));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),nb=[].slice,iN=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,r,s,o,a,l,c,h,d,m;return n in this.cache?this.cache[n]:(o=this.file.loca,i=this.file.contents,r=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+r,a=(l=new Zs(i.read(s))).readShort(),h=l.readShort(),m=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[n]=a===-1?new sN(l,h,m,c,d):new rN(l,a,h,m,c,d),this.cache[n]))},e.prototype.encode=function(n,i,r){var s,o,a,l,c;for(a=[],o=[],l=0,c=i.length;l<c;l++)s=n[i[l]],o.push(a.length),s&&(a=a.concat(s.encode(r)));return o.push(a.length),{table:a,offsets:o}},e}(),rN=function(){function t(e,n,i,r,s,o){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=r,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),sN=function(){function t(e,n,i,r,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new Zs(nb.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),oN=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fr(e,hr),e.prototype.tag="loca",e.prototype.parse=function(n){var i,r;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var r=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<r.length;++a)if(r[a]=s,o<i.length&&i[o]==a){++o,r[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var h=new Array(4*r.length),d=0;d<r.length;++d)h[4*d+3]=255&r[d],h[4*d+2]=(65280&r[d])>>8,h[4*d+1]=(16711680&r[d])>>16,h[4*d]=(4278190080&r[d])>>24;return h},e}(),aN=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,r,s;for(n in r=this.font.cmap.tables[0].codeMap,e={},s=this.subset)i=s[n],e[n]=r[i];return e},t.prototype.glyphsFor=function(e){var n,i,r,s,o,a,l;for(r={},o=0,a=e.length;o<a;o++)r[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],r)(i=r[s])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))i=l[s],r[s]=i;return r},t.prototype.encode=function(e,n){var i,r,s,o,a,l,c,h,d,m,p,v,b,x,w;for(r in i=tb.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},w=i.charMap)p[(l=w[r]).old]=l.new;for(v in m=i.maxGlyphID,o)v in p||(p[v]=m++);return h=function(A){var S,k;for(S in k={},A)k[A[S]]=S;return k}(p),d=Object.keys(h).sort(function(A,S){return A-S}),b=function(){var A,S,k;for(k=[],A=0,S=d.length;A<S;A++)a=d[A],k.push(h[a]);return k}(),s=this.font.glyf.encode(o,b,p),c=this.font.loca.encode(s.offsets,b),x={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},t}();$e.API.PDFObject=function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,r,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)i=n[a],c.push(e.convert(i));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(r in s=["<<"],n)o=n[r],s.push("/"+r+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const lN=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:VC,AcroFormAppearance:Ue,AcroFormButton:bn,AcroFormCheckBox:Ic,AcroFormChoiceField:Fo,AcroFormComboBox:Vo,AcroFormEditBox:Ec,AcroFormListBox:jo,AcroFormPasswordField:Pc,AcroFormPushButton:Tc,AcroFormRadioButton:Bo,AcroFormTextField:Gs,GState:Gc,ShadingPattern:Ms,TilingPattern:No,default:$e,jsPDF:$e},Symbol.toStringTag,{value:"Module"}));var cN={exports:{}};const uN=VE(lN);/*!
 * 
 *               jsPDF AutoTable plugin v3.7.1
 *
 *               Copyright (c) 2023 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(i,r){t.exports=r(function(){try{return uN}catch{}}())})(typeof globalThis<"u"?globalThis:typeof jp<"u"?jp:typeof window<"u"?window:typeof self<"u"?self:jp,function(n){return function(){var i={662:function(a,l){var c=this&&this.__extends||function(){var m=function(p,v){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(b[w]=x[w])},m(p,v)};return function(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");m(p,v);function b(){this.constructor=p}p.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var h=function(){function m(p,v,b){this.table=v,this.pageNumber=v.pageNumber,this.pageCount=this.pageNumber,this.settings=v.settings,this.cursor=b,this.doc=p.getDocument()}return m}();l.HookData=h;var d=function(m){c(p,m);function p(v,b,x,w,A,S){var k=m.call(this,v,b,S)||this;return k.cell=x,k.row=w,k.column=A,k.section=w.section,k}return p}(h);l.CellHookData=d},790:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var h=c(148),d=c(938),m=c(323),p=c(587),v=c(49),b=c(858);function x(w){w.API.autoTable=function(){for(var A=[],S=0;S<arguments.length;S++)A[S]=arguments[S];var k;A.length===1?k=A[0]:(console.error("Use of deprecated autoTable initiation"),k=A[2]||{},k.columns=A[0],k.body=A[1]);var F=(0,p.parseInput)(this,k),G=(0,b.createTable)(this,F);return(0,v.drawTable)(this,G),this},w.API.lastAutoTable=!1,w.API.previousAutoTable=!1,w.API.autoTable.previous=!1,w.API.autoTableText=function(A,S,k,F){(0,d.default)(A,S,k,F,this)},w.API.autoTableSetDefaults=function(A){return m.DocHandler.setDefaults(A,this),this},w.autoTableSetDefaults=function(A,S){m.DocHandler.setDefaults(A,S)},w.API.autoTableHtmlToJson=function(A,S){if(S===void 0&&(S=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var k=new m.DocHandler(this),F=(0,h.parseHtml)(k,A,window,S,!1),G=F.head,O=F.body,N=G[0].map(function($){return $.content});return{columns:N,rows:O,data:O}},w.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var A=this.lastAutoTable;return A&&A.finalY?A.finalY:0},w.API.autoTableAddPageContent=function(A){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),w.API.autoTable.globalDefaults||(w.API.autoTable.globalDefaults={}),w.API.autoTable.globalDefaults.addPageContent=A,this},w.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=x},938:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(h,d,m,p,v){p=p||{};var b=1.15,x=v.internal.scaleFactor,w=v.internal.getFontSize()/x,A=v.getLineHeightFactor?v.getLineHeightFactor():b,S=w*A,k=/\r\n|\r|\n/g,F="",G=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(F=typeof h=="string"?h.split(k):h,G=F.length||1),m+=w*(2-b),p.valign==="middle"?m-=G/2*S:p.valign==="bottom"&&(m-=G*S),p.halign==="center"||p.halign==="right"){var O=w;if(p.halign==="center"&&(O*=.5),F&&G>=1){for(var N=0;N<F.length;N++)v.text(F[N],d-v.getStringUnitWidth(F[N])*O,m),m+=S;return v}d-=v.getStringUnitWidth(h)*O}return p.halign==="justify"?v.text(h,d,m,{maxWidth:p.maxWidth||100,align:"justify"}):v.text(h,d,m),v}l.default=c},200:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(v,b,x){x.applyStyles(b,!0);var w=Array.isArray(v)?v:[v],A=w.map(function(S){return x.getTextWidth(S)}).reduce(function(S,k){return Math.max(S,k)},0);return A}l.getStringWidth=c;function h(v,b,x,w){var A=b.settings.tableLineWidth,S=b.settings.tableLineColor;v.applyStyles({lineWidth:A,lineColor:S});var k=d(A,!1);k&&v.rect(x.x,x.y,b.getWidth(v.pageSize().width),w.y-x.y,k)}l.addTableBorder=h;function d(v,b){var x=v>0,w=b||b===0;return x&&w?"DF":x?"S":w?"F":null}l.getFillStyle=d;function m(v,b){var x,w,A,S;if(v=v||b,Array.isArray(v)){if(v.length>=4)return{top:v[0],right:v[1],bottom:v[2],left:v[3]};if(v.length===3)return{top:v[0],right:v[1],bottom:v[2],left:v[1]};if(v.length===2)return{top:v[0],right:v[1],bottom:v[0],left:v[1]};v.length===1?v=v[0]:v=b}return typeof v=="object"?(typeof v.vertical=="number"&&(v.top=v.vertical,v.bottom=v.vertical),typeof v.horizontal=="number"&&(v.right=v.horizontal,v.left=v.horizontal),{left:(x=v.left)!==null&&x!==void 0?x:b,top:(w=v.top)!==null&&w!==void 0?w:b,right:(A=v.right)!==null&&A!==void 0?A:b,bottom:(S=v.bottom)!==null&&S!==void 0?S:b}):(typeof v!="number"&&(v=b),{top:v,right:v,bottom:v,left:v})}l.parseSpacing=m;function p(v,b){var x=m(b.settings.margin,0);return v.pageSize().width-(x.left+x.right)}l.getPageAvailableWidth=p},913:function(a,l){var c=this&&this.__extends||function(){var p=function(v,b){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var A in w)Object.prototype.hasOwnProperty.call(w,A)&&(x[A]=w[A])},p(v,b)};return function(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");p(v,b);function x(){this.constructor=v}v.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var h=function(p){c(v,p);function v(b){var x=p.call(this)||this;return x._element=b,x}return v}(Array);l.HtmlRowInput=h;function d(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=d;function m(p){var v={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return v[p]}l.getTheme=m},259:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var h=c(200);function d(x,w,A,S,k){var F={},G=1.3333333333333333,O=p(w,function(re){return k.getComputedStyle(re).backgroundColor});O!=null&&(F.fillColor=O);var N=p(w,function(re){return k.getComputedStyle(re).color});N!=null&&(F.textColor=N);var $=b(S,A);$&&(F.cellPadding=$);var J="borderTopColor",C=G*A,E=S.borderTopWidth;if(S.borderBottomWidth===E&&S.borderRightWidth===E&&S.borderLeftWidth===E){var B=(parseFloat(E)||0)/C;B&&(F.lineWidth=B)}else F.lineWidth={top:(parseFloat(S.borderTopWidth)||0)/C,right:(parseFloat(S.borderRightWidth)||0)/C,bottom:(parseFloat(S.borderBottomWidth)||0)/C,left:(parseFloat(S.borderLeftWidth)||0)/C},F.lineWidth.top||(F.lineWidth.right?J="borderRightColor":F.lineWidth.bottom?J="borderBottomColor":F.lineWidth.left&&(J="borderLeftColor"));console.log(F.lineWidth);var V=p(w,function(re){return k.getComputedStyle(re)[J]});V!=null&&(F.lineColor=V);var H=["left","right","center","justify"];H.indexOf(S.textAlign)!==-1&&(F.halign=S.textAlign),H=["middle","bottom","top"],H.indexOf(S.verticalAlign)!==-1&&(F.valign=S.verticalAlign);var U=parseInt(S.fontSize||"");isNaN(U)||(F.fontSize=U/G);var Q=m(S);Q&&(F.fontStyle=Q);var K=(S.fontFamily||"").toLowerCase();return x.indexOf(K)!==-1&&(F.font=K),F}l.parseCss=d;function m(x){var w="";return(x.fontWeight==="bold"||x.fontWeight==="bolder"||parseInt(x.fontWeight)>=700)&&(w="bold"),(x.fontStyle==="italic"||x.fontStyle==="oblique")&&(w+="italic"),w}function p(x,w){var A=v(x,w);if(!A)return null;var S=A.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!S||!Array.isArray(S))return null;var k=[parseInt(S[1]),parseInt(S[2]),parseInt(S[3])],F=parseInt(S[4]);return F===0||isNaN(k[0])||isNaN(k[1])||isNaN(k[2])?null:k}function v(x,w){var A=w(x);return A==="rgba(0, 0, 0, 0)"||A==="transparent"||A==="initial"||A==="inherit"?x.parentElement==null?null:v(x.parentElement,w):A}function b(x,w){var A=[x.paddingTop,x.paddingRight,x.paddingBottom,x.paddingLeft],S=96/(72/w),k=(parseInt(x.lineHeight)-parseInt(x.fontSize))/w/2,F=A.map(function(O){return parseInt(O||"0")/S}),G=(0,h.parseSpacing)(F,0);return k>G.top&&(G.top=k),k>G.bottom&&(G.bottom=k),G}},323:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},h=function(){function d(m){this.jsPDFDocument=m,this.userStyles={textColor:m.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:m.internal.getFontSize(),fontStyle:m.internal.getFont().fontStyle,font:m.internal.getFont().fontName,lineWidth:m.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:m.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return d.setDefaults=function(m,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=m:c=m},d.unifyColor=function(m){return Array.isArray(m)?m:typeof m=="number"?[m,m,m]:typeof m=="string"?[m]:null},d.prototype.applyStyles=function(m,p){var v,b,x;p===void 0&&(p=!1),m.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(m.fontStyle);var w=this.jsPDFDocument.internal.getFont(),A=w.fontStyle,S=w.fontName;if(m.font&&(S=m.font),m.fontStyle){A=m.fontStyle;var k=this.getFontList()[S];k&&k.indexOf(A)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(k[0]),A=k[0])}if(this.jsPDFDocument.setFont(S,A),m.fontSize&&this.jsPDFDocument.setFontSize(m.fontSize),!p){var F=d.unifyColor(m.fillColor);F&&(v=this.jsPDFDocument).setFillColor.apply(v,F),F=d.unifyColor(m.textColor),F&&(b=this.jsPDFDocument).setTextColor.apply(b,F),F=d.unifyColor(m.lineColor),F&&(x=this.jsPDFDocument).setDrawColor.apply(x,F),typeof m.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(m.lineWidth)}},d.prototype.splitTextToSize=function(m,p,v){return this.jsPDFDocument.splitTextToSize(m,p,v)},d.prototype.rect=function(m,p,v,b,x){return this.jsPDFDocument.rect(m,p,v,b,x)},d.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},d.prototype.getTextWidth=function(m){return this.jsPDFDocument.getTextWidth(m)},d.prototype.getDocument=function(){return this.jsPDFDocument},d.prototype.setPage=function(m){this.jsPDFDocument.setPage(m)},d.prototype.addPage=function(){return this.jsPDFDocument.addPage()},d.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},d.prototype.getGlobalOptions=function(){return c||{}},d.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},d.prototype.pageSize=function(){var m=this.jsPDFDocument.internal.pageSize;return m.width==null&&(m={width:m.getWidth(),height:m.getHeight()}),m},d.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},d.prototype.getLineHeightFactor=function(){var m=this.jsPDFDocument;return m.getLineHeightFactor?m.getLineHeightFactor():1.15},d.prototype.getLineHeight=function(m){return m/this.scaleFactor()*this.getLineHeightFactor()},d.prototype.pageNumber=function(){var m=this.jsPDFDocument.internal.getCurrentPageInfo();return m?m.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},d}();l.DocHandler=h},148:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var h=c(259),d=c(913);function m(b,x,w,A,S){var k,F;A===void 0&&(A=!1),S===void 0&&(S=!1);var G;typeof x=="string"?G=w.document.querySelector(x):G=x;var O=Object.keys(b.getFontList()),N=b.scaleFactor(),$=[],J=[],C=[];if(!G)return console.error("Html table could not be found with input: ",x),{head:$,body:J,foot:C};for(var E=0;E<G.rows.length;E++){var B=G.rows[E],V=(F=(k=B==null?void 0:B.parentElement)===null||k===void 0?void 0:k.tagName)===null||F===void 0?void 0:F.toLowerCase(),H=p(O,N,w,B,A,S);H&&(V==="thead"?$.push(H):V==="tfoot"?C.push(H):J.push(H))}return{head:$,body:J,foot:C}}l.parseHtml=m;function p(b,x,w,A,S,k){for(var F=new d.HtmlRowInput(A),G=0;G<A.cells.length;G++){var O=A.cells[G],N=w.getComputedStyle(O);if(S||N.display!=="none"){var $=void 0;k&&($=(0,h.parseCss)(b,O,x,N,w)),F.push({rowSpan:O.rowSpan,colSpan:O.colSpan,styles:$,_element:O,content:v(O)})}}var J=w.getComputedStyle(A);if(F.length>0&&(S||J.display!=="none"))return F}function v(b){var x=b.cloneNode(!0);return x.innerHTML=x.innerHTML.replace(/\n/g,"").replace(/ +/g," "),x.innerHTML=x.innerHTML.split(/<br.*?>/).map(function(w){return w.trim()}).join(`
`),x.innerText||x.textContent||""}},587:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var h=c(148),d=c(360),m=c(200),p=c(323),v=c(291);function b(G,O){var N=new p.DocHandler(G),$=N.getDocumentOptions(),J=N.getGlobalOptions();(0,v.default)(N,J,$,O);var C=(0,d.assign)({},J,$,O),E;typeof window<"u"&&(E=window);var B=x(J,$,O),V=w(J,$,O),H=A(N,C),U=k(N,C,E);return{id:O.tableId,content:U,hooks:V,styles:B,settings:H}}l.parseInput=b;function x(G,O,N){for(var $={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},J=function(V){if(V==="columnStyles"){var H=G[V],U=O[V],Q=N[V];$.columnStyles=(0,d.assign)({},H,U,Q)}else{var K=[G,O,N],re=K.map(function(ie){return ie[V]||{}});$[V]=(0,d.assign)({},re[0],re[1],re[2])}},C=0,E=Object.keys($);C<E.length;C++){var B=E[C];J(B)}return $}function w(G,O,N){for(var $=[G,O,N],J={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},C=0,E=$;C<E.length;C++){var B=E[C];B.didParseCell&&J.didParseCell.push(B.didParseCell),B.willDrawCell&&J.willDrawCell.push(B.willDrawCell),B.didDrawCell&&J.didDrawCell.push(B.didDrawCell),B.willDrawPage&&J.willDrawPage.push(B.willDrawPage),B.didDrawPage&&J.didDrawPage.push(B.didDrawPage)}return J}function A(G,O){var N,$,J,C,E,B,V,H,U,Q,K,re=(0,m.parseSpacing)(O.margin,40/G.scaleFactor()),ie=(N=S(G,O.startY))!==null&&N!==void 0?N:re.top,pe;O.showFoot===!0?pe="everyPage":O.showFoot===!1?pe="never":pe=($=O.showFoot)!==null&&$!==void 0?$:"everyPage";var T;O.showHead===!0?T="everyPage":O.showHead===!1?T="never":T=(J=O.showHead)!==null&&J!==void 0?J:"everyPage";var j=(C=O.useCss)!==null&&C!==void 0?C:!1,z=O.theme||(j?"plain":"striped"),Y=!!O.horizontalPageBreak,ne=(E=O.horizontalPageBreakRepeat)!==null&&E!==void 0?E:null;return{includeHiddenHtml:(B=O.includeHiddenHtml)!==null&&B!==void 0?B:!1,useCss:j,theme:z,startY:ie,margin:re,pageBreak:(V=O.pageBreak)!==null&&V!==void 0?V:"auto",rowPageBreak:(H=O.rowPageBreak)!==null&&H!==void 0?H:"auto",tableWidth:(U=O.tableWidth)!==null&&U!==void 0?U:"auto",showHead:T,showFoot:pe,tableLineWidth:(Q=O.tableLineWidth)!==null&&Q!==void 0?Q:0,tableLineColor:(K=O.tableLineColor)!==null&&K!==void 0?K:200,horizontalPageBreak:Y,horizontalPageBreakRepeat:ne}}function S(G,O){var N=G.getLastAutoTable(),$=G.scaleFactor(),J=G.pageNumber(),C=!1;if(N&&N.startPageNumber){var E=N.startPageNumber+N.pageNumber-1;C=E===J}return typeof O=="number"?O:(O==null||O===!1)&&C&&(N==null?void 0:N.finalY)!=null?N.finalY+20/$:null}function k(G,O,N){var $=O.head||[],J=O.body||[],C=O.foot||[];if(O.html){var E=O.includeHiddenHtml;if(N){var B=(0,h.parseHtml)(G,O.html,N,E,O.useCss)||{};$=B.head||$,J=B.body||$,C=B.foot||$}else console.error("Cannot parse html in non browser environment")}var V=O.columns||F($,J,C);return{columns:V,head:$,body:J,foot:C}}function F(G,O,N){var $=G[0]||O[0]||N[0]||[],J=[];return Object.keys($).filter(function(C){return C!=="_element"}).forEach(function(C){var E=1,B;Array.isArray($)?B=$[parseInt(C)]:B=$[C],typeof B=="object"&&!Array.isArray(B)&&(E=(B==null?void 0:B.colSpan)||1);for(var V=0;V<E;V++){var H=void 0;Array.isArray($)?H=J.length:H=C+(V>0?"_".concat(V):"");var U={dataKey:H};J.push(U)}}),J}},291:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(d,m,p,v){for(var b=function(S){S&&typeof S!="object"&&console.error("The options parameter should be of type object, is: "+typeof S),typeof S.extendWidth<"u"&&(S.tableWidth=S.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof S.margins<"u"&&(typeof S.margin>"u"&&(S.margin=S.margins),console.error("Use of deprecated option: margins, use margin instead.")),S.startY&&typeof S.startY!="number"&&(console.error("Invalid value for startY option",S.startY),delete S.startY),!S.didDrawPage&&(S.afterPageContent||S.beforePageContent||S.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),S.didDrawPage=function(C){d.applyStyles(d.userStyles),S.beforePageContent&&S.beforePageContent(C),d.applyStyles(d.userStyles),S.afterPageContent&&S.afterPageContent(C),d.applyStyles(d.userStyles),S.afterPageAdd&&C.pageNumber>1&&C.afterPageAdd(C),d.applyStyles(d.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(C){S[C]&&console.error('The "'.concat(C,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(C){var E=C[0],B=C[1];S[B]&&(console.error("Use of deprecated option ".concat(B,". Use ").concat(E," instead")),S[E]=S[B])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(C){var E=typeof C=="string"?C:C[0],B=typeof C=="string"?C:C[1];typeof S[E]<"u"&&(typeof S.styles[B]>"u"&&(S.styles[B]=S[E]),console.error("Use of deprecated option: "+E+", use the style "+B+" instead."))});for(var k=0,F=["styles","bodyStyles","headStyles","footStyles"];k<F.length;k++){var G=F[k];h(S[G]||{})}for(var O=S.columnStyles||{},N=0,$=Object.keys(O);N<$.length;N++){var J=$[N];h(O[J]||{})}},x=0,w=[m,p,v];x<w.length;x++){var A=w[x];b(A)}}l.default=c;function h(d){d.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),d.minCellHeight||(d.minCellHeight=d.rowHeight)):d.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),d.cellWidth||(d.cellWidth=d.columnWidth))}},287:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var h=c(913),d=c(662),m=c(200),p=function(){function w(A,S){this.pageNumber=1,this.pageCount=1,this.id=A.id,this.settings=A.settings,this.styles=A.styles,this.hooks=A.hooks,this.columns=S.columns,this.head=S.head,this.body=S.body,this.foot=S.foot}return w.prototype.getHeadHeight=function(A){return this.head.reduce(function(S,k){return S+k.getMaxCellHeight(A)},0)},w.prototype.getFootHeight=function(A){return this.foot.reduce(function(S,k){return S+k.getMaxCellHeight(A)},0)},w.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},w.prototype.callCellHooks=function(A,S,k,F,G,O){for(var N=0,$=S;N<$.length;N++){var J=$[N],C=new d.CellHookData(A,this,k,F,G,O),E=J(C)===!1;if(k.text=Array.isArray(k.text)?k.text:[k.text],E)return!1}return!0},w.prototype.callEndPageHooks=function(A,S){A.applyStyles(A.userStyles);for(var k=0,F=this.hooks.didDrawPage;k<F.length;k++){var G=F[k];G(new d.HookData(A,this,S))}},w.prototype.callWillDrawPageHooks=function(A,S){for(var k=0,F=this.hooks.willDrawPage;k<F.length;k++){var G=F[k];G(new d.HookData(A,this,S))}},w.prototype.getWidth=function(A){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var S=this.columns.reduce(function(F,G){return F+G.wrappedWidth},0);return S}else{var k=this.settings.margin;return A-k.left-k.right}},w}();l.Table=p;var v=function(){function w(A,S,k,F,G){G===void 0&&(G=!1),this.height=0,this.raw=A,A instanceof h.HtmlRowInput&&(this.raw=A._element,this.element=A._element),this.index=S,this.section=k,this.cells=F,this.spansMultiplePages=G}return w.prototype.getMaxCellHeight=function(A){var S=this;return A.reduce(function(k,F){var G;return Math.max(k,((G=S.cells[F.index])===null||G===void 0?void 0:G.height)||0)},0)},w.prototype.hasRowSpan=function(A){var S=this;return A.filter(function(k){var F=S.cells[k.index];return F?F.rowSpan>1:!1}).length>0},w.prototype.canEntireRowFit=function(A,S){return this.getMaxCellHeight(S)<=A},w.prototype.getMinimumRowHeight=function(A,S){var k=this;return A.reduce(function(F,G){var O=k.cells[G.index];if(!O)return 0;var N=S.getLineHeight(O.styles.fontSize),$=O.padding("vertical"),J=$+N;return J>F?J:F},0)},w}();l.Row=v;var b=function(){function w(A,S,k){var F,G;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=S,this.section=k,this.raw=A;var O=A;A!=null&&typeof A=="object"&&!Array.isArray(A)?(this.rowSpan=A.rowSpan||1,this.colSpan=A.colSpan||1,O=(G=(F=A.content)!==null&&F!==void 0?F:A.title)!==null&&G!==void 0?G:A,A._element&&(this.raw=A._element)):(this.rowSpan=1,this.colSpan=1);var N=O!=null?""+O:"",$=/\r\n|\r|\n/g;this.text=N.split($)}return w.prototype.getTextPos=function(){var A;if(this.styles.valign==="top")A=this.y+this.padding("top");else if(this.styles.valign==="bottom")A=this.y+this.height-this.padding("bottom");else{var S=this.height-this.padding("vertical");A=this.y+S/2+this.padding("top")}var k;if(this.styles.halign==="right")k=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var F=this.width-this.padding("horizontal");k=this.x+F/2+this.padding("left")}else k=this.x+this.padding("left");return{x:k,y:A}},w.prototype.getContentHeight=function(A,S){S===void 0&&(S=1.15);var k=Array.isArray(this.text)?this.text.length:1,F=this.styles.fontSize/A*S,G=k*F+this.padding("vertical");return Math.max(G,this.styles.minCellHeight)},w.prototype.padding=function(A){var S=(0,m.parseSpacing)(this.styles.cellPadding,0);return A==="vertical"?S.top+S.bottom:A==="horizontal"?S.left+S.right:S[A]},w}();l.Cell=b;var x=function(){function w(A,S,k){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=A,this.raw=S,this.index=k}return w.prototype.getMaxCustomCellWidth=function(A){for(var S=0,k=0,F=A.allRows();k<F.length;k++){var G=F[k],O=G.cells[this.index];O&&typeof O.styles.cellWidth=="number"&&(S=Math.max(S,O.styles.cellWidth))}return S},w}();l.Column=x},360:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(h,d,m,p,v){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(h),x=1;x<arguments.length;x++){var w=arguments[x];if(w!=null)for(var A in w)Object.prototype.hasOwnProperty.call(w,A)&&(b[A]=w[A])}return b}l.assign=c},858:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var h=c(323),d=c(287),m=c(189),p=c(913),v=c(360);function b(G,O){var N=new h.DocHandler(G),$=x(O,N.scaleFactor()),J=new d.Table(O,$);return(0,m.calculateWidths)(N,J),N.applyStyles(N.userStyles),J}l.createTable=b;function x(G,O){var N=G.content,$=k(N.columns);if(N.head.length===0){var J=A($,"head");J&&N.head.push(J)}if(N.foot.length===0){var J=A($,"foot");J&&N.foot.push(J)}var C=G.settings.theme,E=G.styles;return{columns:$,head:w("head",N.head,$,E,C,O),body:w("body",N.body,$,E,C,O),foot:w("foot",N.foot,$,E,C,O)}}function w(G,O,N,$,J,C){var E={},B=O.map(function(V,H){for(var U=0,Q={},K=0,re=0,ie=0,pe=N;ie<pe.length;ie++){var T=pe[ie];if(E[T.index]==null||E[T.index].left===0)if(re===0){var j=void 0;Array.isArray(V)?j=V[T.index-K-U]:j=V[T.dataKey];var z={};typeof j=="object"&&!Array.isArray(j)&&(z=(j==null?void 0:j.styles)||{});var Y=F(G,T,H,J,$,C,z),ne=new d.Cell(j,Y,G);Q[T.dataKey]=ne,Q[T.index]=ne,re=ne.colSpan-1,E[T.index]={left:ne.rowSpan-1,times:re}}else re--,K++;else E[T.index].left--,re=E[T.index].times,U++}return new d.Row(V,H,G,Q)});return B}function A(G,O){var N={};return G.forEach(function($){if($.raw!=null){var J=S(O,$.raw);J!=null&&(N[$.dataKey]=J)}}),Object.keys(N).length>0?N:null}function S(G,O){if(G==="head"){if(typeof O=="object")return O.header||O.title||null;if(typeof O=="string"||typeof O=="number")return O}else if(G==="foot"&&typeof O=="object")return O.footer;return null}function k(G){return G.map(function(O,N){var $,J,C;return typeof O=="object"?C=(J=($=O.dataKey)!==null&&$!==void 0?$:O.key)!==null&&J!==void 0?J:N:C=N,new d.Column(C,O,N)})}function F(G,O,N,$,J,C,E){var B=(0,p.getTheme)($),V;G==="head"?V=J.headStyles:G==="body"?V=J.bodyStyles:G==="foot"&&(V=J.footStyles);var H=(0,v.assign)({},B.table,B[G],J.styles,V),U=J.columnStyles[O.dataKey]||J.columnStyles[O.index]||{},Q=G==="body"?U:{},K=G==="body"&&N%2===0?(0,v.assign)({},B.alternateRow,J.alternateRowStyles):{},re=(0,p.defaultStyles)(C),ie=(0,v.assign)({},re,H,K,Q);return(0,v.assign)(ie,E)}},49:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var h=c(200),d=c(287),m=c(323),p=c(360),v=c(938),b=c(435);function x(H,U){var Q=U.settings,K=Q.startY,re=Q.margin,ie={x:re.left,y:K},pe=U.getHeadHeight(U.columns)+U.getFootHeight(U.columns),T=K+re.bottom+pe;if(Q.pageBreak==="avoid"){var j=U.body,z=j.reduce(function(ce,fe){return ce+fe.height},0);T+=z}var Y=new m.DocHandler(H);(Q.pageBreak==="always"||Q.startY!=null&&T>Y.pageSize().height)&&(V(Y),ie.y=re.top),U.callWillDrawPageHooks(Y,ie);var ne=(0,p.assign)({},ie);U.startPageNumber=Y.pageNumber(),Q.horizontalPageBreak?w(Y,U,ne,ie):(Y.applyStyles(Y.userStyles),(Q.showHead==="firstPage"||Q.showHead==="everyPage")&&U.head.forEach(function(ce){return $(Y,U,ce,ie,U.columns)}),Y.applyStyles(Y.userStyles),U.body.forEach(function(ce,fe){var de=fe===U.body.length-1;N(Y,U,ce,de,ne,ie,U.columns)}),Y.applyStyles(Y.userStyles),(Q.showFoot==="lastPage"||Q.showFoot==="everyPage")&&U.foot.forEach(function(ce){return $(Y,U,ce,ie,U.columns)})),(0,h.addTableBorder)(Y,U,ne,ie),U.callEndPageHooks(Y,ie),U.finalY=ie.y,H.lastAutoTable=U,H.previousAutoTable=U,H.autoTable&&(H.autoTable.previous=U),Y.applyStyles(Y.userStyles)}l.drawTable=x;function w(H,U,Q,K){var re=(0,b.calculateAllColumnsCanFitInPage)(H,U);re.map(function(ie,pe){H.applyStyles(H.userStyles),pe>0?B(H,U,Q,K,ie.columns):A(H,U,K,ie.columns),S(H,U,Q,K,ie.columns),k(H,U,K,ie.columns)})}function A(H,U,Q,K){var re=U.settings;H.applyStyles(H.userStyles),(re.showHead==="firstPage"||re.showHead==="everyPage")&&U.head.forEach(function(ie){return $(H,U,ie,Q,K)})}function S(H,U,Q,K,re){H.applyStyles(H.userStyles),U.body.forEach(function(ie,pe){var T=pe===U.body.length-1;N(H,U,ie,T,Q,K,re)})}function k(H,U,Q,K){var re=U.settings;H.applyStyles(H.userStyles),(re.showFoot==="lastPage"||re.showFoot==="everyPage")&&U.foot.forEach(function(ie){return $(H,U,ie,Q,K)})}function F(H,U,Q){var K=Q.getLineHeight(H.styles.fontSize),re=H.padding("vertical"),ie=Math.floor((U-re)/K);return Math.max(0,ie)}function G(H,U,Q,K){var re={};H.spansMultiplePages=!0,H.height=0;for(var ie=0,pe=0,T=Q.columns;pe<T.length;pe++){var j=T[pe],z=H.cells[j.index];if(z){Array.isArray(z.text)||(z.text=[z.text]);var Y=new d.Cell(z.raw,z.styles,z.section);Y=(0,p.assign)(Y,z),Y.text=[];var ne=F(z,U,K);z.text.length>ne&&(Y.text=z.text.splice(ne,z.text.length));var ce=K.scaleFactor(),fe=K.getLineHeightFactor();z.contentHeight=z.getContentHeight(ce,fe),z.contentHeight>=U&&(z.contentHeight=U,Y.styles.minCellHeight-=U),z.contentHeight>H.height&&(H.height=z.contentHeight),Y.contentHeight=Y.getContentHeight(ce,fe),Y.contentHeight>ie&&(ie=Y.contentHeight),re[j.index]=Y}}var de=new d.Row(H.raw,-1,H.section,re,!0);de.height=ie;for(var Ee=0,Se=Q.columns;Ee<Se.length;Ee++){var j=Se[Ee],Y=de.cells[j.index];Y&&(Y.height=de.height);var z=H.cells[j.index];z&&(z.height=H.height)}return de}function O(H,U,Q,K){var re=H.pageSize().height,ie=K.settings.margin,pe=ie.top+ie.bottom,T=re-pe;U.section==="body"&&(T-=K.getHeadHeight(K.columns)+K.getFootHeight(K.columns));var j=U.getMinimumRowHeight(K.columns,H),z=j<Q;if(j>T)return console.error("Will not be able to print row ".concat(U.index," correctly since it's minimum height is larger than page height")),!0;if(!z)return!1;var Y=U.hasRowSpan(K.columns),ne=U.getMaxCellHeight(K.columns)>T;return ne?(Y&&console.error("The content of row ".concat(U.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(Y||K.settings.rowPageBreak==="avoid")}function N(H,U,Q,K,re,ie,pe){var T=E(H,U,K,ie);if(Q.canEntireRowFit(T,pe))$(H,U,Q,ie,pe);else if(O(H,Q,T,U)){var j=G(Q,T,U,H);$(H,U,Q,ie,pe),B(H,U,re,ie,pe),N(H,U,j,K,re,ie,pe)}else B(H,U,re,ie,pe),N(H,U,Q,K,re,ie,pe)}function $(H,U,Q,K,re){K.x=U.settings.margin.left;for(var ie=0,pe=re;ie<pe.length;ie++){var T=pe[ie],j=Q.cells[T.index];if(!j){K.x+=T.width;continue}H.applyStyles(j.styles),j.x=K.x,j.y=K.y;var z=U.callCellHooks(H,U.hooks.willDrawCell,j,Q,T,K);if(z===!1){K.x+=T.width;continue}J(H,j,K);var Y=j.getTextPos();(0,v.default)(j.text,Y.x,Y.y,{halign:j.styles.halign,valign:j.styles.valign,maxWidth:Math.ceil(j.width-j.padding("left")-j.padding("right"))},H.getDocument()),U.callCellHooks(H,U.hooks.didDrawCell,j,Q,T,K),K.x+=T.width}K.y+=Q.height}function J(H,U,Q){var K=U.styles;if(H.getDocument().setFillColor(H.getDocument().getFillColor()),typeof K.lineWidth=="number"){var re=(0,h.getFillStyle)(K.lineWidth,K.fillColor);re&&H.rect(U.x,Q.y,U.width,U.height,re)}else typeof K.lineWidth=="object"&&(K.fillColor&&H.rect(U.x,Q.y,U.width,U.height,"F"),C(H,U,Q,K.lineWidth))}function C(H,U,Q,K){var re,ie,pe,T;K.top&&(re=Q.x,ie=Q.y,pe=Q.x+U.width,T=Q.y,K.right&&(pe+=.5*K.right),K.left&&(re-=.5*K.left),j(K.top,re,ie,pe,T)),K.bottom&&(re=Q.x,ie=Q.y+U.height,pe=Q.x+U.width,T=Q.y+U.height,K.right&&(pe+=.5*K.right),K.left&&(re-=.5*K.left),j(K.bottom,re,ie,pe,T)),K.left&&(re=Q.x,ie=Q.y,pe=Q.x,T=Q.y+U.height,K.top&&(ie-=.5*K.top),K.bottom&&(T+=.5*K.bottom),j(K.left,re,ie,pe,T)),K.right&&(re=Q.x+U.width,ie=Q.y,pe=Q.x+U.width,T=Q.y+U.height,K.top&&(ie-=.5*K.top),K.bottom&&(T+=.5*K.bottom),j(K.right,re,ie,pe,T));function j(z,Y,ne,ce,fe){H.getDocument().setLineWidth(z),H.getDocument().line(Y,ne,ce,fe,"S")}}function E(H,U,Q,K){var re=U.settings.margin.bottom,ie=U.settings.showFoot;return(ie==="everyPage"||ie==="lastPage"&&Q)&&(re+=U.getFootHeight(U.columns)),H.pageSize().height-K.y-re}function B(H,U,Q,K,re){re===void 0&&(re=[]),H.applyStyles(H.userStyles),U.settings.showFoot==="everyPage"&&U.foot.forEach(function(pe){return $(H,U,pe,K,re)}),U.callEndPageHooks(H,K);var ie=U.settings.margin;(0,h.addTableBorder)(H,U,Q,K),V(H),U.pageNumber++,U.pageCount++,K.x=ie.left,K.y=ie.top,Q.y=ie.top,U.callWillDrawPageHooks(H,K),U.settings.showHead==="everyPage"&&(U.head.forEach(function(pe){return $(H,U,pe,K,re)}),H.applyStyles(H.userStyles))}l.addPage=B;function V(H){var U=H.pageNumber();H.setPage(U+1);var Q=H.pageNumber();return Q===U?(H.addPage(),!0):!1}},435:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var h=c(200);function d(p,v,b){var x;b===void 0&&(b={});var w=(0,h.getPageAvailableWidth)(p,v),A=new Map,S=[],k=[],F=[];v.settings.horizontalPageBreakRepeat,Array.isArray(v.settings.horizontalPageBreakRepeat)?F=v.settings.horizontalPageBreakRepeat:(typeof v.settings.horizontalPageBreakRepeat=="string"||typeof v.settings.horizontalPageBreakRepeat=="number")&&(F=[v.settings.horizontalPageBreakRepeat]),F.forEach(function($){var J=v.columns.find(function(C){return C.dataKey===$||C.index===$});J&&!A.has(J.index)&&(A.set(J.index,!0),S.push(J.index),k.push(v.columns[J.index]),w-=J.wrappedWidth)});for(var G=!0,O=(x=b==null?void 0:b.start)!==null&&x!==void 0?x:0;O<v.columns.length;){if(A.has(O)){O++;continue}var N=v.columns[O].wrappedWidth;if(G||w>=N)G=!1,S.push(O),k.push(v.columns[O]),w-=N;else break;O++}return{colIndexes:S,columns:k,lastIndex:O-1}}function m(p,v){for(var b=[],x=0;x<v.columns.length;x++){var w=d(p,v,{start:x});w.columns.length&&(b.push(w),x=w.lastIndex)}return b}l.calculateAllColumnsCanFitInPage=m},189:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var h=c(200);function d(S,k){m(S,k);var F=[],G=0;k.columns.forEach(function(N){var $=N.getMaxCustomCellWidth(k);$?N.width=$:(N.width=N.wrappedWidth,F.push(N)),G+=N.width});var O=k.getWidth(S.pageSize().width)-G;O&&(O=p(F,O,function(N){return Math.max(N.minReadableWidth,N.minWidth)})),O&&(O=p(F,O,function(N){return N.minWidth})),O=Math.abs(O),!k.settings.horizontalPageBreak&&O>.1/S.scaleFactor()&&(O=O<1?O:Math.round(O),console.warn("Of the table content, ".concat(O," units width could not fit page"))),b(k),x(k,S),v(k)}l.calculateWidths=d;function m(S,k){var F=S.scaleFactor(),G=k.settings.horizontalPageBreak,O=(0,h.getPageAvailableWidth)(S,k);k.allRows().forEach(function(N){for(var $=0,J=k.columns;$<J.length;$++){var C=J[$],E=N.cells[C.index];if(E){var B=k.hooks.didParseCell;k.callCellHooks(S,B,E,N,C,null);var V=E.padding("horizontal");E.contentWidth=(0,h.getStringWidth)(E.text,E.styles,S)+V;var H=(0,h.getStringWidth)(E.text.join(" ").split(/\s+/),E.styles,S);if(E.minReadableWidth=H+E.padding("horizontal"),typeof E.styles.cellWidth=="number")E.minWidth=E.styles.cellWidth,E.wrappedWidth=E.styles.cellWidth;else if(E.styles.cellWidth==="wrap"||G===!0)E.contentWidth>O?(E.minWidth=O,E.wrappedWidth=O):(E.minWidth=E.contentWidth,E.wrappedWidth=E.contentWidth);else{var U=10/F;E.minWidth=E.styles.minCellWidth||U,E.wrappedWidth=E.contentWidth,E.minWidth>E.wrappedWidth&&(E.wrappedWidth=E.minWidth)}}}}),k.allRows().forEach(function(N){for(var $=0,J=k.columns;$<J.length;$++){var C=J[$],E=N.cells[C.index];if(E&&E.colSpan===1)C.wrappedWidth=Math.max(C.wrappedWidth,E.wrappedWidth),C.minWidth=Math.max(C.minWidth,E.minWidth),C.minReadableWidth=Math.max(C.minReadableWidth,E.minReadableWidth);else{var B=k.styles.columnStyles[C.dataKey]||k.styles.columnStyles[C.index]||{},V=B.cellWidth||B.minCellWidth;V&&typeof V=="number"&&(C.minWidth=V,C.wrappedWidth=V)}E&&(E.colSpan>1&&!C.minWidth&&(C.minWidth=E.minWidth),E.colSpan>1&&!C.wrappedWidth&&(C.wrappedWidth=E.minWidth))}})}function p(S,k,F){for(var G=k,O=S.reduce(function(U,Q){return U+Q.wrappedWidth},0),N=0;N<S.length;N++){var $=S[N],J=$.wrappedWidth/O,C=G*J,E=$.width+C,B=F($),V=E<B?B:E;k-=V-$.width,$.width=V}if(k=Math.round(k*1e10)/1e10,k){var H=S.filter(function(U){return k<0?U.width>F(U):!0});H.length&&(k=p(H,k,F))}return k}l.resizeColumns=p;function v(S){for(var k={},F=1,G=S.allRows(),O=0;O<G.length;O++)for(var N=G[O],$=0,J=S.columns;$<J.length;$++){var C=J[$],E=k[C.index];if(F>1)F--,delete N.cells[C.index];else if(E)E.cell.height+=N.height,F=E.cell.colSpan,delete N.cells[C.index],E.left--,E.left<=1&&delete k[C.index];else{var B=N.cells[C.index];if(!B)continue;if(B.height=N.height,B.rowSpan>1){var V=G.length-O,H=B.rowSpan>V?V:B.rowSpan;k[C.index]={cell:B,left:H,row:N}}}}}function b(S){for(var k=S.allRows(),F=0;F<k.length;F++)for(var G=k[F],O=null,N=0,$=0,J=0;J<S.columns.length;J++){var C=S.columns[J];if($-=1,$>1&&S.columns[J+1])N+=C.width,delete G.cells[C.index];else if(O){var E=O;delete G.cells[C.index],O=null,E.width=C.width+N}else{var E=G.cells[C.index];if(!E)continue;if($=E.colSpan,N=0,E.colSpan>1){O=E,N+=C.width;continue}E.width=C.width+N}}}function x(S,k){for(var F={count:0,height:0},G=0,O=S.allRows();G<O.length;G++){for(var N=O[G],$=0,J=S.columns;$<J.length;$++){var C=J[$],E=N.cells[C.index];if(E){k.applyStyles(E.styles,!0);var B=E.width-E.padding("horizontal");if(E.styles.overflow==="linebreak")E.text=k.splitTextToSize(E.text,B+1/k.scaleFactor(),{fontSize:E.styles.fontSize});else if(E.styles.overflow==="ellipsize")E.text=w(E.text,B,E.styles,k,"...");else if(E.styles.overflow==="hidden")E.text=w(E.text,B,E.styles,k,"");else if(typeof E.styles.overflow=="function"){var V=E.styles.overflow(E.text,B);typeof V=="string"?E.text=[V]:E.text=V}E.contentHeight=E.getContentHeight(k.scaleFactor(),k.getLineHeightFactor());var H=E.contentHeight/E.rowSpan;E.rowSpan>1&&F.count*F.height<H*E.rowSpan?F={height:H,count:E.rowSpan}:F&&F.count>0&&F.height>H&&(H=F.height),H>N.height&&(N.height=H)}}F.count--}}function w(S,k,F,G,O){return S.map(function(N){return A(N,k,F,G,O)})}l.ellipsize=w;function A(S,k,F,G,O){var N=1e4*G.scaleFactor();if(k=Math.ceil(k*N)/N,k>=(0,h.getStringWidth)(S,F,G))return S;for(;k<(0,h.getStringWidth)(S+O,F,G)&&!(S.length<=1);)S=S.substring(0,S.length-1);return S.trim()+O}},84:function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}var o={};return function(){var a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=s(790),c=s(587),h=s(49),d=s(858),m=s(287);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return m.Table}});var p=s(662);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var v=s(287);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return v.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return v.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return v.Row}});function b(k){(0,l.default)(k)}a.applyPlugin=b;function x(k,F){var G=(0,c.parseInput)(k,F),O=(0,d.createTable)(k,G);(0,h.drawTable)(k,O)}function w(k,F){var G=(0,c.parseInput)(k,F);return(0,d.createTable)(k,G)}a.__createTable=w;function A(k,F){(0,h.drawTable)(k,F)}a.__drawTable=A;try{var S=s(84);S.jsPDF&&(S=S.jsPDF),b(S)}catch{}a.default=x}(),o}()})})(cN);var hN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},De,P0=P0||{},tt=hN||self;function gd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function _u(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function fN(t){return Object.prototype.hasOwnProperty.call(t,ag)&&t[ag]||(t[ag]=++dN)}var ag="closure_uid_"+(1e9*Math.random()>>>0),dN=0;function pN(t,e,n){return t.call.apply(t.bind,arguments)}function gN(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function ii(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ii=pN:ii=gN,ii.apply(null,arguments)}function Dh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function On(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function so(){this.s=this.s,this.o=this.o}var mN=0;so.prototype.s=!1;so.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),mN!=0)&&fN(this)};so.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ib=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function C0(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Uy(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(gd(i)){const r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function ri(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ri.prototype.h=function(){this.defaultPrevented=!0};var yN=function(){if(!tt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{tt.addEventListener("test",()=>{},e),tt.removeEventListener("test",()=>{},e)}catch{}return t}();function $c(t){return/^[\s\xa0]*$/.test(t)}function md(){var t=tt.navigator;return t&&(t=t.userAgent)?t:""}function Sr(t){return md().indexOf(t)!=-1}function N0(t){return N0[" "](t),t}N0[" "]=function(){};function vN(t,e){var n=uL;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var _N=Sr("Opera"),ll=Sr("Trident")||Sr("MSIE"),rb=Sr("Edge"),dm=rb||ll,sb=Sr("Gecko")&&!(md().toLowerCase().indexOf("webkit")!=-1&&!Sr("Edge"))&&!(Sr("Trident")||Sr("MSIE"))&&!Sr("Edge"),wN=md().toLowerCase().indexOf("webkit")!=-1&&!Sr("Edge");function ob(){var t=tt.document;return t?t.documentMode:void 0}var pm;e:{var lg="",cg=function(){var t=md();if(sb)return/rv:([^\);]+)(\)|;)/.exec(t);if(rb)return/Edge\/([\d\.]+)/.exec(t);if(ll)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(wN)return/WebKit\/(\S+)/.exec(t);if(_N)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(cg&&(lg=cg?cg[1]:""),ll){var ug=ob();if(ug!=null&&ug>parseFloat(lg)){pm=String(ug);break e}}pm=lg}var gm;if(tt.document&&ll){var qy=ob();gm=qy||parseInt(pm,10)||void 0}else gm=void 0;var bN=gm;function Kc(t,e){if(ri.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sb){e:{try{N0(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:AN[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Kc.$.h.call(this)}}On(Kc,ri);var AN={2:"touch",3:"pen",4:"mouse"};Kc.prototype.h=function(){Kc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var wu="closure_listenable_"+(1e6*Math.random()|0),SN=0;function xN(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++SN,this.fa=this.ia=!1}function yd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function L0(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function EN(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function ab(t){const e={};for(const n in t)e[n]=t[n];return e}const Hy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lb(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<Hy.length;s++)n=Hy[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function vd(t){this.src=t,this.g={},this.h=0}vd.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=ym(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new xN(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function mm(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=ib(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(yd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ym(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var R0="closure_lm_"+(1e6*Math.random()|0),hg={};function cb(t,e,n,i,r){if(i&&i.once)return hb(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)cb(t,e[s],n,i,r);return null}return n=O0(n),t&&t[wu]?t.O(e,n,_u(i)?!!i.capture:!!i,r):ub(t,e,n,!1,i,r)}function ub(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=_u(r)?!!r.capture:!!r,a=D0(t);if(a||(t[R0]=a=new vd(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=TN(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)yN||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(db(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function TN(){function t(n){return e.call(t.src,t.listener,n)}const e=IN;return t}function hb(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)hb(t,e[s],n,i,r);return null}return n=O0(n),t&&t[wu]?t.P(e,n,_u(i)?!!i.capture:!!i,r):ub(t,e,n,!0,i,r)}function fb(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)fb(t,e[s],n,i,r);else i=_u(i)?!!i.capture:!!i,n=O0(n),t&&t[wu]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=ym(s,n,i,r),-1<n&&(yd(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=D0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ym(e,n,i,r)),(n=-1<t?e[t]:null)&&k0(n))}function k0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[wu])mm(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(db(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=D0(e))?(mm(n,t),n.h==0&&(n.src=null,e[R0]=null)):yd(t)}}}function db(t){return t in hg?hg[t]:hg[t]="on"+t}function IN(t,e){if(t.fa)t=!0;else{e=new Kc(e,this);var n=t.listener,i=t.la||t.src;t.ia&&k0(t),t=n.call(i,e)}return t}function D0(t){return t=t[R0],t instanceof vd?t:null}var fg="__closure_events_fn_"+(1e9*Math.random()>>>0);function O0(t){return typeof t=="function"?t:(t[fg]||(t[fg]=function(e){return t.handleEvent(e)}),t[fg])}function kn(){so.call(this),this.i=new vd(this),this.S=this,this.J=null}On(kn,so);kn.prototype[wu]=!0;kn.prototype.removeEventListener=function(t,e,n,i){fb(this,t,e,n,i)};function zn(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new ri(e,t);else if(e instanceof ri)e.target=e.target||t;else{var r=e;e=new ri(i,t),lb(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Oh(o,i,!0,e)&&r}if(o=e.g=t,r=Oh(o,i,!0,e)&&r,r=Oh(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=Oh(o,i,!1,e)&&r}kn.prototype.N=function(){if(kn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)yd(n[i]);delete t.g[e],t.h--}}this.J=null};kn.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};kn.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Oh(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&mm(t.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var M0=tt.JSON.stringify;class PN{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function CN(){var t=F0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class NN{constructor(){this.h=this.g=null}add(e,n){const i=pb.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var pb=new PN(()=>new LN,t=>t.reset());class LN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function RN(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function kN(t){tt.setTimeout(()=>{throw t},0)}let Yc,Xc=!1,F0=new NN,gb=()=>{const t=tt.Promise.resolve(void 0);Yc=()=>{t.then(DN)}};var DN=()=>{for(var t;t=CN();){try{t.h.call(t.g)}catch(n){kN(n)}var e=pb;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Xc=!1};function _d(t,e){kn.call(this),this.h=t||1,this.g=e||tt,this.j=ii(this.qb,this),this.l=Date.now()}On(_d,kn);De=_d.prototype;De.ga=!1;De.T=null;De.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zn(this,"tick"),this.ga&&(j0(this),this.start()))}};De.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function j0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}De.N=function(){_d.$.N.call(this),j0(this),delete this.g};function V0(t,e,n){if(typeof t=="function")n&&(t=ii(t,n));else if(t&&typeof t.handleEvent=="function")t=ii(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:tt.setTimeout(t,e||0)}function mb(t){t.g=V0(()=>{t.g=null,t.i&&(t.i=!1,mb(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class ON extends so{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mb(this)}N(){super.N(),this.g&&(tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jc(t){so.call(this),this.h=t,this.g={}}On(Jc,so);var zy=[];function yb(t,e,n,i){Array.isArray(n)||(n&&(zy[0]=n.toString()),n=zy);for(var r=0;r<n.length;r++){var s=cb(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function vb(t){L0(t.g,function(e,n){this.g.hasOwnProperty(n)&&k0(e)},t),t.g={}}Jc.prototype.N=function(){Jc.$.N.call(this),vb(this)};Jc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wd(){this.g=!0}wd.prototype.Ea=function(){this.g=!1};function MN(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var d=h.split("_");o=2<=d.length&&d[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function FN(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function Ga(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+VN(t,n)+(i?" "+i:"")})}function jN(t,e){t.info(function(){return"TIMEOUT: "+e})}wd.prototype.info=function(){};function VN(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return M0(n)}catch{return e}}var sa={},Wy=null;function bd(){return Wy=Wy||new kn}sa.Ta="serverreachability";function _b(t){ri.call(this,sa.Ta,t)}On(_b,ri);function Qc(t){const e=bd();zn(e,new _b(e))}sa.STAT_EVENT="statevent";function wb(t,e){ri.call(this,sa.STAT_EVENT,t),this.stat=e}On(wb,ri);function hi(t){const e=bd();zn(e,new wb(e,t))}sa.Ua="timingevent";function bb(t,e){ri.call(this,sa.Ua,t),this.size=e}On(bb,ri);function bu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return tt.setTimeout(function(){t()},e)}var Ad={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ab={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function B0(){}B0.prototype.h=null;function Gy(t){return t.h||(t.h=t.i())}function Sb(){}var Au={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function U0(){ri.call(this,"d")}On(U0,ri);function q0(){ri.call(this,"c")}On(q0,ri);var vm;function Sd(){}On(Sd,B0);Sd.prototype.g=function(){return new XMLHttpRequest};Sd.prototype.i=function(){return{}};vm=new Sd;function Su(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Jc(this),this.P=BN,t=dm?125:void 0,this.V=new _d(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new xb}function xb(){this.i=null,this.g="",this.h=!1}var BN=45e3,_m={},bf={};De=Su.prototype;De.setTimeout=function(t){this.P=t};function wm(t,e,n){t.L=1,t.v=Ed(cs(e)),t.s=n,t.S=!0,Eb(t,null)}function Eb(t,e){t.G=Date.now(),xu(t),t.A=cs(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),kb(n.i,"t",i),t.C=0,n=t.l.J,t.h=new xb,t.g=eA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new ON(ii(t.Pa,t,t.g),t.O)),yb(t.U,t.g,"readystatechange",t.nb),e=t.I?ab(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Qc(),MN(t.j,t.u,t.A,t.m,t.W,t.s)}De.nb=function(t){t=t.target;const e=this.M;e&&Ir(t)==3?e.l():this.Pa(t)};De.Pa=function(t){try{if(t==this.g)e:{const h=Ir(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||dm||this.g&&(this.h.h||this.g.ja()||Xy(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?Qc(3):Qc(2)),xd(this);var n=this.g.da();this.ca=n;t:if(Tb(this)){var i=Xy(this.g);t="";var r=i.length,s=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lo(this),Cc(this);var o="";break t}this.h.i=new tt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,FN(this.j,this.u,this.A,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$c(a)){var c=a;break t}}c=null}if(n=c)Ga(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bm(this,n);else{this.i=!1,this.o=3,hi(12),Lo(this),Cc(this);break e}}this.S?(Ib(this,h,o),dm&&this.i&&h==3&&(yb(this.U,this.V,"tick",this.mb),this.V.start())):(Ga(this.j,this.m,o,null),bm(this,o)),h==4&&Lo(this),this.i&&!this.J&&(h==4?Xb(this.l,this):(this.i=!1,xu(this)))}else aL(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,hi(12)):(this.o=0,hi(13)),Lo(this),Cc(this)}}}catch{}finally{}};function Tb(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function Ib(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=UN(t,n),r==bf){e==4&&(t.o=4,hi(14),i=!1),Ga(t.j,t.m,null,"[Incomplete Response]");break}else if(r==_m){t.o=4,hi(15),Ga(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Ga(t.j,t.m,r,null),bm(t,r);Tb(t)&&r!=bf&&r!=_m&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,hi(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),K0(e),e.M=!0,hi(11))):(Ga(t.j,t.m,n,"[Invalid Chunked Response]"),Lo(t),Cc(t))}De.mb=function(){if(this.g){var t=Ir(this.g),e=this.g.ja();this.C<e.length&&(xd(this),Ib(this,t,e),this.i&&t!=4&&xu(this))}};function UN(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?bf:(n=Number(e.substring(n,i)),isNaN(n)?_m:(i+=1,i+n>e.length?bf:(e=e.slice(i,i+n),t.C=i+n,e)))}De.cancel=function(){this.J=!0,Lo(this)};function xu(t){t.Y=Date.now()+t.P,Pb(t,t.P)}function Pb(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=bu(ii(t.lb,t),e)}function xd(t){t.B&&(tt.clearTimeout(t.B),t.B=null)}De.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(jN(this.j,this.A),this.L!=2&&(Qc(),hi(17)),Lo(this),this.o=2,Cc(this)):Pb(this,this.Y-t)};function Cc(t){t.l.H==0||t.J||Xb(t.l,t)}function Lo(t){xd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,j0(t.V),vb(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function bm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Am(n.i,t))){if(!t.K&&Am(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)xf(n),Pd(n);else break e;$0(n),hi(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=bu(ii(n.ib,n),6e3));if(1>=Mb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ro(n,11)}else if((t.K||n.g==t)&&xf(n),!$c(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const h=c[3];h!=null&&(n.ra=h,n.l.info("VER="+n.ra));const d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const m=c[5];m!=null&&typeof m=="number"&&0<m&&(i=1.5*m,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const p=t.g;if(p){const v=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=i.i;s.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(H0(s,s.h),s.h=null))}if(i.F){const b=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(i.Da=b,zt(i.I,i.F,b))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=Zb(i,i.J?i.pa:null,i.Y),o.K){Fb(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(xd(a),xu(a)),i.g=o}else Kb(i);0<n.j.length&&Cd(n)}else c[0]!="stop"&&c[0]!="close"||Ro(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ro(n,7):G0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Qc(4)}catch{}}function qN(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(gd(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function HN(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(gd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Cb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(gd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=HN(t),i=qN(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var Nb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zN(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Uo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Uo){this.h=t.h,Af(this,t.j),this.s=t.s,this.g=t.g,Sf(this,t.m),this.l=t.l;var e=t.i,n=new Zc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),$y(this,n),this.o=t.o}else t&&(e=String(t).match(Nb))?(this.h=!1,Af(this,e[1]||"",!0),this.s=vc(e[2]||""),this.g=vc(e[3]||"",!0),Sf(this,e[4]),this.l=vc(e[5]||"",!0),$y(this,e[6]||"",!0),this.o=vc(e[7]||"")):(this.h=!1,this.i=new Zc(null,this.h))}Uo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(_c(e,Ky,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(_c(e,Ky,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(_c(n,n.charAt(0)=="/"?$N:GN,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",_c(n,YN)),t.join("")};function cs(t){return new Uo(t)}function Af(t,e,n){t.j=n?vc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Sf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function $y(t,e,n){e instanceof Zc?(t.i=e,XN(t.i,t.h)):(n||(e=_c(e,KN)),t.i=new Zc(e,t.h))}function zt(t,e,n){t.i.set(e,n)}function Ed(t){return zt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function _c(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,WN),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function WN(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ky=/[#\/\?@]/g,GN=/[#\?:]/g,$N=/[#\?]/g,KN=/[#\?@]/g,YN=/#/g;function Zc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function oo(t){t.g||(t.g=new Map,t.h=0,t.i&&zN(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}De=Zc.prototype;De.add=function(t,e){oo(this),this.i=null,t=Sl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Lb(t,e){oo(t),e=Sl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Rb(t,e){return oo(t),e=Sl(t,e),t.g.has(e)}De.forEach=function(t,e){oo(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};De.ta=function(){oo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};De.Z=function(t){oo(this);let e=[];if(typeof t=="string")Rb(this,t)&&(e=e.concat(this.g.get(Sl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};De.set=function(t,e){return oo(this),this.i=null,t=Sl(this,t),Rb(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};De.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function kb(t,e,n){Lb(t,e),0<n.length&&(t.i=null,t.g.set(Sl(t,e),C0(n)),t.h+=n.length)}De.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function Sl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function XN(t,e){e&&!t.j&&(oo(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(Lb(this,i),kb(this,r,n))},t)),t.j=e}var JN=class{constructor(t,e){this.g=t,this.map=e}};function Db(t){this.l=t||QN,tt.PerformanceNavigationTiming?(t=tt.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(tt.g&&tt.g.Ka&&tt.g.Ka()&&tt.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var QN=10;function Ob(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Mb(t){return t.h?1:t.g?t.g.size:0}function Am(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function H0(t,e){t.g?t.g.add(e):t.h=e}function Fb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Db.prototype.cancel=function(){if(this.i=jb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function jb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return C0(t.i)}var ZN=class{stringify(t){return tt.JSON.stringify(t,void 0)}parse(t){return tt.JSON.parse(t,void 0)}};function eL(){this.g=new ZN}function tL(t,e,n){const i=n||"";try{Cb(t,function(r,s){let o=r;_u(r)&&(o=M0(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function nL(t,e){const n=new wd;if(tt.Image){const i=new Image;i.onload=Dh(Mh,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Dh(Mh,n,i,"TestLoadImage: error",!1,e),i.onabort=Dh(Mh,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Dh(Mh,n,i,"TestLoadImage: timeout",!1,e),tt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Mh(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Eu(t){this.l=t.ec||null,this.j=t.ob||!1}On(Eu,B0);Eu.prototype.g=function(){return new Td(this.l,this.j)};Eu.prototype.i=function(t){return function(){return t}}({});function Td(t,e){kn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=z0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}On(Td,kn);var z0=0;De=Td.prototype;De.open=function(t,e){if(this.readyState!=z0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,eu(this)};De.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||tt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};De.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tu(this)),this.readyState=z0};De.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,eu(this)),this.g&&(this.readyState=3,eu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof tt.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vb(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Vb(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}De.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Tu(this):eu(this),this.readyState==3&&Vb(this)}};De.Za=function(t){this.g&&(this.response=this.responseText=t,Tu(this))};De.Ya=function(t){this.g&&(this.response=t,Tu(this))};De.ka=function(){this.g&&Tu(this)};function Tu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,eu(t)}De.setRequestHeader=function(t,e){this.v.append(t,e)};De.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};De.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function eu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Td.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var iL=tt.JSON.parse;function on(t){kn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Bb,this.L=this.M=!1}On(on,kn);var Bb="",rL=/^https?$/i,sL=["POST","PUT"];De=on.prototype;De.Oa=function(t){this.M=t};De.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vm.g(),this.C=this.u?Gy(this.u):Gy(vm),this.g.onreadystatechange=ii(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Yy(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=tt.FormData&&t instanceof tt.FormData,!(0<=ib(sL,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Hb(this),0<this.B&&((this.L=oL(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ii(this.ua,this)):this.A=V0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Yy(this,s)}};function oL(t){return ll&&typeof t.timeout=="number"&&t.ontimeout!==void 0}De.ua=function(){typeof P0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zn(this,"timeout"),this.abort(8))};function Yy(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ub(t),Id(t)}function Ub(t){t.F||(t.F=!0,zn(t,"complete"),zn(t,"error"))}De.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,zn(this,"complete"),zn(this,"abort"),Id(this))};De.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Id(this,!0)),on.$.N.call(this)};De.La=function(){this.s||(this.G||this.v||this.l?qb(this):this.kb())};De.kb=function(){qb(this)};function qb(t){if(t.h&&typeof P0<"u"&&(!t.C[1]||Ir(t)!=4||t.da()!=2)){if(t.v&&Ir(t)==4)V0(t.La,0,t);else if(zn(t,"readystatechange"),Ir(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(Nb)[1]||null;!r&&tt.self&&tt.self.location&&(r=tt.self.location.protocol.slice(0,-1)),i=!rL.test(r?r.toLowerCase():"")}n=i}if(n)zn(t,"complete"),zn(t,"success");else{t.m=6;try{var s=2<Ir(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Ub(t)}}finally{Id(t)}}}}function Id(t,e){if(t.g){Hb(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||zn(t,"ready");try{n.onreadystatechange=i}catch{}}}function Hb(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(tt.clearTimeout(t.A),t.A=null)}De.isActive=function(){return!!this.g};function Ir(t){return t.g?t.g.readyState:0}De.da=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}};De.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};De.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),iL(e)}};function Xy(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Bb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function aL(t){const e={};t=(t.g&&2<=Ir(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if($c(t[i]))continue;var n=RN(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}EN(e,function(i){return i.join(", ")})}De.Ia=function(){return this.m};De.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function zb(t){let e="";return L0(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function W0(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=zb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):zt(t,e,n))}function cc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wb(t){this.Ga=0,this.j=[],this.l=new wd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cc("baseRetryDelayMs",5e3,t),this.hb=cc("retryDelaySeedMs",1e4,t),this.eb=cc("forwardChannelMaxRetries",2,t),this.xa=cc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Db(t&&t.concurrentRequestLimit),this.Ja=new eL,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}De=Wb.prototype;De.ra=8;De.H=1;function G0(t){if(Gb(t),t.H==3){var e=t.W++,n=cs(t.I);if(zt(n,"SID",t.K),zt(n,"RID",e),zt(n,"TYPE","terminate"),Iu(t,n),e=new Su(t,t.l,e),e.L=2,e.v=Ed(cs(n)),n=!1,tt.navigator&&tt.navigator.sendBeacon)try{n=tt.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&tt.Image&&(new Image().src=e.v,n=!0),n||(e.g=eA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),xu(e)}Qb(t)}function Pd(t){t.g&&(K0(t),t.g.cancel(),t.g=null)}function Gb(t){Pd(t),t.u&&(tt.clearTimeout(t.u),t.u=null),xf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&tt.clearTimeout(t.m),t.m=null)}function Cd(t){if(!Ob(t.i)&&!t.m){t.m=!0;var e=t.Na;Yc||gb(),Xc||(Yc(),Xc=!0),F0.add(e,t),t.C=0}}function lL(t,e){return Mb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=bu(ii(t.Na,t,e),Jb(t,t.C)),t.C++,!0)}De.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new Su(this,this.l,t);let s=this.s;if(this.U&&(s?(s=ab(s),lb(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$b(this,r,e),n=cs(this.I),zt(n,"RID",t),zt(n,"CVER",22),this.F&&zt(n,"X-HTTP-Session-Id",this.F),Iu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(zb(s)))+"&"+e:this.o&&W0(n,this.o,s)),H0(this.i,r),this.bb&&zt(n,"TYPE","init"),this.P?(zt(n,"$req",e),zt(n,"SID","null"),r.aa=!0,wm(r,n,null)):wm(r,n,e),this.H=2}}else this.H==3&&(t?Jy(this,t):this.j.length==0||Ob(this.i)||Jy(this))};function Jy(t,e){var n;e?n=e.m:n=t.W++;const i=cs(t.I);zt(i,"SID",t.K),zt(i,"RID",n),zt(i,"AID",t.V),Iu(t,i),t.o&&t.s&&W0(i,t.o,t.s),n=new Su(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=$b(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),H0(t.i,n),wm(n,i,e)}function Iu(t,e){t.na&&L0(t.na,function(n,i){zt(e,i,n)}),t.h&&Cb({},function(n,i){zt(e,i,n)})}function $b(t,e,n){n=Math.min(t.j.length,n);var i=t.h?ii(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].g;const h=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{tL(h,o,"req"+c+"_")}catch{i&&i(h)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function Kb(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Yc||gb(),Xc||(Yc(),Xc=!0),F0.add(e,t),t.A=0}}function $0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=bu(ii(t.Ma,t),Jb(t,t.A)),t.A++,!0)}De.Ma=function(){if(this.u=null,Yb(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=bu(ii(this.jb,this),t)}};De.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,hi(10),Pd(this),Yb(this))};function K0(t){t.B!=null&&(tt.clearTimeout(t.B),t.B=null)}function Yb(t){t.g=new Su(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=cs(t.wa);zt(e,"RID","rpc"),zt(e,"SID",t.K),zt(e,"AID",t.V),zt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&zt(e,"TO",t.qa),zt(e,"TYPE","xmlhttp"),Iu(t,e),t.o&&t.s&&W0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Ed(cs(e)),n.s=null,n.S=!0,Eb(n,t)}De.ib=function(){this.v!=null&&(this.v=null,Pd(this),$0(this),hi(19))};function xf(t){t.v!=null&&(tt.clearTimeout(t.v),t.v=null)}function Xb(t,e){var n=null;if(t.g==e){xf(t),K0(t),t.g=null;var i=2}else if(Am(t.i,e))n=e.F,Fb(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=bd(),zn(i,new bb(i,n)),Cd(t)}else Kb(t);else if(r=e.o,r==3||r==0&&0<e.ca||!(i==1&&lL(t,e)||i==2&&$0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ro(t,5);break;case 4:Ro(t,10);break;case 3:Ro(t,6);break;default:Ro(t,2)}}}function Jb(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ro(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=ii(t.pb,t);n||(n=new Uo("//www.google.com/images/cleardot.gif"),tt.location&&tt.location.protocol=="http"||Af(n,"https"),Ed(n)),nL(n.toString(),i)}else hi(2);t.H=0,t.h&&t.h.za(e),Qb(t),Gb(t)}De.pb=function(t){t?(this.l.info("Successfully pinged google.com"),hi(2)):(this.l.info("Failed to ping google.com"),hi(1))};function Qb(t){if(t.H=0,t.ma=[],t.h){const e=jb(t.i);(e.length!=0||t.j.length!=0)&&(Uy(t.ma,e),Uy(t.ma,t.j),t.i.i.length=0,C0(t.j),t.j.length=0),t.h.ya()}}function Zb(t,e,n){var i=n instanceof Uo?cs(n):new Uo(n);if(i.g!="")e&&(i.g=e+"."+i.g),Sf(i,i.m);else{var r=tt.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Uo(null);i&&Af(s,i),e&&(s.g=e),r&&Sf(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&zt(i,n,e),zt(i,"VER",t.ra),Iu(t,i),i}function eA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new on(new Eu({ob:!0})):new on(t.va),e.Oa(t.J),e}De.isActive=function(){return!!this.h&&this.h.isActive(this)};function tA(){}De=tA.prototype;De.Ba=function(){};De.Aa=function(){};De.za=function(){};De.ya=function(){};De.isActive=function(){return!0};De.Va=function(){};function Ef(){if(ll&&!(10<=Number(bN)))throw Error("Environmental error: no available transport.")}Ef.prototype.g=function(t,e){return new Pi(t,e)};function Pi(t,e){kn.call(this),this.g=new Wb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!$c(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$c(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new xl(this)}On(Pi,kn);Pi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;hi(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Zb(t,null,t.Y),Cd(t)};Pi.prototype.close=function(){G0(this.g)};Pi.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=M0(t),t=n);e.j.push(new JN(e.fb++,t)),e.H==3&&Cd(e)};Pi.prototype.N=function(){this.g.h=null,delete this.j,G0(this.g),delete this.g,Pi.$.N.call(this)};function nA(t){U0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}On(nA,U0);function iA(){q0.call(this),this.status=1}On(iA,q0);function xl(t){this.g=t}On(xl,tA);xl.prototype.Ba=function(){zn(this.g,"a")};xl.prototype.Aa=function(t){zn(this.g,new nA(t))};xl.prototype.za=function(t){zn(this.g,new iA)};xl.prototype.ya=function(){zn(this.g,"b")};function cL(){this.blockSize=-1}function Or(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}On(Or,cL);Or.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function dg(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Or.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)dg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){dg(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){dg(this,i),r=0;break}}this.h=r,this.i+=e};Or.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Rt(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var uL={};function Y0(t){return-128<=t&&128>t?vN(t,function(e){return new Rt([e|0],0>e?-1:0)}):new Rt([t|0],0>t?-1:0)}function Pr(t){if(isNaN(t)||!isFinite(t))return tl;if(0>t)return Un(Pr(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Sm;return new Rt(e,0)}function rA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Un(rA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Pr(Math.pow(e,8)),i=tl,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Pr(Math.pow(e,s)),i=i.R(s).add(Pr(o))):(i=i.R(n),i=i.add(Pr(o)))}return i}var Sm=4294967296,tl=Y0(0),xm=Y0(1),Qy=Y0(16777216);De=Rt.prototype;De.ea=function(){if(Fi(this))return-Un(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Sm+i)*e,e*=Sm}return t};De.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Qr(this))return"0";if(Fi(this))return"-"+Un(this).toString(t);for(var e=Pr(Math.pow(t,6)),n=this,i="";;){var r=If(n,e).g;n=Tf(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Qr(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};De.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Qr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Fi(t){return t.h==-1}De.X=function(t){return t=Tf(this,t),Fi(t)?-1:Qr(t)?0:1};function Un(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Rt(n,~t.h).add(xm)}De.abs=function(){return Fi(this)?Un(this):this};De.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Rt(n,n[n.length-1]&-2147483648?-1:0)};function Tf(t,e){return t.add(Un(e))}De.R=function(t){if(Qr(this)||Qr(t))return tl;if(Fi(this))return Fi(t)?Un(this).R(Un(t)):Un(Un(this).R(t));if(Fi(t))return Un(this.R(Un(t)));if(0>this.X(Qy)&&0>t.X(Qy))return Pr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,l=t.D(r)&65535;n[2*i+2*r]+=o*l,Fh(n,2*i+2*r),n[2*i+2*r+1]+=s*l,Fh(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Fh(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Fh(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Rt(n,0)};function Fh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function uc(t,e){this.g=t,this.h=e}function If(t,e){if(Qr(e))throw Error("division by zero");if(Qr(t))return new uc(tl,tl);if(Fi(t))return e=If(Un(t),e),new uc(Un(e.g),Un(e.h));if(Fi(e))return e=If(t,Un(e)),new uc(Un(e.g),e.h);if(30<t.g.length){if(Fi(t)||Fi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xm,i=e;0>=i.X(t);)n=Zy(n),i=Zy(i);var r=Ua(n,1),s=Ua(i,1);for(i=Ua(i,2),n=Ua(n,2);!Qr(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Ua(i,1),n=Ua(n,1)}return e=Tf(t,r.R(e)),new uc(r,e)}for(r=tl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Pr(n),o=s.R(e);Fi(o)||0<o.X(t);)n-=i,s=Pr(n),o=s.R(e);Qr(s)&&(s=xm),r=r.add(s),t=Tf(t,o)}return new uc(r,t)}De.gb=function(t){return If(this,t).h};De.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Rt(n,this.h&t.h)};De.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Rt(n,this.h|t.h)};De.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Rt(n,this.h^t.h)};function Zy(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Rt(n,t.h)}function Ua(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Rt(r,t.h)}Ef.prototype.createWebChannel=Ef.prototype.g;Pi.prototype.send=Pi.prototype.u;Pi.prototype.open=Pi.prototype.m;Pi.prototype.close=Pi.prototype.close;Ad.NO_ERROR=0;Ad.TIMEOUT=8;Ad.HTTP_ERROR=6;Ab.COMPLETE="complete";Sb.EventType=Au;Au.OPEN="a";Au.CLOSE="b";Au.ERROR="c";Au.MESSAGE="d";kn.prototype.listen=kn.prototype.O;on.prototype.listenOnce=on.prototype.P;on.prototype.getLastError=on.prototype.Sa;on.prototype.getLastErrorCode=on.prototype.Ia;on.prototype.getStatus=on.prototype.da;on.prototype.getResponseJson=on.prototype.Wa;on.prototype.getResponseText=on.prototype.ja;on.prototype.send=on.prototype.ha;on.prototype.setWithCredentials=on.prototype.Oa;Or.prototype.digest=Or.prototype.l;Or.prototype.reset=Or.prototype.reset;Or.prototype.update=Or.prototype.j;Rt.prototype.add=Rt.prototype.add;Rt.prototype.multiply=Rt.prototype.R;Rt.prototype.modulo=Rt.prototype.gb;Rt.prototype.compare=Rt.prototype.X;Rt.prototype.toNumber=Rt.prototype.ea;Rt.prototype.toString=Rt.prototype.toString;Rt.prototype.getBits=Rt.prototype.D;Rt.fromNumber=Pr;Rt.fromString=rA;var hL=function(){return new Ef},fL=function(){return bd()},pg=Ad,dL=Ab,pL=sa,ev={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},gL=Eu,jh=Sb,mL=on,yL=Rt;const tv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=new rd("@firebase/firestore");function hc(){return Xo.logLevel}function ze(t,...e){if(Xo.logLevel<=gt.DEBUG){const n=e.map(X0);Xo.debug(`Firestore (${El}): ${t}`,...n)}}function Jo(t,...e){if(Xo.logLevel<=gt.ERROR){const n=e.map(X0);Xo.error(`Firestore (${El}): ${t}`,...n)}}function Pf(t,...e){if(Xo.logLevel<=gt.WARN){const n=e.map(X0);Xo.warn(`Firestore (${El}): ${t}`,...n)}}function X0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t="Unexpected state"){const e=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: `+t;throw Jo(e),new Error(e)}function Dn(t,e){t||vt()}function Kt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zn.UNAUTHENTICATED))}shutdown(){}}class _L{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wL{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new qo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qo,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qo)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Dn(typeof i.accessToken=="string"),new sA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dn(e===null||typeof e=="string"),new Zn(e)}}class bL{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class AL{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new bL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=s=>{s.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ze("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Dn(typeof n.token=="string"),this.R=n.token,new SL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=EL(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Ut(t,e){return t<e?-1:t>e?1:0}function cl(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new nt(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nt(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new nt(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ln(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Jt(e)}static min(){return new Jt(new Ln(0,0))}static max(){return new Jt(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,i){n===void 0?n=0:n>e.length&&vt(),i===void 0?i=e.length-n:i>e.length-n&&vt(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return tu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tu?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class vn extends tu{construct(e,n,i){return new vn(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new nt(Pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new vn(n)}static emptyPath(){return new vn([])}}const TL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends tu{construct(e,n,i){return new Hn(e,n,i)}static isValidIdentifier(e){return TL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Hn(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new nt(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new nt(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new nt(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new nt(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(n)}static emptyPath(){return new Hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.path=e}static fromPath(e){return new ht(vn.fromString(e))}static fromName(e){return new ht(vn.fromString(e).popFirst(5))}static empty(){return new ht(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new vn(e.slice()))}}function IL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Jt.fromTimestamp(i===1e9?new Ln(n+1,0):new Ln(n,i));return new eo(r,ht.empty(),e)}function PL(t){return new eo(t.readTime,t.key,-1)}class eo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new eo(Jt.min(),ht.empty(),-1)}static max(){return new eo(Jt.max(),ht.empty(),-1)}}function CL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ht.comparator(t.documentKey,e.documentKey),n!==0?n:Ut(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(t){if(t.code!==Pe.FAILED_PRECONDITION||t.message!==NL)throw t;ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Te((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Te?n:Te.resolve(n)}catch(n){return Te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Te.reject(n)}static resolve(e){return new Te((n,i)=>{n(e)})}static reject(e){return new Te((n,i)=>{i(e)})}static waitFor(e){return new Te((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=Te.resolve(!1);for(const i of e)n=n.next(r=>r?Te.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new Te((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new Te((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function Nd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.se(i),this.oe=i=>n.writeSequenceNumber(i))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}lA._e=-1;function J0(t){return t==null}function Cf(t){return t===0&&1/t==-1/0}function RL(t){return typeof t=="number"&&Number.isInteger(t)&&!Cf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this.comparator=e,this.root=n||jn.EMPTY}insert(e,n){return new _i(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new _i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vh(this.root,e,this.comparator,!0)}}class Vh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jn{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??jn.RED,this.left=r??jn.EMPTY,this.right=s??jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new jn(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return jn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,n,i,r,s){return this}insert(e,n,i){return new jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.comparator=e,this.data=new _i(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iv(this.data.getIterator())}getIteratorFrom(e){return new iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof si)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new si(this.comparator);return n.data=e,n}}class iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new ar([])}unionWith(e){let n=new si(Hn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new kL("Invalid base64 string: "+s):s}}(e);return new us(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new us(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}us.EMPTY_BYTE_STRING=new us("");const DL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(t){if(Dn(!!t),typeof t=="string"){let e=0;const n=DL.exec(t);if(Dn(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vn(t.seconds),nanos:Vn(t.nanos)}}function Vn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function nu(t){return typeof t=="string"?us.fromBase64String(t):us.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uA(t){const e=t.mapValue.fields.__previous_value__;return Q0(e)?uA(e):e}function Nf(t){const e=Qo(t.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Lf{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Lf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Q0(t)?4:ML(t)?9007199254740991:10:vt()}function Mr(t,e){if(t===e)return!0;const n=ul(t);if(n!==ul(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nf(t).isEqual(Nf(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Qo(r.timestampValue),a=Qo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return nu(r.bytesValue).isEqual(nu(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Vn(r.geoPointValue.latitude)===Vn(s.geoPointValue.latitude)&&Vn(r.geoPointValue.longitude)===Vn(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Vn(r.integerValue)===Vn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Vn(r.doubleValue),a=Vn(s.doubleValue);return o===a?Cf(o)===Cf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return cl(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(nv(o)!==nv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mr(o[l],a[l])))return!1;return!0}(t,e);default:return vt()}}function iu(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function hl(t,e){if(t===e)return 0;const n=ul(t),i=ul(e);if(n!==i)return Ut(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ut(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Vn(s.integerValue||s.doubleValue),l=Vn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rv(t.timestampValue,e.timestampValue);case 4:return rv(Nf(t),Nf(e));case 5:return Ut(t.stringValue,e.stringValue);case 6:return function(s,o){const a=nu(s),l=nu(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ut(a[c],l[c]);if(h!==0)return h}return Ut(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ut(Vn(s.latitude),Vn(o.latitude));return a!==0?a:Ut(Vn(s.longitude),Vn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=hl(a[c],l[c]);if(h)return h}return Ut(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Bh.mapValue&&o===Bh.mapValue)return 0;if(s===Bh.mapValue)return 1;if(o===Bh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const m=Ut(l[d],h[d]);if(m!==0)return m;const p=hl(a[l[d]],c[h[d]]);if(p!==0)return p}return Ut(l.length,h.length)}(t.mapValue,e.mapValue);default:throw vt()}}function rv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ut(t,e);const n=Qo(t),i=Qo(e),r=Ut(n.seconds,i.seconds);return r!==0?r:Ut(n.nanos,i.nanos)}function fl(t){return Em(t)}function Em(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Qo(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return nu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ht.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Em(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Em(n.fields[o])}`;return r+"}"}(t.mapValue):vt()}function Tm(t){return!!t&&"integerValue"in t}function Z0(t){return!!t&&"arrayValue"in t}function Xh(t){return!!t&&"mapValue"in t}function Nc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Pu(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Nc(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ML(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(n)}setAll(e){let n=Hn.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Nc(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Xh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Pu(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new sr(Nc(this.value))}}function hA(t){const e=[];return Pu(t.fields,(n,i)=>{const r=new Hn([n]);if(Xh(i)){const s=hA(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ir(e,0,Jt.min(),Jt.min(),Jt.min(),sr.empty(),0)}static newFoundDocument(e,n,i,r){return new ir(e,1,n,Jt.min(),i,r,0)}static newNoDocument(e,n){return new ir(e,2,n,Jt.min(),Jt.min(),sr.empty(),0)}static newUnknownDocument(e,n){return new ir(e,3,n,Jt.min(),Jt.min(),sr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.position=e,this.inclusive=n}}function sv(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=ht.comparator(ht.fromName(o.referenceValue),n.key):i=hl(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function ov(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n="asc"){this.field=e,this.dir=n}}function FL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{}class Nn extends fA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new VL(e,n,i):n==="array-contains"?new qL(e,i):n==="in"?new HL(e,i):n==="not-in"?new zL(e,i):n==="array-contains-any"?new WL(e,i):new Nn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new BL(e,i):new UL(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hl(n,this.value)):n!==null&&ul(this.value)===ul(n)&&this.matchesComparison(hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class to extends fA{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new to(e,n)}matches(e){return dA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function dA(t){return t.op==="and"}function pA(t){return jL(t)&&dA(t)}function jL(t){for(const e of t.filters)if(e instanceof to)return!1;return!0}function Im(t){if(t instanceof Nn)return t.field.canonicalString()+t.op.toString()+fl(t.value);if(pA(t))return t.filters.map(e=>Im(e)).join(",");{const e=t.filters.map(n=>Im(n)).join(",");return`${t.op}(${e})`}}function gA(t,e){return t instanceof Nn?function(i,r){return r instanceof Nn&&i.op===r.op&&i.field.isEqual(r.field)&&Mr(i.value,r.value)}(t,e):t instanceof to?function(i,r){return r instanceof to&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&gA(o,r.filters[a]),!0):!1}(t,e):void vt()}function mA(t){return t instanceof Nn?function(n){return`${n.field.canonicalString()} ${n.op} ${fl(n.value)}`}(t):t instanceof to?function(n){return n.op.toString()+" {"+n.getFilters().map(mA).join(" ,")+"}"}(t):"Filter"}class VL extends Nn{constructor(e,n,i){super(e,n,i),this.key=ht.fromName(i.referenceValue)}matches(e){const n=ht.comparator(e.key,this.key);return this.matchesComparison(n)}}class BL extends Nn{constructor(e,n){super(e,"in",n),this.keys=yA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UL extends Nn{constructor(e,n){super(e,"not-in",n),this.keys=yA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ht.fromName(i.referenceValue))}class qL extends Nn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Z0(n)&&iu(n.arrayValue,this.value)}}class HL extends Nn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&iu(this.value.arrayValue,n)}}class zL extends Nn{constructor(e,n){super(e,"not-in",n)}matches(e){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!iu(this.value.arrayValue,n)}}class WL extends Nn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Z0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>iu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function av(t,e=null,n=[],i=[],r=null,s=null,o=null){return new GL(t,e,n,i,r,s,o)}function e1(t){const e=Kt(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Im(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),J0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>fl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>fl(i)).join(",")),e.ce=n}return e.ce}function t1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ov(t.startAt,e.startAt)&&ov(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function $L(t,e,n,i,r,s,o,a){return new Ld(t,e,n,i,r,s,o,a)}function KL(t){return new Ld(t)}function lv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YL(t){return t.collectionGroup!==null}function Lc(t){const e=Kt(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new si(Hn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new kf(s,i))}),n.has(Hn.keyField().canonicalString())||e.le.push(new kf(Hn.keyField(),i))}return e.le}function Ho(t){const e=Kt(t);return e.he||(e.he=XL(e,Lc(t))),e.he}function XL(t,e){if(t.limitType==="F")return av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new kf(r.field,s)});const n=t.endAt?new Rf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Rf(t.startAt.position,t.startAt.inclusive):null;return av(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Pm(t,e,n){return new Ld(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vA(t,e){return t1(Ho(t),Ho(e))&&t.limitType===e.limitType}function _A(t){return`${e1(Ho(t))}|lt:${t.limitType}`}function fc(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>mA(r)).join(", ")}]`),J0(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>fl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>fl(r)).join(",")),`Target(${i})`}(Ho(t))}; limitType=${t.limitType})`}function n1(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ht.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Lc(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=sv(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Lc(i),r)||i.endAt&&!function(o,a,l){const c=sv(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Lc(i),r))}(t,e)}function JL(t){return(e,n)=>{let i=!1;for(const r of Lc(t)){const s=QL(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function QL(t,e,n){const i=t.field.isKeyField()?ht.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?hl(l,c):vt()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Pu(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return cA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new _i(ht.comparator);function Df(){return ZL}const wA=new _i(ht.comparator);function Uh(...t){let e=wA;for(const n of t)e=e.insert(n.key,n);return e}function bA(t){let e=wA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ko(){return Rc()}function AA(){return Rc()}function Rc(){return new Tl(t=>t.toString(),(t,e)=>t.isEqual(e))}const eR=new _i(ht.comparator),tR=new si(ht.comparator);function ti(...t){let e=tR;for(const n of t)e=e.add(n);return e}const nR=new si(Ut);function iR(){return nR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cf(e)?"-0":e}}function xA(t){return{integerValue:""+t}}function rR(t,e){return RL(e)?xA(e):SA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this._=void 0}}function sR(t,e,n){return t instanceof Of?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Q0(s)&&(s=uA(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ru?TA(t,e):t instanceof su?IA(t,e):function(r,s){const o=EA(r,s),a=cv(o)+cv(r.Ie);return Tm(o)&&Tm(r.Ie)?xA(a):SA(r.serializer,a)}(t,e)}function oR(t,e,n){return t instanceof ru?TA(t,e):t instanceof su?IA(t,e):n}function EA(t,e){return t instanceof Mf?function(i){return Tm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Of extends Rd{}class ru extends Rd{constructor(e){super(),this.elements=e}}function TA(t,e){const n=PA(e);for(const i of t.elements)n.some(r=>Mr(r,i))||n.push(i);return{arrayValue:{values:n}}}class su extends Rd{constructor(e){super(),this.elements=e}}function IA(t,e){let n=PA(e);for(const i of t.elements)n=n.filter(r=>!Mr(r,i));return{arrayValue:{values:n}}}class Mf extends Rd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function cv(t){return Vn(t.integerValue||t.doubleValue)}function PA(t){return Z0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function aR(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ru&&r instanceof ru||i instanceof su&&r instanceof su?cl(i.elements,r.elements,Mr):i instanceof Mf&&r instanceof Mf?Mr(i.Ie,r.Ie):i instanceof Of&&r instanceof Of}(t.transform,e.transform)}class lR{constructor(e,n){this.version=e,this.transformResults=n}}class is{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new is}static exists(e){return new is(void 0,e)}static updateTime(e){return new is(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kd{}function CA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new LA(t.key,is.none()):new Cu(t.key,t.data,is.none());{const n=t.data,i=sr.empty();let r=new si(Hn.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new oa(t.key,i,new ar(r.toArray()),is.none())}}function cR(t,e,n){t instanceof Cu?function(r,s,o){const a=r.value.clone(),l=hv(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof oa?function(r,s,o){if(!Jh(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=hv(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(NA(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function kc(t,e,n,i){return t instanceof Cu?function(s,o,a,l){if(!Jh(s.precondition,o))return a;const c=s.value.clone(),h=fv(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof oa?function(s,o,a,l){if(!Jh(s.precondition,o))return a;const c=fv(s.fieldTransforms,l,o),h=o.data;return h.setAll(NA(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Jh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function uR(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=EA(i.transform,r||null);s!=null&&(n===null&&(n=sr.empty()),n.set(i.field,s))}return n||null}function uv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&cl(i,r,(s,o)=>aR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cu extends kd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class oa extends kd{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function NA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function hv(t,e,n){const i=new Map;Dn(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,oR(o,a,n[r]))}return i}function fv(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,sR(s,o,e))}return i}class LA extends kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hR extends kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&cR(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=kc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=kc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=AA();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=CA(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Jt.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ti())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,(n,i)=>uv(n,i))&&cl(this.baseMutations,e.baseMutations,(n,i)=>uv(n,i))}}class i1{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Dn(e.mutations.length===i.length);let r=function(){return eR}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new i1(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,wt;function pR(t){switch(t){default:return vt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function gR(t){if(t===void 0)return Jo("GRPC error has no .code"),Pe.UNKNOWN;switch(t){case mn.OK:return Pe.OK;case mn.CANCELLED:return Pe.CANCELLED;case mn.UNKNOWN:return Pe.UNKNOWN;case mn.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case mn.INTERNAL:return Pe.INTERNAL;case mn.UNAVAILABLE:return Pe.UNAVAILABLE;case mn.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case mn.NOT_FOUND:return Pe.NOT_FOUND;case mn.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case mn.ABORTED:return Pe.ABORTED;case mn.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case mn.DATA_LOSS:return Pe.DATA_LOSS;default:return vt()}}(wt=mn||(mn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new yL([4294967295,4294967295],0);class mR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vR(t,e){return Cm(t,e.toTimestamp())}function nl(t){return Dn(!!t),Jt.fromTimestamp(function(n){const i=Qo(n);return new Ln(i.seconds,i.nanos)}(t))}function RA(t,e){return function(i){return new vn(["projects",i.projectId,"databases",i.database])}(t).child("documents").child(e).canonicalString()}function _R(t){const e=vn.fromString(t);return Dn(IR(e)),e}function Nm(t,e){return RA(t.databaseId,e.path)}function wR(t){const e=_R(t);return e.length===4?vn.emptyPath():AR(e)}function bR(t){return new vn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AR(t){return Dn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dv(t,e,n){return{name:Nm(t,e),fields:n.value.mapValue.fields}}function SR(t,e){let n;if(e instanceof Cu)n={update:dv(t,e.key,e.value)};else if(e instanceof LA)n={delete:Nm(t,e.key)};else if(e instanceof oa)n={update:dv(t,e.key,e.data),updateMask:TR(e.fieldMask)};else{if(!(e instanceof hR))return vt();n={verify:Nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Of)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ru)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof su)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw vt()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:vR(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:vt()}(t,e.precondition)),n}function xR(t,e){return t&&t.length>0?(Dn(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?nl(r.updateTime):nl(s);return o.isEqual(Jt.min())&&(o=nl(s)),new lR(o,r.transformResults||[])}(n,e))):[]}function ER(t){let e=wR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Dn(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const m=kA(d);return m instanceof to&&pA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(v){return new kf(za(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,J0(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(d){const m=!!d.before,p=d.values||[];return new Rf(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const m=!d.before,p=d.values||[];return new Rf(p,m)}(n.endAt)),$L(e,r,o,s,a,"F",l,c)}function kA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=za(n.unaryFilter.field);return Nn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=za(n.unaryFilter.field);return Nn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=za(n.unaryFilter.field);return Nn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=za(n.unaryFilter.field);return Nn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(t):t.fieldFilter!==void 0?function(n){return Nn.create(za(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return to.create(n.compositeFilter.filters.map(i=>kA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return vt()}}(n.compositeFilter.op))}(t):vt()}function za(t){return Hn.fromServerFormat(t.fieldPath)}function TR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function IR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.ut=e}}function CR(t){const e=ER({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.on=new LR}addToCollectionParentIndex(e,n){return this.on.add(n),Te.resolve()}getCollectionParents(e,n){return Te.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return Te.resolve()}deleteFieldIndex(e,n){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,n){return Te.resolve()}getDocumentsMatchingTarget(e,n){return Te.resolve(null)}getIndexType(e,n){return Te.resolve(0)}getFieldIndexes(e,n){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,n){return Te.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,n){return Te.resolve(eo.min())}updateCollectionGroup(e,n,i){return Te.resolve()}updateIndexEntries(e,n){return Te.resolve()}}class LR{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new si(vn.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new si(vn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new dl(0)}static Nn(){return new dl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.changes=new Tl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Te.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&kc(i.mutation,r,ar.empty(),Ln.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ti()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ti()){const r=ko();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Uh();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=ko();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ti()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Df();const o=Rc(),a=function(){return Rc()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof oa)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),kc(h.mutation,c,h.mutation.getFieldMask(),Ln.now())):o.set(c.key,ar.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new kR(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Rc();let r=new _i((o,a)=>o-a),s=ti();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||ar.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||ti()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=AA();h.forEach(m=>{if(!s.has(m)){const p=CA(n.get(m),i.get(m));p!==null&&d.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Te.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return ht.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YL(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):Te.resolve(ko());let a=-1,l=s;return o.next(c=>Te.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?Te.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ti())).next(h=>({batchId:a,changes:bA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ht(n)).next(i=>{let r=Uh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Uh();return this.indexManager.getCollectionParents(e,s).next(a=>Te.forEach(a,l=>{const c=function(d,m){return new Ld(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ir.newInvalidDocument(h)))});let a=Uh();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&kc(h.mutation,c,ar.empty(),Ln.now()),n1(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return Te.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(r){return{id:r.id,version:r.version,createTime:nl(r.createTime)}}(n)),Te.resolve()}getNamedQuery(e,n){return Te.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(r){return{name:r.name,query:CR(r.bundledQuery),readTime:nl(r.readTime)}}(n)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.overlays=new _i(ht.comparator),this.lr=new Map}getOverlay(e,n){return Te.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ko();return Te.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.lt(e,n,s)}),Te.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),Te.resolve()}getOverlaysForCollection(e,n,i){const r=ko(),s=n.length+1,o=new ht(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return Te.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new _i((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=ko(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ko(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return Te.resolve(a)}lt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new dR(n,i));let s=this.lr.get(n);s===void 0&&(s=ti(),this.lr.set(n,s)),this.lr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.hr=new si(Cn.Pr),this.Ir=new si(Cn.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const i=new Cn(e,n);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.dr(new Cn(e,n))}Ar(e,n){e.forEach(i=>this.removeReference(i,n))}Rr(e){const n=new ht(new vn([])),i=new Cn(n,e),r=new Cn(n,e+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new ht(new vn([])),i=new Cn(n,e),r=new Cn(n,e+1);let s=ti();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Cn(e,0),i=this.hr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Cn{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return ht.comparator(e.key,n.key)||Ut(e.gr,n.gr)}static Tr(e,n){return Ut(e.gr,n.gr)||ht.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new si(Cn.Pr)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fR(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.yr=this.yr.add(new Cn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Te.resolve(o)}lookupMutationBatch(e,n){return Te.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Sr(i),s=r<0?0:r;return Te.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Cn(n,0),r=new Cn(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{const a=this.wr(o.gr);s.push(a)}),Te.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new si(Ut);return n.forEach(r=>{const s=new Cn(r,0),o=new Cn(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),Te.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;ht.isDocumentKey(s)||(s=s.child(""));const o=new Cn(new ht(s),0);let a=new si(Ut);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.gr)),!0)},o),Te.resolve(this.br(a))}br(e){const n=[];return e.forEach(i=>{const r=this.wr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Dn(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return Te.forEach(n.mutations,r=>{const s=new Cn(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,n){const i=new Cn(n,0),r=this.yr.firstAfterOrEqual(i);return Te.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.Cr=e,this.docs=function(){return new _i(ht.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Te.resolve(i?i.document.mutableCopy():ir.newInvalidDocument(n))}getEntries(e,n){let i=Df();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ir.newInvalidDocument(r))}),Te.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Df();const o=n.path,a=new ht(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||CL(PL(h),i)<=0||(r.has(h.key)||n1(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Te.resolve(s)}getAllFromCollectionGroup(e,n,i,r){vt()}vr(e,n){return Te.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new VR(this)}getSize(e){return Te.resolve(this.size)}}class VR extends RR{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),Te.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.persistence=e,this.Fr=new Tl(n=>e1(n),t1),this.lastRemoteSnapshotVersion=Jt.min(),this.highestTargetId=0,this.Mr=0,this.Or=new r1,this.targetCount=0,this.Nr=dl.On()}forEachTarget(e,n){return this.Fr.forEach((i,r)=>n(r)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Mr&&(this.Mr=n),Te.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new dl(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,Te.resolve()}updateTargetData(e,n){return this.kn(n),Te.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Te.waitFor(s).next(()=>r)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,n){const i=this.Fr.get(n)||null;return Te.resolve(i)}addMatchingKeys(e,n,i){return this.Or.Er(n,i),Te.resolve()}removeMatchingKeys(e,n,i){this.Or.Ar(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Te.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),Te.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Or.mr(n);return Te.resolve(i)}containsKey(e,n){return Te.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.Br={},this.overlays={},this.Lr=new lA(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new BR(this),this.indexManager=new NR,this.remoteDocumentCache=function(r){return new jR(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new PR(n),this.Kr=new OR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new FR(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,i){ze("MemoryPersistence","Starting transaction:",e);const r=new qR(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,n){return Te.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}}class qR extends LL{constructor(e){super(),this.currentSequenceNumber=e}}class s1{constructor(e){this.persistence=e,this.Gr=new r1,this.zr=null}static jr(e){return new s1(e)}get Hr(){if(this.zr)return this.zr;throw vt()}addReference(e,n,i){return this.Gr.addReference(i,n),this.Hr.delete(i.toString()),Te.resolve()}removeReference(e,n,i){return this.Gr.removeReference(i,n),this.Hr.add(i.toString()),Te.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),Te.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Hr,i=>{const r=ht.fromPath(i);return this.Jr(e,r).next(s=>{s||n.removeEntry(r,Jt.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(i=>{i?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return Te.or([()=>Te.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ki=i,this.qi=r}static Qi(e,n){let i=ti(),r=ti();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new o1(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new HR;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,i,r){return i.documentReadCount<this.Ui?(hc()<=gt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",fc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Te.resolve()):(hc()<=gt.DEBUG&&ze("QueryEngine","Query:",fc(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(hc()<=gt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",fc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ho(n))):Te.resolve())}zi(e,n){if(lv(n))return Te.resolve(null);let i=Ho(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Pm(n,null,"F"),i=Ho(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ti(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Yi(n,a);return this.Zi(n,c,o,l.readTime)?this.zi(e,Pm(n,null,"F")):this.Xi(e,c,n,l)}))})))}ji(e,n,i,r){return lv(n)||r.isEqual(Jt.min())?Te.resolve(null):this.Gi.getDocuments(e,i).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,i,r)?Te.resolve(null):(hc()<=gt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fc(n)),this.Xi(e,o,n,IL(r,-1)).next(a=>a))})}Yi(e,n){let i=new si(JL(e));return n.forEach((r,s)=>{n1(e,s)&&(i=i.add(s))}),i}Zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,n,i){return hc()<=gt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",fc(n)),this.Gi.getDocumentsMatchingQuery(e,n,eo.min(),i)}Xi(e,n,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,i,r){this.persistence=e,this.es=n,this.serializer=r,this.ts=new _i(Ut),this.ns=new Tl(s=>e1(s),t1),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DR(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function GR(t,e,n,i){return new WR(t,e,n,i)}async function DA(t,e){const n=Kt(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.os(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ti();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function $R(t,e){const n=Kt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,m=d.keys();let p=Te.resolve();return m.forEach(v=>{p=p.next(()=>h.getEntry(l,v)).next(b=>{const x=c.docVersions.get(v);Dn(x!==null),b.version.compareTo(x)<0&&(d.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ti();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function KR(t){const e=Kt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function YR(t,e){const n=Kt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}class pv{constructor(){this.activeTargetIds=iR()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XR{constructor(){this.eo=new pv,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,i){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new pv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh=null;function gg(){return qh===null?qh=function(){return 268435456+Math.round(2147483648*Math.random())}():qh++,"0x"+qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class e6 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+n.host,this.fo=`projects/${r}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(n,i,r,s,o){const a=gg(),l=this.So(n,i);ze("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,s,o),this.Do(n,l,c,r).then(h=>(ze("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Pf("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Co(n,i,r,s,o,a){return this.wo(n,i,r,s,o)}bo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+El}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}So(n,i){const r=QR[n];return`${this.mo}/v1/${i}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,i,r){const s=gg();return new Promise((o,a)=>{const l=new mL;l.setWithCredentials(!0),l.listenOnce(dL.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case pg.NO_ERROR:const h=l.getResponseJson();ze(Qn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case pg.TIMEOUT:ze(Qn,`RPC '${e}' ${s} timed out`),a(new nt(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case pg.HTTP_ERROR:const d=l.getStatus();if(ze(Qn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const v=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(w)>=0?w:Pe.UNKNOWN}(p.status);a(new nt(v,p.message))}else a(new nt(Pe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new nt(Pe.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{ze(Qn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);ze(Qn,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}vo(e,n,i){const r=gg(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hL(),a=fL(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new gL({})),this.bo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");ze(Qn,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let m=!1,p=!1;const v=new ZR({co:x=>{p?ze(Qn,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(m||(ze(Qn,`Opening RPC '${e}' stream ${r} transport.`),d.open(),m=!0),ze(Qn,`RPC '${e}' stream ${r} sending:`,x),d.send(x))},lo:()=>d.close()}),b=(x,w,A)=>{x.listen(w,S=>{try{A(S)}catch(k){setTimeout(()=>{throw k},0)}})};return b(d,jh.EventType.OPEN,()=>{p||ze(Qn,`RPC '${e}' stream ${r} transport opened.`)}),b(d,jh.EventType.CLOSE,()=>{p||(p=!0,ze(Qn,`RPC '${e}' stream ${r} transport closed`),v.Ro())}),b(d,jh.EventType.ERROR,x=>{p||(p=!0,Pf(Qn,`RPC '${e}' stream ${r} transport errored:`,x),v.Ro(new nt(Pe.UNAVAILABLE,"The operation could not be completed")))}),b(d,jh.EventType.MESSAGE,x=>{var w;if(!p){const A=x.data[0];Dn(!!A);const S=A,k=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(k){ze(Qn,`RPC '${e}' stream ${r} received error:`,k);const F=k.status;let G=function($){const J=mn[$];if(J!==void 0)return gR(J)}(F),O=k.message;G===void 0&&(G=Pe.INTERNAL,O="Unknown error status: "+F+" with message "+k.message),p=!0,v.Ro(new nt(G,O)),d.close()}else ze(Qn,`RPC '${e}' stream ${r} received:`,A),v.Vo(A)}}),b(a,pL.STAT_EVENT,x=>{x.stat===ev.PROXY?ze(Qn,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===ev.NOPROXY&&ze(Qn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.Ao()},0),v}}function mg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){return new mR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&ze("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n,i,r,s,o,a,l){this.si=e,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new OA(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===Pe.RESOURCE_EXHAUSTED?(Jo(n.toString()),Jo("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(n)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===n&&this.s_(i,r)},i=>{e(()=>{const r=new nt(Pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,n){const i=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n6 extends t6{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Dn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=xR(e.writeResults,e.commitTime),i=nl(e.commitTime);return this.listener.I_(i,n)}return Dn(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=bR(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>SR(this.serializer,i))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new nt(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(e,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new nt(Pe.UNKNOWN,r.toString())})}Co(e,n,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new nt(Pe.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class r6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Jo(n),this.f_=!1):ze("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{i.enqueueAndForget(async()=>{Lu(this)&&(ze("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Kt(l);c.C_.add(4),await Nu(c),c.M_.set("Unknown"),c.C_.delete(4),await Od(c)}(this))})}),this.M_=new r6(i,r)}}async function Od(t){if(Lu(t))for(const e of t.v_)await e(!0)}async function Nu(t){for(const e of t.v_)await e(!1)}function Lu(t){return Kt(t).C_.size===0}async function MA(t,e,n){if(!Nd(e))throw e;t.C_.add(1),await Nu(t),t.M_.set("Offline"),n||(n=()=>KR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ze("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await Od(t)})}function FA(t,e){return e().catch(n=>MA(t,n,e))}async function Md(t){const e=Kt(t),n=no(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;o6(e);)try{const r=await YR(e.localStore,i);if(r===null){e.b_.length===0&&n.Zo();break}i=r.batchId,a6(e,r)}catch(r){await MA(e,r)}jA(e)&&VA(e)}function o6(t){return Lu(t)&&t.b_.length<10}function a6(t,e){t.b_.push(e);const n=no(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function jA(t){return Lu(t)&&!no(t).jo()&&t.b_.length>0}function VA(t){no(t).start()}async function l6(t){no(t).E_()}async function c6(t){const e=no(t);for(const n of t.b_)e.P_(n.mutations)}async function u6(t,e,n){const i=t.b_.shift(),r=i1.from(i,e,n);await FA(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Md(t)}async function h6(t,e){e&&no(t).h_&&await async function(i,r){if(function(o){return pR(o)&&o!==Pe.ABORTED}(r.code)){const s=i.b_.shift();no(i).Yo(),await FA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Md(i)}}(t,e),jA(t)&&VA(t)}async function mv(t,e){const n=Kt(t);n.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const i=Lu(n);n.C_.add(3),await Nu(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await Od(n)}async function f6(t,e){const n=Kt(t);e?(n.C_.delete(2),await Od(n)):e||(n.C_.add(2),await Nu(n),n.M_.set("Unknown"))}function no(t){return t.N_||(t.N_=function(n,i,r){const s=Kt(n);return s.A_(),new n6(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{ho:l6.bind(null,t),Io:h6.bind(null,t),T_:c6.bind(null,t),I_:u6.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await Md(t)):(await t.N_.stop(),t.b_.length>0&&(ze("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new a1(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function BA(t,e){if(Jo("AsyncQueue",`${e}: ${t}`),Nd(t))return new nt(Pe.UNAVAILABLE,`${e}: ${t}`);throw t}class d6{constructor(){this.queries=new Tl(e=>_A(e),vA),this.onlineState="Unknown",this.q_=new Set}}function p6(t){t.q_.forEach(e=>{e.next()})}class g6{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Tl(a=>_A(a),vA),this.fa=new Map,this.ga=new Set,this.pa=new _i(ht.comparator),this.ya=new Map,this.wa=new r1,this.Sa={},this.ba=new Map,this.Da=dl.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function m6(t,e,n){const i=w6(t);try{const r=await function(o,a){const l=Kt(o),c=Ln.now(),h=a.reduce((p,v)=>p.add(v.key),ti());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=Df(),b=ti();return l.ss.getEntries(p,h).next(x=>{v=x,v.forEach((w,A)=>{A.isValidDocument()||(b=b.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,v)).next(x=>{d=x;const w=[];for(const A of a){const S=uR(A,d.get(A.key).overlayedDocument);S!=null&&w.push(new oa(A.key,S,hA(S.value.mapValue),is.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,w,a)}).next(x=>{m=x;const w=x.applyToLocalDocumentSet(d,b);return l.documentOverlayCache.saveOverlays(p,x.batchId,w)})}).then(()=>({batchId:m.batchId,changes:bA(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Sa[o.currentUser.toKey()];c||(c=new _i(Ut)),c=c.insert(a,l),o.Sa[o.currentUser.toKey()]=c}(i,r.batchId,n),await Fd(i,r.changes),await Md(i.remoteStore)}catch(r){const s=BA(r,"Failed to persist write");n.reject(s)}}function yv(t,e,n){const i=Kt(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Kt(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const m of d.listeners)m.Q_(a)&&(c=!0)}),c&&p6(l)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function y6(t,e){const n=Kt(t),i=e.batch.batchId;try{const r=await $R(n.localStore,e);qA(n,i,null),UA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Fd(n,r)}catch(r){await aA(r)}}async function v6(t,e,n){const i=Kt(t);try{const r=await function(o,a){const l=Kt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Dn(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);qA(i,e,n),UA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Fd(i,r)}catch(r){await aA(r)}}function UA(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function qA(t,e,n){const i=Kt(t);let r=i.Sa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}async function Fd(t,e,n){const i=Kt(t),r=[],s=[],o=[];i.ma.isEmpty()||(i.ma.forEach((a,l)=>{o.push(i.va(l,e,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const h=o1.Qi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),i.Va.a_(r),await async function(l,c){const h=Kt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Te.forEach(c,m=>Te.forEach(m.ki,p=>h.persistence.referenceDelegate.addReference(d,m.targetId,p)).next(()=>Te.forEach(m.qi,p=>h.persistence.referenceDelegate.removeReference(d,m.targetId,p)))))}catch(d){if(!Nd(d))throw d;ze("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const p=h.ts.get(m),v=p.snapshotVersion,b=p.withLastLimboFreeSnapshotVersion(v);h.ts=h.ts.insert(m,b)}}}(i.localStore,s))}async function _6(t,e){const n=Kt(t);if(!n.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const i=await DA(n.localStore,e);n.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(l=>{l.reject(new nt(Pe.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Fd(n,i._s)}}function w6(t){const e=Kt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v6.bind(null,e),e}class vv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Dd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return GR(this.persistence,new zR,e.initialUser,this.serializer)}createPersistence(e){return new UR(s1.jr,this.serializer)}createSharedClientState(e){return new XR}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class b6{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_6.bind(null,this.syncEngine),await f6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new d6}()}createDatastore(e){const n=Dd(e.databaseInfo.databaseId),i=function(s){return new e6(s)}(e.databaseInfo);return function(s,o,a,l){return new i6(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new s6(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>yv(this.syncEngine,n,0),function(){return gv.D()?new gv:new JR}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new g6(r,s,o,a,l,c);return h&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const i=Kt(n);ze("RemoteStore","RemoteStore shutting down."),i.C_.add(5),await Nu(i),i.F_.shutdown(),i.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Zn.UNAUTHENTICATED,this.clientId=oA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{ze("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(ze("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nt(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=BA(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function yg(t,e){t.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await DA(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _v(t,e){t.asyncQueue.verifyOperationInProgress();const n=await x6(t);ze("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>mv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>mv(e.remoteStore,s)),t._onlineComponents=e}function S6(t){return t.name==="FirebaseError"?t.code===Pe.FAILED_PRECONDITION||t.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function x6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ze("FirestoreClient","Using user provided OfflineComponentProvider");try{await yg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!S6(n))throw n;Pf("Error using user provided cache. Falling back to memory cache: "+n),await yg(t,new vv)}}else ze("FirestoreClient","Using default OfflineComponentProvider"),await yg(t,new vv);return t._offlineComponents}async function E6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ze("FirestoreClient","Using user provided OnlineComponentProvider"),await _v(t,t._uninitializedComponentsProvider._online)):(ze("FirestoreClient","Using default OnlineComponentProvider"),await _v(t,new b6))),t._onlineComponents}function T6(t){return E6(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t,e,n){if(!n)throw new nt(Pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P6(t,e,n,i){if(e===!0&&i===!0)throw new nt(Pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bv(t){if(!ht.isDocumentKey(t))throw new nt(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function l1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":vt()}function Lm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new nt(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=l1(t);throw new nt(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new nt(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new nt(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new nt(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new nt(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new nt(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class c1{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Av({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new nt(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new nt(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Av(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new vL;switch(i.type){case"firstParty":return new AL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new nt(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=wv.get(n);i&&(ze("ComponentProvider","Removing Datastore"),wv.delete(n),i.terminate())}(this),Promise.resolve()}}function C6(t,e,n,i={}){var r;const s=(t=Lm(t,c1))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Pf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Zn.MOCK_USER;else{a=f_(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new nt(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Zn(c)}t._authCredentials=new _L(new sA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new u1(this.firestore,e,this._query)}}class rs{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rs(this.firestore,e,this._key)}}class ou extends u1{constructor(e,n,i){super(e,n,KL(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rs(this.firestore,null,new ht(e))}withConverter(e){return new ou(this.firestore,e,this._path)}}function N6(t,e,...n){if(t=Rn(t),arguments.length===1&&(e=oA.newId()),I6("doc","path",e),t instanceof c1){const i=vn.fromString(e,...n);return bv(i),new rs(t,null,new ht(i))}{if(!(t instanceof rs||t instanceof ou))throw new nt(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vn.fromString(e,...n));return bv(i),new rs(t.firestore,t instanceof ou?t.converter:null,new ht(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new OA(this,"async_queue_retry"),this.iu=()=>{const n=mg();n&&ze("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=mg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=mg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new qo;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Nd(e))throw e;ze("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Jo("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=n,n}enqueueAfterDelay(e,n,i){this.su(),this.ru.indexOf(e)>-1&&(n=0);const r=a1.createAndSchedule(this,e,n,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&vt()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}class zA extends c1{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new L6}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||WA(this),this._firestoreClient.terminate()}}function R6(t,e){const n=typeof t=="object"?t:t0(),i=typeof t=="string"?t:e||"(default)",r=sd(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=c_("firestore");s&&C6(r,...s)}return r}function k6(t){return t._firestoreClient||WA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function WA(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new OL(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,HA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new A6(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new au(us.fromBase64String(e))}catch(n){throw new nt(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new au(us.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new nt(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new nt(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new nt(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=/^__.*__$/;class O6{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new oa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}function YA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class h1{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new h1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Ff(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(YA(this.Iu)&&D6.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class M6{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Dd(e)}pu(e,n,i,r=!1){return new h1({Iu:e,methodName:n,gu:i,path:Hn.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function F6(t){const e=t._freezeSettings(),n=Dd(t._databaseId);return new M6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function j6(t,e,n,i,r,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,r);ZA("Data must be an object, but it was:",o,i);const a=JA(i,o);let l,c;if(s.merge)l=new ar(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const m=V6(e,d,n);if(!o.contains(m))throw new nt(Pe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);q6(h,m)||h.push(m)}l=new ar(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new O6(new sr(a),l,c)}function XA(t,e){if(QA(t=Rn(t)))return ZA("Unsupported field value:",e,t),JA(t,e);if(t instanceof $A)return function(i,r){if(!YA(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=XA(a,r.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ln.fromDate(i);return{timestampValue:Cm(r.serializer,s)}}if(i instanceof Ln){const s=new Ln(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Cm(r.serializer,s)}}if(i instanceof KA)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof au)return{bytesValue:yR(r.serializer,i._byteString)};if(i instanceof rs){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:RA(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${l1(i)}`)}(t,e)}function JA(t,e){const n={};return cA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pu(t,(i,r)=>{const s=XA(r,e.Eu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function QA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ln||t instanceof KA||t instanceof au||t instanceof rs||t instanceof $A)}function ZA(t,e,n){if(!QA(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=l1(n);throw i==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+i)}}function V6(t,e,n){if((e=Rn(e))instanceof GA)return e._internalPath;if(typeof e=="string")return U6(t,e);throw Ff("Field path arguments must be of type string or ",t,!1,void 0,n)}const B6=new RegExp("[~\\*/\\[\\]]");function U6(t,e,n){if(e.search(B6)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new GA(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ff(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new nt(Pe.INVALID_ARGUMENT,a+t+l)}function q6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}function z6(t,e,n){t=Lm(t,rs);const i=Lm(t.firestore,zA),r=H6(t.converter,e,n);return W6(i,[j6(F6(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,is.none())])}function W6(t,e){return function(i,r){const s=new qo;return i.asyncQueue.enqueueAndForget(async()=>m6(await T6(i),r,s)),s.promise}(k6(t),e)}(function(e,n=!0){(function(r){El=r})(ta),Go(new Xs("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new zA(new wL(i.getProvider("auth-internal")),new xL(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new nt(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lf(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Nr(tv,"4.3.2",e),Nr(tv,"4.3.2","esm2017")})();function f1(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function eS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G6=eS,tS=new pu("auth","Firebase",eS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new rd("@firebase/auth");function $6(t,...e){jf.logLevel<=gt.WARN&&jf.warn(`Auth (${ta}): ${t}`,...e)}function Qh(t,...e){jf.logLevel<=gt.ERROR&&jf.error(`Auth (${ta}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t,...e){throw d1(t,...e)}function Rr(t,...e){return d1(t,...e)}function K6(t,e,n){const i=Object.assign(Object.assign({},G6()),{[e]:n});return new pu("auth","Firebase",i).create(e,{appName:t.name})}function d1(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return tS.create(t,...e)}function Ze(t,e,...n){if(!t)throw d1(e,...n)}function Zr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qh(e),new Error(e)}function hs(t,e){t||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Y6(){return Sv()==="http:"||Sv()==="https:"}function Sv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y6()||ZT()||"connection"in navigator)?navigator.onLine:!0}function J6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n){this.shortDelay=e,this.longDelay=n,hs(n>e,"Short delay should be less than long delay!"),this.isMobile=Qm()||d_()}get(){return X6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t,e){hs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=new Ru(3e4,6e4);function ao(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function lo(t,e,n,i,r={}){return iS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=_l(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),nS.fetch()(rS(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function iS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Q6),e);try{const r=new tk(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Hh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hh(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw K6(t,h,c);cr(t,h)}}catch(r){if(r instanceof ds)throw r;cr(t,"network-request-failed",{message:String(r)})}}async function ku(t,e,n,i,r={}){const s=await lo(t,e,n,i,r);return"mfaPendingCredential"in s&&cr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function rS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?p1(t.config,r):`${t.config.apiScheme}://${r}`}function ek(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Rr(this.auth,"network-request-failed")),Z6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Rr(t,e,i);return r.customData._tokenResponse=n,r}function xv(t){return t!==void 0&&t.enterprise!==void 0}class nk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ek(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ik(t,e){return lo(t,"GET","/v2/recaptchaConfig",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(t,e){return lo(t,"POST","/v1/accounts:delete",e)}async function sk(t,e){return lo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ok(t,e=!1){const n=Rn(t),i=await n.getIdToken(e),r=g1(i);Ze(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Dc(vg(r.auth_time)),issuedAtTime:Dc(vg(r.iat)),expirationTime:Dc(vg(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function vg(t){return Number(t)*1e3}function g1(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Qh("JWT malformed, contained fewer than 3 sections"),null;try{const r=lf(n);return r?JSON.parse(r):(Qh("Failed to decode base64 JWT payload"),null)}catch(r){return Qh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ak(t){const e=g1(t);return Ze(e,"internal-error"),Ze(typeof e.exp<"u","internal-error"),Ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ds&&lk(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function lk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dc(this.lastLoginAt),this.creationTime=Dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vf(t){var e;const n=t.auth,i=await t.getIdToken(),r=await lu(t,sk(n,{idToken:i}));Ze(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fk(s.providerUserInfo):[],a=hk(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new sS(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function uk(t){const e=Rn(t);await Vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hk(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function fk(t){return t.map(e=>{var{providerId:n}=e,i=f1(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){const n=await iS(t,{},async()=>{const i=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=rS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nS.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pk(t,e){return lo(t,"POST","/v2/accounts:revokeToken",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ze(e.idToken,"internal-error"),Ze(typeof e.idToken<"u","internal-error"),Ze(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ak(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Ze(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await dk(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new cu;return i&&(Ze(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Ze(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Ze(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cu,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t,e){Ze(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zo{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=f1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ck(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new sS(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await lu(this,this.stsTokenManager.getToken(this.auth,e));return Ze(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ok(this,e)}reload(){return uk(this)}_assign(e){this!==e&&(Ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Vf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await lu(this,rk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,A=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:k,isAnonymous:F,providerData:G,stsTokenManager:O}=n;Ze(S&&O,e,"internal-error");const N=cu.fromJSON(this.name,O);Ze(typeof S=="string",e,"internal-error"),ks(d,e.name),ks(m,e.name),Ze(typeof k=="boolean",e,"internal-error"),Ze(typeof F=="boolean",e,"internal-error"),ks(p,e.name),ks(v,e.name),ks(b,e.name),ks(x,e.name),ks(w,e.name),ks(A,e.name);const $=new zo({uid:S,auth:e,email:m,emailVerified:k,displayName:d,isAnonymous:F,photoURL:v,phoneNumber:p,tenantId:b,stsTokenManager:N,createdAt:w,lastLoginAt:A});return G&&Array.isArray(G)&&($.providerData=G.map(J=>Object.assign({},J))),x&&($._redirectEventId=x),$}static async _fromIdTokenResponse(e,n,i=!1){const r=new cu;r.updateFromServerResponse(n);const s=new zo({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Vf(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new Map;function es(t){hs(t instanceof Function,"Expected a class definition");let e=Ev.get(t);return e?(hs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ev.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oS.type="NONE";const Tv=oS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t,e,n){return`firebase:${t}:${e}:${n}`}class il{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Zh(this.userKey,r.apiKey,s),this.fullPersistenceKey=Zh("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new il(es(Tv),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||es(Tv);const o=Zh(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=zo._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new il(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new il(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hS(e))return"Blackberry";if(fS(e))return"Webos";if(m1(e))return"Safari";if((e.includes("chrome/")||lS(e))&&!e.includes("edge/"))return"Chrome";if(uS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function aS(t=oi()){return/firefox\//i.test(t)}function m1(t=oi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lS(t=oi()){return/crios\//i.test(t)}function cS(t=oi()){return/iemobile/i.test(t)}function uS(t=oi()){return/android/i.test(t)}function hS(t=oi()){return/blackberry/i.test(t)}function fS(t=oi()){return/webos/i.test(t)}function jd(t=oi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gk(t=oi()){var e;return jd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mk(){return e4()&&document.documentMode===10}function dS(t=oi()){return jd(t)||uS(t)||fS(t)||hS(t)||/windows phone/i.test(t)||cS(t)}function yk(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t,e=[]){let n;switch(t){case"Browser":n=Iv(oi());break;case"Worker":n=`${Iv(oi())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ta}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(t,e={}){return lo(t,"GET","/v2/passwordPolicy",ao(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=6;class bk{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pv(this),this.idTokenSubscription=new Pv(this),this.beforeStateQueue=new vk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=es(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Rn(e):null;return n&&Ze(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _k(this),n=new bk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await pk(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&es(e)||this._popupRedirectResolver;Ze(n,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ze(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$6(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function aa(t){return Rn(t)}class Pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=c4(n=>this.observer=n)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function gS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Rr("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",Sk().appendChild(i)})}function xk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ek="https://www.google.com/recaptcha/enterprise.js?render=",Tk="recaptcha-enterprise",Ik="NO_RECAPTCHA";class Pk{constructor(e){this.type=Tk,this.auth=aa(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{ik(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new nk(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;xv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Ik)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&xv(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}gS(Ek+a).then(()=>{r(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function Cv(t,e,n,i=!1){const r=new Pk(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function km(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Cv(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Cv(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t,e){const n=sd(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(uf(s,e??{}))return r;cr(r,"already-initialized")}return n.initialize({options:e})}function Nk(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Lk(t,e,n){const i=aa(t);Ze(i._canInitEmulator,i,"emulator-config-failed"),Ze(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=mS(e),{host:o,port:a}=Rk(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||kk()}function mS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Rk(t){const e=mS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Nv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Nv(o)}}}function Nv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,n){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function Dk(t,e){return lo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e){return ku(t,"POST","/v1/accounts:signInWithPassword",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e){return ku(t,"POST","/v1/accounts:signInWithEmailLink",ao(t,e))}async function Fk(t,e){return ku(t,"POST","/v1/accounts:signInWithEmailLink",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends y1{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new uu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new uu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return km(e,n,"signInWithPassword",Ok);case"emailLink":return Mk(e,{email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return km(e,i,"signUpPassword",Dk);case"emailLink":return Fk(e,{idToken:n,email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t,e){return ku(t,"POST","/v1/accounts:signInWithIdp",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="http://localhost";class Zo extends y1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=f1(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Zo(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return rl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,rl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,rl(e,n)}buildRequest(){const e={requestUri:jk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_l(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Bk(t){const e=gc(mc(t)).link,n=e?gc(mc(e)).deep_link_id:null,i=gc(mc(t)).deep_link_id;return(i?gc(mc(i)).link:null)||i||n||e||t}class v1{constructor(e){var n,i,r,s,o,a;const l=gc(mc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=Vk((r=l.mode)!==null&&r!==void 0?r:null);Ze(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Bk(e);try{return new v1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.providerId=Il.PROVIDER_ID}static credential(e,n){return uu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=v1.parseLink(n);return Ze(i,"argument-error"),uu._fromEmailAndCode(e,i.code,i.tenantId)}}Il.PROVIDER_ID="password";Il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends yS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Du{constructor(){super("facebook.com")}static credential(e){return Zo._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return js.credential(n,i)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Du{constructor(){super("github.com")}static credential(e){return Zo._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Du{constructor(){super("twitter.com")}static credential(e,n){return Zo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Bs.credential(n,i)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e){return ku(t,"POST","/v1/accounts:signUp",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await zo._fromIdTokenResponse(e,i,r),o=Lv(i);return new ea({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Lv(i);return new ea({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends ds{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Bf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Bf(e,n,i,r)}}function vS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bf._fromErrorAndOperation(t,s,e,i):s})}async function qk(t,e,n=!1){const i=await lu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ea._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await lu(t,vS(i,r,e,t),n);Ze(s.idToken,i,"internal-error");const o=g1(s.idToken);Ze(o,i,"internal-error");const{sub:a}=o;return Ze(t.uid===a,i,"user-mismatch"),ea._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&cr(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(t,e,n=!1){const i="signIn",r=await vS(t,i,e),s=await ea._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function zk(t,e){return _S(aa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(t){const e=aa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wk(t,e,n){const i=aa(t),o=await km(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&wS(t),l}),a=await ea._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function Gk(t,e,n){return zk(Rn(t),Il.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&wS(t),i})}function $k(t,e,n,i){return Rn(t).onIdTokenChanged(e,n,i)}function Kk(t,e,n){return Rn(t).beforeAuthStateChanged(e,n)}function Yk(t){return Rn(t).signOut()}const Uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(){const t=oi();return m1(t)||jd(t)}const Jk=1e3,Qk=10;class AS extends bS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Xk()&&yk(),this.fallbackToPolling=dS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);mk()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Qk):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AS.type="LOCAL";const Zk=AS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends bS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SS.type="SESSION";const xS=SS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Vd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await eD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=_1("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const m=d;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function nD(t){kr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function iD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sD(){return ES()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="firebaseLocalStorageDb",oD=1,qf="firebaseLocalStorage",IS="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bd(t,e){return t.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function aD(){const t=indexedDB.deleteDatabase(TS);return new Ou(t).toPromise()}function Dm(){const t=indexedDB.open(TS,oD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(qf,{keyPath:IS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(qf)?e(i):(i.close(),await aD(),e(await Dm()))})})}async function Rv(t,e,n){const i=Bd(t,!0).put({[IS]:e,value:n});return new Ou(i).toPromise()}async function lD(t,e){const n=Bd(t,!1).get(e),i=await new Ou(n).toPromise();return i===void 0?null:i.value}function kv(t,e){const n=Bd(t,!0).delete(e);return new Ou(n).toPromise()}const cD=800,uD=3;class PS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>uD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ES()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vd._getInstance(sD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iD(),!this.activeServiceWorker)return;this.sender=new tD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dm();return await Rv(e,Uf,"1"),await kv(e,Uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Rv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>lD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Bd(r,!1).getAll();return new Ou(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PS.type="LOCAL";const hD=PS;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e){return e?es(e):(Ze(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1 extends y1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dD(t){return _S(t.auth,new w1(t),t.bypassAuthState)}function pD(t){const{auth:e,user:n}=t;return Ze(n,e,"internal-error"),Hk(n,new w1(t),t.bypassAuthState)}async function gD(t){const{auth:e,user:n}=t;return Ze(n,e,"internal-error"),qk(n,new w1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dD;case"linkViaPopup":case"linkViaRedirect":return gD;case"reauthViaPopup":case"reauthViaRedirect":return pD;default:cr(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new Ru(2e3,1e4);class $a extends CS{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,$a.currentPopupAction&&$a.currentPopupAction.cancel(),$a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ze(e,this.auth,"internal-error"),e}async onExecution(){hs(this.filter.length===1,"Popup operations only handle one event");const e=_1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mD.get())};e()}}$a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="pendingRedirect",ef=new Map;class vD extends CS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ef.get(this.auth._key());if(!e){try{const i=await _D(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ef.set(this.auth._key(),e)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _D(t,e){const n=AD(e),i=bD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function wD(t,e){ef.set(t._key(),e)}function bD(t){return es(t._redirectPersistence)}function AD(t){return Zh(yD,t.config.apiKey,t.name)}async function SD(t,e,n=!1){const i=aa(t),r=fD(i,e),o=await new vD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=10*60*1e3;class ED{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!NS(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Rr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e={}){return lo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CD=/^https?/;async function ND(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ID(t);for(const n of e)try{if(LD(n))return}catch{}cr(t,"unauthorized-domain")}function LD(t){const e=Rm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!CD.test(n))return!1;if(PD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new Ru(3e4,6e4);function Ov(){const t=kr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kD(t){return new Promise((e,n)=>{var i,r,s;function o(){Ov(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ov(),n(Rr(t,"network-request-failed"))},timeout:RD.get()})}if(!((r=(i=kr().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=kr().gapi)===null||s===void 0)&&s.load)o();else{const a=xk("iframefcb");return kr()[a]=()=>{gapi.load?o():n(Rr(t,"network-request-failed"))},gS(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw tf=null,e})}let tf=null;function DD(t){return tf=tf||kD(t),tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new Ru(5e3,15e3),MD="__/auth/iframe",FD="emulator/auth/iframe",jD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BD(t){const e=t.config;Ze(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?p1(e,FD):`https://${t.config.authDomain}/${MD}`,i={apiKey:e.apiKey,appName:t.name,v:ta},r=VD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${_l(i).slice(1)}`}async function UD(t){const e=await DD(t),n=kr().gapi;return Ze(n,t,"internal-error"),e.open({where:document.body,url:BD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Rr(t,"network-request-failed"),a=kr().setTimeout(()=>{s(o)},OD.get());function l(){kr().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HD=500,zD=600,WD="_blank",GD="http://localhost";class Mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $D(t,e,n,i=HD,r=zD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},qD),{width:i.toString(),height:r.toString(),top:s,left:o}),c=oi().toLowerCase();n&&(a=lS(c)?WD:n),aS(c)&&(e=e||GD,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[p,v])=>`${m}${p}=${v},`,"");if(gk(c)&&a!=="_self")return KD(e||"",a),new Mv(null);const d=window.open(e||"",a,h);Ze(d,t,"popup-blocked");try{d.focus()}catch{}return new Mv(d)}function KD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="__/auth/handler",XD="emulator/auth/handler",JD=encodeURIComponent("fac");async function Fv(t,e,n,i,r,s){Ze(t.config.authDomain,t,"auth-domain-config-required"),Ze(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ta,eventId:r};if(e instanceof yS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Og(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof Du){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${JD}=${encodeURIComponent(l)}`:"";return`${QD(t)}?${_l(a).slice(1)}${c}`}function QD({config:t}){return t.emulator?p1(t,XD):`https://${t.authDomain}/${YD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="webStorageSupport";class ZD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xS,this._completeRedirectFn=SD,this._overrideRedirectResult=wD}async _openPopup(e,n,i,r){var s;hs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Fv(e,n,i,Rm(),r);return $D(e,o,_1())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await Fv(e,n,i,Rm(),r);return nD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(hs(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await UD(e),i=new ED(e);return n.register("authEvent",r=>(Ze(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_g,{type:_g},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[_g];o!==void 0&&n(!!o),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ND(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dS()||m1()||jd()}}const eO=ZD;var jv="@firebase/auth",Vv="1.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function iO(t){Go(new Xs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Ze(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pS(t)},c=new Ak(i,r,s,l);return Nk(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Go(new Xs("auth-internal",e=>{const n=aa(e.getProvider("auth").getImmediate());return(i=>new tO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nr(jv,Vv,nO(t)),Nr(jv,Vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=5*60,sO=h_("authIdTokenMaxAge")||rO;let Bv=null;const oO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>sO)return;const r=n==null?void 0:n.token;Bv!==r&&(Bv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function b1(t=t0()){const e=sd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ck(t,{popupRedirectResolver:eO,persistence:[hD,Zk,xS]}),i=h_("authTokenSyncURL");if(i){const s=oO(i);Kk(n,s,()=>s(n.currentUser)),$k(n,o=>s(o))}const r=l_("auth");return r&&Lk(n,`http://${r}`),n}iO("Browser");const aO=()=>{const[t,e]=be.useState(null),[n,i]=be.useState(""),[r,s]=be.useState(""),[o,a]=be.useState(""),[l,c]=be.useState(""),[h,d]=be.useState(""),[m,p]=be.useState(""),[v,b]=be.useState(""),x=async w=>{w.preventDefault();const S=await(await fetch("http://127.0.0.1:8000/predict/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`N=${n}&P=${r}&K=${o}&temperature=${l}&humidity=${h}&ph=${m}&rainfall=${v}`})).json();console.log(S),e(S.prediction);const k=$3(aC,"predictions/");Vw(K3(k),{N:n,P:r,K:o,temperature:l,humidity:h,ph:m,rainfall:v,prediction:S.prediction}).catch(N=>console.error("Error writing to Firebase: ",N));const F=new $e,G=[{parameter:"N",value:n},{parameter:"P",value:r},{parameter:"K",value:o},{parameter:"Temperature",value:l},{parameter:"Humidity",value:h},{parameter:"pH",value:m},{parameter:"Rainfall",value:v}],O=[{parameter:"Prediction",value:S.prediction}];F.autoTable({head:[["Parameter","Value"]],body:G.map(N=>[N.parameter,N.value]),prediction:O.map(N=>[N.parameter,N.value]),styles:{fillColor:[255,255,255],textColor:[0,0,0],fontStyle:"bold",fontSize:14},headStyles:{textColor:[0,128,0]},predictionStyles:{textColor:[0,128,0]},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:"auto",halign:"right"}}}),F.autoTable({body:O.map(N=>[N.parameter,N.value]),styles:{fillColor:[255,255,255],textColor:[0,128,0],fontStyle:"bold",fontSize:14},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:"auto",halign:"right"}}}),F.save("Prediction.pdf")};return se.jsxs("div",{className:"w-full p-10 flex flex-col",children:[se.jsx("div",{className:"text-gray-700 font-bold text-4xl flex flex-row justify-center",children:se.jsx("h1",{children:"PREDICT"})}),se.jsxs("div",{className:"border-2 border-green-700 pb-5 pt-2 m-11 mx-20 shadow-2xl rounded-xl",children:[se.jsxs("form",{className:"w-full pr-10",onSubmit:x,children:[se.jsxs("div",{className:"flex justify-evenly",children:[se.jsxs("div",{className:"flex flex-col w-20 ",children:[se.jsx("label",{className:"self-center p-2 font-medium",children:"Nitrogen"}),se.jsx("input",{type:"number",value:n,onChange:w=>i(w.target.value),className:"p-1 bg-gray-200 border border-green-800 rounded-md"})]}),se.jsxs("div",{className:"flex flex-col w-20 ",children:[se.jsx("label",{className:"self-center p-2 font-medium",children:"Phosphorus"}),se.jsx("input",{type:"number",value:r,onChange:w=>s(w.target.value),className:"p-1 bg-gray-200 border border-green-800 rounded-md"})]}),se.jsxs("div",{className:"flex flex-col w-20 ",children:[se.jsx("label",{className:"self-center p-2 font-medium",children:"Potassium"}),se.jsx("input",{type:"number",value:o,onChange:w=>a(w.target.value),className:"p-1 bg-gray-200 border border-green-800 rounded-md"})]})]}),se.jsx("div",{className:"flex justify-around px-[20%]",children:se.jsxs("div",{className:"flex flex-col justify-center pt-8",children:[se.jsx("label",{className:"self-center p-2 font-medium ",children:"Temperature 🌡️"}),se.jsx("input",{type:"number",value:l,onChange:w=>c(w.target.value),className:"p-1 bg-gray-200 border border-green-800 rounded-md"})]})}),se.jsxs("div",{className:"flex flex-col justify-center pt-8",children:[se.jsx("label",{className:"self-center p-2 font-medium",children:"pH 🧪"}),se.jsx("input",{type:"number",value:m,onChange:w=>p(w.target.value),className:"px-4 w-[10%] h-9 bg-gray-200 border border-green-800 rounded-md self-center"})]}),se.jsxs("div",{className:"flex justify-around px-[20%]",children:[se.jsxs("div",{className:"flex flex-col justify-center pt-8",children:[se.jsx("label",{className:"self-center p-2 font-medium ",children:"Rainfall 🌧️"}),se.jsx("input",{type:"number",value:v,onChange:w=>b(w.target.value),className:"px-4 w-[50%] h-9 bg-gray-200 border border-green-800 rounded-md self-center"})]}),se.jsxs("div",{className:"flex flex-col justify-center pt-8",children:[se.jsx("label",{className:"self-center p-2 font-medium ",children:"Humidity ♨️"}),se.jsx("input",{type:"number",value:h,onChange:w=>d(w.target.value),className:"px-4 w-[50%] h-9 bg-gray-200 border border-green-800 rounded-md self-center"})]})]}),se.jsx("div",{className:"flex flex-row justify-center",children:se.jsx("button",{className:"mt-9 w-20 h-10 bg-green-950 rounded-xl text-white",type:"submit",children:"Predict"})})]}),se.jsxs("div",{className:"flex flex-row justify-center pr-10 h-20 pt-7 text-2xl "+(t?" block":"hidden "),children:["The data you provided suggests that you should cultivate: ",t]})]})]})};function lO({selection:t}){return t===0?se.jsx(qT,{}):t===1?se.jsx(aO,{}):t===2?se.jsx(HT,{}):se.jsx(zT,{})}const LS=be.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ud=be.createContext({}),A1=be.createContext(null),qd=typeof document<"u",cO=qd?be.useLayoutEffect:be.useEffect,RS=be.createContext({strict:!1});function uO(t,e,n,i){const{visualElement:r}=be.useContext(Ud),s=be.useContext(RS),o=be.useContext(A1),a=be.useContext(LS).reducedMotion,l=be.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(t,{visualState:e,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;be.useInsertionEffect(()=>{c&&c.update(n,o)});const h=be.useRef(!!window.HandoffAppearAnimations);return cO(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),be.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,h.current=!1)}),c}function Ka(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function hO(t,e,n){return be.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Ka(n)&&(n.current=i))},[e])}function hu(t){return typeof t=="string"||Array.isArray(t)}function Hd(t){return typeof t=="object"&&typeof t.start=="function"}const S1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],x1=["initial",...S1];function zd(t){return Hd(t.animate)||x1.some(e=>hu(t[e]))}function kS(t){return!!(zd(t)||t.variants)}function fO(t,e){if(zd(t)){const{initial:n,animate:i}=t;return{initial:n===!1||hu(n)?n:void 0,animate:hu(i)?i:void 0}}return t.inherit!==!1?e:{}}function dO(t){const{initial:e,animate:n}=fO(t,be.useContext(Ud));return be.useMemo(()=>({initial:e,animate:n}),[Uv(e),Uv(n)])}function Uv(t){return Array.isArray(t)?t.join(" "):t}const qv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fu={};for(const t in qv)fu[t]={isEnabled:e=>qv[t].some(n=>!!e[n])};function pO(t){for(const e in t)fu[e]={...fu[e],...t[e]}}const DS=be.createContext({}),OS=be.createContext({}),gO=Symbol.for("motionComponentSymbol");function mO({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&pO(t);function s(a,l){let c;const h={...be.useContext(LS),...a,layoutId:yO(a)},{isStatic:d}=h,m=dO(a),p=i(a,d);if(!d&&qd){m.visualElement=uO(r,p,h,e);const v=be.useContext(OS),b=be.useContext(RS).strict;m.visualElement&&(c=m.visualElement.loadFeatures(h,b,t,v))}return be.createElement(Ud.Provider,{value:m},c&&m.visualElement?be.createElement(c,{visualElement:m.visualElement,...h}):null,n(r,a,hO(p,m.visualElement,l),p,d,m.visualElement))}const o=be.forwardRef(s);return o[gO]=r,o}function yO({layoutId:t}){const e=be.useContext(DS).id;return e&&t!==void 0?e+"-"+t:t}function vO(t){function e(i,r={}){return mO(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const _O=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function E1(t){return typeof t!="string"||t.includes("-")?!1:!!(_O.indexOf(t)>-1||/[A-Z]/.test(t))}const Hf={};function wO(t){Object.assign(Hf,t)}const Mu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],la=new Set(Mu);function MS(t,{layout:e,layoutId:n}){return la.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Hf[t]||t==="opacity")}const wi=t=>!!(t&&t.getVelocity),bO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AO=Mu.length;function SO(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let s="";for(let o=0;o<AO;o++){const a=Mu[o];if(t[a]!==void 0){const l=bO[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(t,i?"":s):n&&i&&(s="none"),s}const FS=t=>e=>typeof e=="string"&&e.startsWith(t),jS=FS("--"),Om=FS("var(--"),xO=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,EO=(t,e)=>e&&typeof t=="number"?e.transform(t):t,io=(t,e,n)=>Math.min(Math.max(n,t),e),ca={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Oc={...ca,transform:t=>io(0,1,t)},zh={...ca,default:1},Mc=t=>Math.round(t*1e5)/1e5,Wd=/(-)?([\d]*\.?[\d])+/g,VS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,TO=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Fu(t){return typeof t=="string"}const ju=t=>({test:e=>Fu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ds=ju("deg"),Dr=ju("%"),Xe=ju("px"),IO=ju("vh"),PO=ju("vw"),Hv={...Dr,parse:t=>Dr.parse(t)/100,transform:t=>Dr.transform(t*100)},zv={...ca,transform:Math.round},BS={borderWidth:Xe,borderTopWidth:Xe,borderRightWidth:Xe,borderBottomWidth:Xe,borderLeftWidth:Xe,borderRadius:Xe,radius:Xe,borderTopLeftRadius:Xe,borderTopRightRadius:Xe,borderBottomRightRadius:Xe,borderBottomLeftRadius:Xe,width:Xe,maxWidth:Xe,height:Xe,maxHeight:Xe,size:Xe,top:Xe,right:Xe,bottom:Xe,left:Xe,padding:Xe,paddingTop:Xe,paddingRight:Xe,paddingBottom:Xe,paddingLeft:Xe,margin:Xe,marginTop:Xe,marginRight:Xe,marginBottom:Xe,marginLeft:Xe,rotate:Ds,rotateX:Ds,rotateY:Ds,rotateZ:Ds,scale:zh,scaleX:zh,scaleY:zh,scaleZ:zh,skew:Ds,skewX:Ds,skewY:Ds,distance:Xe,translateX:Xe,translateY:Xe,translateZ:Xe,x:Xe,y:Xe,z:Xe,perspective:Xe,transformPerspective:Xe,opacity:Oc,originX:Hv,originY:Hv,originZ:Xe,zIndex:zv,fillOpacity:Oc,strokeOpacity:Oc,numOctaves:zv};function T1(t,e,n,i){const{style:r,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,h=!0;for(const d in e){const m=e[d];if(jS(d)){s[d]=m;continue}const p=BS[d],v=EO(m,p);if(la.has(d)){if(l=!0,o[d]=v,!h)continue;m!==(p.default||0)&&(h=!1)}else d.startsWith("origin")?(c=!0,a[d]=v):r[d]=v}if(e.transform||(l||i?r.transform=SO(t.transform,n,h,i):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:m="50%",originZ:p=0}=a;r.transformOrigin=`${d} ${m} ${p}`}}const I1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function US(t,e,n){for(const i in e)!wi(e[i])&&!MS(i,n)&&(t[i]=e[i])}function CO({transformTemplate:t},e,n){return be.useMemo(()=>{const i=I1();return T1(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function NO(t,e,n){const i=t.style||{},r={};return US(r,i,t),Object.assign(r,CO(t,e,n)),t.transformValues?t.transformValues(r):r}function LO(t,e,n){const i={},r=NO(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const RO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function zf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||RO.has(t)}let qS=t=>!zf(t);function kO(t){t&&(qS=e=>e.startsWith("on")?!zf(e):t(e))}try{kO(require("@emotion/is-prop-valid").default)}catch{}function DO(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(qS(r)||n===!0&&zf(r)||!e&&!zf(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function Wv(t,e,n){return typeof t=="string"?t:Xe.transform(e+n*t)}function OO(t,e,n){const i=Wv(e,t.x,t.width),r=Wv(n,t.y,t.height);return`${i} ${r}`}const MO={offset:"stroke-dashoffset",array:"stroke-dasharray"},FO={offset:"strokeDashoffset",array:"strokeDasharray"};function jO(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?MO:FO;t[s.offset]=Xe.transform(-i);const o=Xe.transform(e),a=Xe.transform(n);t[s.array]=`${o} ${a}`}function P1(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,d,m){if(T1(t,c,h,m),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:v,dimensions:b}=t;p.transform&&(b&&(v.transform=p.transform),delete p.transform),b&&(r!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=OO(b,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),i!==void 0&&(p.scale=i),o!==void 0&&jO(p,o,a,l,!1)}const HS=()=>({...I1(),attrs:{}}),C1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function VO(t,e,n,i){const r=be.useMemo(()=>{const s=HS();return P1(s,e,{enableHardwareAcceleration:!1},C1(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};US(s,t.style,t),r.style={...s,...r.style}}return r}function BO(t=!1){return(n,i,r,{latestValues:s},o)=>{const l=(E1(n)?VO:LO)(i,s,o,n),h={...DO(i,typeof n=="string",t),...l,ref:r},{children:d}=i,m=be.useMemo(()=>wi(d)?d.get():d,[d]);return be.createElement(n,{...h,children:m})}}const N1=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function zS(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const WS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function GS(t,e,n,i){zS(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(WS.has(r)?r:N1(r),e.attrs[r])}function L1(t,e){const{style:n}=t,i={};for(const r in n)(wi(n[r])||e.style&&wi(e.style[r])||MS(r,t))&&(i[r]=n[r]);return i}function $S(t,e){const n=L1(t,e);for(const i in t)if(wi(t[i])||wi(e[i])){const r=Mu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function R1(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function UO(t){const e=be.useRef(null);return e.current===null&&(e.current=t()),e.current}const Wf=t=>Array.isArray(t),qO=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),HO=t=>Wf(t)?t[t.length-1]||0:t;function nf(t){const e=wi(t)?t.get():t;return qO(e)?e.toValue():e}function zO({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,s){const o={latestValues:WO(i,r,s,t),renderState:e()};return n&&(o.mount=a=>n(i,a,o)),o}const KS=t=>(e,n)=>{const i=be.useContext(Ud),r=be.useContext(A1),s=()=>zO(t,e,i,r);return n?s():UO(s)};function WO(t,e,n,i){const r={},s=i(t,{});for(const m in s)r[m]=nf(s[m]);let{initial:o,animate:a}=t;const l=zd(t),c=kS(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Hd(d)&&(Array.isArray(d)?d:[d]).forEach(p=>{const v=R1(t,p);if(!v)return;const{transitionEnd:b,transition:x,...w}=v;for(const A in w){let S=w[A];if(Array.isArray(S)){const k=h?S.length-1:0;S=S[k]}S!==null&&(r[A]=S)}for(const A in b)r[A]=b[A]}),r}const sn=t=>t;class Gv{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function GO(t){let e=new Gv,n=new Gv,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,h=!1)=>{const d=h&&r,m=d?e:n;return c&&o.add(l),m.add(l)&&d&&r&&(i=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let c=0;c<i;c++){const h=e.order[c];h(l),o.has(h)&&(a.schedule(h),t())}r=!1,s&&(s=!1,a.process(l))}};return a}const Wh=["prepare","read","update","preRender","render","postRender"],$O=40;function KO(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=Wh.reduce((d,m)=>(d[m]=GO(()=>n=!0),d),{}),o=d=>s[d].process(r),a=()=>{const d=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(d-r.timestamp,$O),1),r.timestamp=d,r.isProcessing=!0,Wh.forEach(o),r.isProcessing=!1,n&&e&&(i=!1,t(a))},l=()=>{n=!0,i=!0,r.isProcessing||t(a)};return{schedule:Wh.reduce((d,m)=>{const p=s[m];return d[m]=(v,b=!1,x=!1)=>(n||l(),p.schedule(v,b,x)),d},{}),cancel:d=>Wh.forEach(m=>s[m].cancel(d)),state:r,steps:s}}const{schedule:Gt,cancel:fs,state:In,steps:wg}=KO(typeof requestAnimationFrame<"u"?requestAnimationFrame:sn,!0),YO={useVisualState:KS({scrapeMotionValuesFromProps:$S,createRenderState:HS,onMount:(t,e,{renderState:n,latestValues:i})=>{Gt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Gt.render(()=>{P1(n,i,{enableHardwareAcceleration:!1},C1(e.tagName),t.transformTemplate),GS(e,n)})}})},XO={useVisualState:KS({scrapeMotionValuesFromProps:L1,createRenderState:I1})};function JO(t,{forwardMotionProps:e=!1},n,i){return{...E1(t)?YO:XO,preloadedFeatures:n,useRender:BO(e),createVisualElement:i,Component:t}}function ts(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const YS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Gd(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const QO=t=>e=>YS(e)&&t(e,Gd(e));function ss(t,e,n,i){return ts(t,e,QO(n),i)}const ZO=(t,e)=>n=>e(t(n)),$s=(...t)=>t.reduce(ZO);function XS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const $v=XS("dragHorizontal"),Kv=XS("dragVertical");function JS(t){let e=!1;if(t==="y")e=Kv();else if(t==="x")e=$v();else{const n=$v(),i=Kv();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function QS(){const t=JS(!0);return t?(t(),!1):!0}class co{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Yv(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||QS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[i]&&Gt.update(()=>a[i](s,o))};return ss(t.current,n,r,{passive:!t.getProps()[i]})}class e8 extends co{mount(){this.unmount=$s(Yv(this.node,!0),Yv(this.node,!1))}unmount(){}}class t8 extends co{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$s(ts(this.node.current,"focus",()=>this.onFocus()),ts(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ZS=(t,e)=>e?t===e?!0:ZS(t,e.parentElement):!1;function bg(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Gd(n))}class n8 extends co{constructor(){super(...arguments),this.removeStartListeners=sn,this.removeEndListeners=sn,this.removeAccessibleListeners=sn,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=ss(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h}=this.node.getProps();Gt.update(()=>{ZS(this.node.current,a.target)?c&&c(a,l):h&&h(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=ss(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=$s(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||bg("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&Gt.update(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=ts(this.node.current,"keyup",o),bg("down",(a,l)=>{this.startPress(a,l)})},n=ts(this.node.current,"keydown",e),i=()=>{this.isPressing&&bg("cancel",(s,o)=>this.cancelPress(s,o))},r=ts(this.node.current,"blur",i);this.removeAccessibleListeners=$s(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Gt.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!QS()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Gt.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=ss(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=ts(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=$s(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Mm=new WeakMap,Ag=new WeakMap,i8=t=>{const e=Mm.get(t.target);e&&e(t)},r8=t=>{t.forEach(i8)};function s8({root:t,...e}){const n=t||document;Ag.has(n)||Ag.set(n,{});const i=Ag.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(r8,{root:t,...e})),i[r]}function o8(t,e,n){const i=s8(e);return Mm.set(t,n),i.observe(t),()=>{Mm.delete(t),i.unobserve(t)}}const a8={some:0,all:1};class l8 extends co{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:a8[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),m=c?h:d;m&&m(l)};return o8(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(c8(e,n))&&this.startObserver()}unmount(){}}function c8({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const u8={inView:{Feature:l8},tap:{Feature:n8},focus:{Feature:t8},hover:{Feature:e8}};function ex(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function h8(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function f8(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function $d(t,e,n){const i=t.getProps();return R1(i,e,n!==void 0?n:i.custom,h8(t),f8(t))}const d8="framerAppearId",p8="data-"+N1(d8);let g8=sn,k1=sn;const Ks=t=>t*1e3,os=t=>t/1e3,m8={current:!1},tx=t=>Array.isArray(t)&&typeof t[0]=="number";function nx(t){return!!(!t||typeof t=="string"&&ix[t]||tx(t)||Array.isArray(t)&&t.every(nx))}const wc=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,ix={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wc([0,.65,.55,1]),circOut:wc([.55,0,1,.45]),backIn:wc([.31,.01,.66,-.59]),backOut:wc([.33,1.53,.69,.99])};function rx(t){if(t)return tx(t)?wc(t):Array.isArray(t)?t.map(rx):ix[t]}function y8(t,e,n,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=rx(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function v8(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const sx=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,_8=1e-7,w8=12;function b8(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=sx(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>_8&&++a<w8);return o}function Vu(t,e,n,i){if(t===e&&n===i)return sn;const r=s=>b8(s,0,1,t,n);return s=>s===0||s===1?s:sx(r(s),e,i)}const A8=Vu(.42,0,1,1),S8=Vu(0,0,.58,1),ox=Vu(.42,0,.58,1),x8=t=>Array.isArray(t)&&typeof t[0]!="number",ax=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,lx=t=>e=>1-t(1-e),cx=t=>1-Math.sin(Math.acos(t)),D1=lx(cx),E8=ax(D1),ux=Vu(.33,1.53,.69,.99),O1=lx(ux),T8=ax(O1),I8=t=>(t*=2)<1?.5*O1(t):.5*(2-Math.pow(2,-10*(t-1))),P8={linear:sn,easeIn:A8,easeInOut:ox,easeOut:S8,circIn:cx,circInOut:E8,circOut:D1,backIn:O1,backInOut:T8,backOut:ux,anticipate:I8},Xv=t=>{if(Array.isArray(t)){k1(t.length===4);const[e,n,i,r]=t;return Vu(e,n,i,r)}else if(typeof t=="string")return P8[t];return t},M1=(t,e)=>n=>!!(Fu(n)&&TO.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),hx=(t,e,n)=>i=>{if(!Fu(i))return i;const[r,s,o,a]=i.match(Wd);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},C8=t=>io(0,255,t),Sg={...ca,transform:t=>Math.round(C8(t))},Do={test:M1("rgb","red"),parse:hx("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Sg.transform(t)+", "+Sg.transform(e)+", "+Sg.transform(n)+", "+Mc(Oc.transform(i))+")"};function N8(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Fm={test:M1("#"),parse:N8,transform:Do.transform},Ya={test:M1("hsl","hue"),parse:hx("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Dr.transform(Mc(e))+", "+Dr.transform(Mc(n))+", "+Mc(Oc.transform(i))+")"},li={test:t=>Do.test(t)||Fm.test(t)||Ya.test(t),parse:t=>Do.test(t)?Do.parse(t):Ya.test(t)?Ya.parse(t):Fm.parse(t),transform:t=>Fu(t)?t:t.hasOwnProperty("red")?Do.transform(t):Ya.transform(t)},Qt=(t,e,n)=>-n*t+n*e+t;function xg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function L8({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=xg(l,a,t+1/3),s=xg(l,a,t),o=xg(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const Eg=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},R8=[Fm,Do,Ya],k8=t=>R8.find(e=>e.test(t));function Jv(t){const e=k8(t);let n=e.parse(t);return e===Ya&&(n=L8(n)),n}const fx=(t,e)=>{const n=Jv(t),i=Jv(e),r={...n};return s=>(r.red=Eg(n.red,i.red,s),r.green=Eg(n.green,i.green,s),r.blue=Eg(n.blue,i.blue,s),r.alpha=Qt(n.alpha,i.alpha,s),Do.transform(r))};function D8(t){var e,n;return isNaN(t)&&Fu(t)&&(((e=t.match(Wd))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(VS))===null||n===void 0?void 0:n.length)||0)>0}const dx={regex:xO,countKey:"Vars",token:"${v}",parse:sn},px={regex:VS,countKey:"Colors",token:"${c}",parse:li.parse},gx={regex:Wd,countKey:"Numbers",token:"${n}",parse:ca.parse};function Tg(t,{regex:e,countKey:n,token:i,parse:r}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...s.map(r)))}function Gf(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Tg(n,dx),Tg(n,px),Tg(n,gx),n}function mx(t){return Gf(t).values}function yx(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Gf(t),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(dx.token,o[l]):l<i+n?a=a.replace(px.token,li.transform(o[l])):a=a.replace(gx.token,Mc(o[l]));return a}}const O8=t=>typeof t=="number"?0:t;function M8(t){const e=mx(t);return yx(t)(e.map(O8))}const ro={test:D8,parse:mx,createTransformer:yx,getAnimatableNone:M8},vx=(t,e)=>n=>`${n>0?e:t}`;function _x(t,e){return typeof t=="number"?n=>Qt(t,e,n):li.test(t)?fx(t,e):t.startsWith("var(")?vx(t,e):bx(t,e)}const wx=(t,e)=>{const n=[...t],i=n.length,r=t.map((s,o)=>_x(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}},F8=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=_x(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}},bx=(t,e)=>{const n=ro.createTransformer(e),i=Gf(t),r=Gf(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?$s(wx(i.values,r.values),n):vx(t,e)},du=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Qv=(t,e)=>n=>Qt(t,e,n);function j8(t){return typeof t=="number"?Qv:typeof t=="string"?li.test(t)?fx:bx:Array.isArray(t)?wx:typeof t=="object"?F8:Qv}function V8(t,e,n){const i=[],r=n||j8(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||sn:e;a=$s(l,a)}i.push(a)}return i}function Ax(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(k1(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=V8(e,i,r),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const d=du(t[h],t[h+1],c);return o[h](d)};return n?c=>l(io(t[0],t[s-1],c)):l}function B8(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=du(0,e,i);t.push(Qt(n,1,r))}}function U8(t){const e=[0];return B8(e,t.length-1),e}function q8(t,e){return t.map(n=>n*e)}function H8(t,e){return t.map(()=>e||ox).splice(0,t.length-1)}function $f({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=x8(i)?i.map(Xv):Xv(i),s={done:!1,value:e[0]},o=q8(n&&n.length===e.length?n:U8(e),t),a=Ax(o,e,{ease:Array.isArray(r)?r:H8(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function Sx(t,e){return e?t*(1e3/e):0}const z8=5;function xx(t,e,n){const i=Math.max(e-z8,0);return Sx(n-t(i),e-i)}const Ig=.001,W8=.01,Zv=10,G8=.05,$8=1;function K8({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,s;g8(t<=Ks(Zv));let o=1-e;o=io(G8,$8,o),t=io(W8,Zv,os(t)),o<1?(r=c=>{const h=c*o,d=h*t,m=h-n,p=jm(c,o),v=Math.exp(-d);return Ig-m/p*v},s=c=>{const d=c*o*t,m=d*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-d),b=jm(Math.pow(c,2),o);return(-r(c)+Ig>0?-1:1)*((m-p)*v)/b}):(r=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-Ig+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=X8(r,s,a);if(t=Ks(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const Y8=12;function X8(t,e,n){let i=n;for(let r=1;r<Y8;r++)i=i-t(i)/e(i);return i}function jm(t,e){return t*Math.sqrt(1-e*e)}const J8=["duration","bounce"],Q8=["stiffness","damping","mass"];function e5(t,e){return e.some(n=>t[n]!==void 0)}function Z8(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!e5(t,Q8)&&e5(t,J8)){const n=K8(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function Ex({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],s=t[t.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,velocity:h,duration:d,isResolvedFromDuration:m}=Z8(i),p=h?-os(h):0,v=l/(2*Math.sqrt(a*c)),b=s-r,x=os(Math.sqrt(a/c)),w=Math.abs(b)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let A;if(v<1){const S=jm(x,v);A=k=>{const F=Math.exp(-v*x*k);return s-F*((p+v*x*b)/S*Math.sin(S*k)+b*Math.cos(S*k))}}else if(v===1)A=S=>s-Math.exp(-x*S)*(b+(p+x*b)*S);else{const S=x*Math.sqrt(v*v-1);A=k=>{const F=Math.exp(-v*x*k),G=Math.min(S*k,300);return s-F*((p+v*x*b)*Math.sinh(G)+S*b*Math.cosh(G))/S}}return{calculatedDuration:m&&d||null,next:S=>{const k=A(S);if(m)o.done=S>=d;else{let F=p;S!==0&&(v<1?F=xx(A,S,k):F=0);const G=Math.abs(F)<=n,O=Math.abs(s-k)<=e;o.done=G&&O}return o.value=o.done?s:k,o}}}function t5({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],m={done:!1,value:d},p=N=>a!==void 0&&N<a||l!==void 0&&N>l,v=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let b=n*e;const x=d+b,w=o===void 0?x:o(x);w!==x&&(b=w-d);const A=N=>-b*Math.exp(-N/i),S=N=>w+A(N),k=N=>{const $=A(N),J=S(N);m.done=Math.abs($)<=c,m.value=m.done?w:J};let F,G;const O=N=>{p(m.value)&&(F=N,G=Ex({keyframes:[m.value,v(m.value)],velocity:xx(S,N,m.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return O(0),{calculatedDuration:null,next:N=>{let $=!1;return!G&&F===void 0&&($=!0,k(N),O(N)),F!==void 0&&N>F?G.next(N-F):(!$&&k(N),m)}}}const e7=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Gt.update(e,!0),stop:()=>fs(e),now:()=>In.isProcessing?In.timestamp:performance.now()}},n5=2e4;function i5(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<n5;)e+=n,i=t.next(e);return e>=n5?1/0:e}const t7={decay:t5,inertia:t5,tween:$f,keyframes:$f,spring:Ex};function Kf({autoplay:t=!0,delay:e=0,driver:n=e7,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:h,onUpdate:d,...m}){let p=1,v=!1,b,x;const w=()=>{x=new Promise(pe=>{b=pe})};w();let A;const S=t7[r]||$f;let k;S!==$f&&typeof i[0]!="number"&&(k=Ax([0,100],i,{clamp:!1}),i=[0,100]);const F=S({...m,keyframes:i});let G;a==="mirror"&&(G=S({...m,keyframes:[...i].reverse(),velocity:-(m.velocity||0)}));let O="idle",N=null,$=null,J=null;F.calculatedDuration===null&&s&&(F.calculatedDuration=i5(F));const{calculatedDuration:C}=F;let E=1/0,B=1/0;C!==null&&(E=C+o,B=E*(s+1)-o);let V=0;const H=pe=>{if($===null)return;p>0&&($=Math.min($,pe)),p<0&&($=Math.min(pe-B/p,$)),N!==null?V=N:V=Math.round(pe-$)*p;const T=V-e*(p>=0?1:-1),j=p>=0?T<0:T>B;V=Math.max(T,0),O==="finished"&&N===null&&(V=B);let z=V,Y=F;if(s){const de=V/E;let Ee=Math.floor(de),Se=de%1;!Se&&de>=1&&(Se=1),Se===1&&Ee--,Ee=Math.min(Ee,s+1);const Oe=!!(Ee%2);Oe&&(a==="reverse"?(Se=1-Se,o&&(Se-=o/E)):a==="mirror"&&(Y=G));let Me=io(0,1,Se);V>B&&(Me=a==="reverse"&&Oe?1:0),z=Me*E}const ne=j?{done:!1,value:i[0]}:Y.next(z);k&&(ne.value=k(ne.value));let{done:ce}=ne;!j&&C!==null&&(ce=p>=0?V>=B:V<=0);const fe=N===null&&(O==="finished"||O==="running"&&ce);return d&&d(ne.value),fe&&K(),ne},U=()=>{A&&A.stop(),A=void 0},Q=()=>{O="idle",U(),b(),w(),$=J=null},K=()=>{O="finished",h&&h(),U(),b()},re=()=>{if(v)return;A||(A=n(H));const pe=A.now();l&&l(),N!==null?$=pe-N:(!$||O==="finished")&&($=pe),O==="finished"&&w(),J=$,N=null,O="running",A.start()};t&&re();const ie={then(pe,T){return x.then(pe,T)},get time(){return os(V)},set time(pe){pe=Ks(pe),V=pe,N!==null||!A||p===0?N=pe:$=A.now()-pe/p},get duration(){const pe=F.calculatedDuration===null?i5(F):F.calculatedDuration;return os(pe)},get speed(){return p},set speed(pe){pe===p||!A||(p=pe,ie.time=os(V))},get state(){return O},play:re,pause:()=>{O="paused",N=V},stop:()=>{v=!0,O!=="idle"&&(O="idle",c&&c(),Q())},cancel:()=>{J!==null&&H(J),Q()},complete:()=>{O="finished"},sample:pe=>($=0,H(pe))};return ie}function n7(t){let e;return()=>(e===void 0&&(e=t()),e)}const i7=n7(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),r7=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Gh=10,s7=2e4,o7=(t,e)=>e.type==="spring"||t==="backgroundColor"||!nx(e.ease);function a7(t,e,{onUpdate:n,onComplete:i,...r}){if(!(i7()&&r7.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l;const c=()=>{l=new Promise(A=>{a=A})};c();let{keyframes:h,duration:d=300,ease:m,times:p}=r;if(o7(e,r)){const A=Kf({...r,repeat:0,delay:0});let S={done:!1,value:h[0]};const k=[];let F=0;for(;!S.done&&F<s7;)S=A.sample(F),k.push(S.value),F+=Gh;p=void 0,h=k,d=F-Gh,m="linear"}const v=y8(t.owner.current,e,h,{...r,duration:d,ease:m,times:p});r.syncStart&&(v.startTime=In.isProcessing?In.timestamp:document.timeline?document.timeline.currentTime:performance.now());const b=()=>v.cancel(),x=()=>{Gt.update(b),a(),c()};return v.onfinish=()=>{t.set(v8(h,r)),i&&i(),x()},{then(A,S){return l.then(A,S)},attachTimeline(A){return v.timeline=A,v.onfinish=null,sn},get time(){return os(v.currentTime||0)},set time(A){v.currentTime=Ks(A)},get speed(){return v.playbackRate},set speed(A){v.playbackRate=A},get duration(){return os(d)},play:()=>{o||(v.play(),fs(b))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:A}=v;if(A){const S=Kf({...r,autoplay:!1});t.setWithVelocity(S.sample(A-Gh).value,S.sample(A).value,Gh)}x()},complete:()=>v.finish(),cancel:x}}function l7({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:sn,pause:sn,stop:sn,then:s=>(s(),Promise.resolve()),cancel:sn,complete:sn});return e?Kf({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const c7={type:"spring",stiffness:500,damping:25,restSpeed:10},u7=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),h7={type:"keyframes",duration:.8},f7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},d7=(t,{keyframes:e})=>e.length>2?h7:la.has(t)?t.startsWith("scale")?u7(e[1]):c7:f7,Vm=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ro.test(e)||e==="0")&&!e.startsWith("url(")),p7=new Set(["brightness","contrast","saturate","opacity"]);function g7(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Wd)||[];if(!i)return t;const r=n.replace(i,"");let s=p7.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const m7=/([a-z-]*)\(.*?\)/g,Bm={...ro,getAnimatableNone:t=>{const e=t.match(m7);return e?e.map(g7).join(" "):t}},y7={...BS,color:li,backgroundColor:li,outlineColor:li,fill:li,stroke:li,borderColor:li,borderTopColor:li,borderRightColor:li,borderBottomColor:li,borderLeftColor:li,filter:Bm,WebkitFilter:Bm},F1=t=>y7[t];function Tx(t,e){let n=F1(t);return n!==Bm&&(n=ro),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Ix=t=>/^0[^.\s]+$/.test(t);function v7(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Ix(t)}function _7(t,e,n,i){const r=Vm(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=i.from!==void 0?i.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),v7(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(r&&l.length&&a)for(let c=0;c<l.length;c++){const h=l[c];s[h]=Tx(e,a)}return s}function w7({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function Px(t,e){return t[e]||t.default||t}const j1=(t,e,n,i={})=>r=>{const s=Px(i,t)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Ks(o);const l=_7(e,t,n,s),c=l[0],h=l[l.length-1],d=Vm(t,c),m=Vm(t,h);let p={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:v=>{e.set(v),s.onUpdate&&s.onUpdate(v)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(w7(s)||(p={...p,...d7(t,p)}),p.duration&&(p.duration=Ks(p.duration)),p.repeatDelay&&(p.repeatDelay=Ks(p.repeatDelay)),!d||!m||m8.current||s.type===!1)return l7(p);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=a7(e,t,p);if(v)return v}return Kf(p)};function Yf(t){return!!(wi(t)&&t.add)}const Cx=t=>/^\-?\d*\.?\d+$/.test(t);function V1(t,e){t.indexOf(e)===-1&&t.push(e)}function B1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class U1{constructor(){this.subscriptions=[]}add(e){return V1(this.subscriptions,e),()=>B1(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const b7=t=>!isNaN(parseFloat(t));class A7{constructor(e,n={}){this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=In;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Gt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Gt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=b7(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new U1);const i=this.events[e].add(n);return e==="change"?()=>{i(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Sx(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pl(t,e){return new A7(t,e)}const Nx=t=>e=>e.test(t),S7={test:t=>t==="auto",parse:t=>t},Lx=[ca,Xe,Dr,Ds,PO,IO,S7],dc=t=>Lx.find(Nx(t)),x7=[...Lx,li,ro],E7=t=>x7.find(Nx(t));function T7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pl(n))}function I7(t,e){const n=$d(t,e);let{transitionEnd:i={},transition:r={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...i};for(const o in s){const a=HO(s[o]);T7(t,o,a)}}function P7(t,e,n){var i,r;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(r=(i=n[l])!==null&&i!==void 0?i:t.readValue(l))!==null&&r!==void 0?r:e[l]),h!=null&&(typeof h=="string"&&(Cx(h)||Ix(h))?h=parseFloat(h):!E7(h)&&ro.test(c)&&(h=Tx(l,c)),t.addValue(l,pl(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function C7(t,e){return e?(e[t]||e.default||e).from:void 0}function N7(t,e,n){const i={};for(const r in t){const s=C7(r,e);if(s!==void 0)i[r]=s;else{const o=n.getValue(r);o&&(i[r]=o.get())}}return i}function L7({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function Rx(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");i&&(s=i);const c=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in a){const m=t.getValue(d),p=a[d];if(!m||p===void 0||h&&L7(h,d))continue;const v={delay:n,elapsed:0,...s};if(window.HandoffAppearAnimations&&!m.hasAnimated){const x=t.getProps()[p8];x&&(v.elapsed=window.HandoffAppearAnimations(x,d,m,Gt),v.syncStart=!0)}m.start(j1(d,m,p,t.shouldReduceMotion&&la.has(d)?{type:!1}:v));const b=m.animation;Yf(l)&&(l.add(d),b.then(()=>l.remove(d))),c.push(b)}return o&&Promise.all(c).then(()=>{o&&I7(t,o)}),c}function Um(t,e,n={}){const i=$d(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(Rx(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:d}=r;return R7(t,e,c+l,h,d,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function R7(t,e,n=0,i=0,r=1,s){const o=[],a=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(t.variantChildren).sort(k7).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Um(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function k7(t,e){return t.sortNodePosition(e)}function D7(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Um(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=Um(t,e,n);else{const r=typeof e=="function"?$d(t,e,n.custom):e;i=Promise.all(Rx(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const O7=[...S1].reverse(),M7=S1.length;function F7(t){return e=>Promise.all(e.map(({animation:n,options:i})=>D7(t,n,i)))}function j7(t){let e=F7(t);const n=B7();let i=!0;const r=(l,c)=>{const h=$d(t,c);if(h){const{transition:d,transitionEnd:m,...p}=h;l={...l,...p,...m}}return l};function s(l){e=l(t)}function o(l,c){const h=t.getProps(),d=t.getVariantContext(!0)||{},m=[],p=new Set;let v={},b=1/0;for(let w=0;w<M7;w++){const A=O7[w],S=n[A],k=h[A]!==void 0?h[A]:d[A],F=hu(k),G=A===c?S.isActive:null;G===!1&&(b=w);let O=k===d[A]&&k!==h[A]&&F;if(O&&i&&t.manuallyAnimateOnMount&&(O=!1),S.protectedKeys={...v},!S.isActive&&G===null||!k&&!S.prevProp||Hd(k)||typeof k=="boolean")continue;const N=V7(S.prevProp,k);let $=N||A===c&&S.isActive&&!O&&F||w>b&&F;const J=Array.isArray(k)?k:[k];let C=J.reduce(r,{});G===!1&&(C={});const{prevResolvedValues:E={}}=S,B={...E,...C},V=H=>{$=!0,p.delete(H),S.needsAnimating[H]=!0};for(const H in B){const U=C[H],Q=E[H];v.hasOwnProperty(H)||(U!==Q?Wf(U)&&Wf(Q)?!ex(U,Q)||N?V(H):S.protectedKeys[H]=!0:U!==void 0?V(H):p.add(H):U!==void 0&&p.has(H)?V(H):S.protectedKeys[H]=!0)}S.prevProp=k,S.prevResolvedValues=C,S.isActive&&(v={...v,...C}),i&&t.blockInitialAnimation&&($=!1),$&&!O&&m.push(...J.map(H=>({animation:H,options:{type:A,...l}})))}if(p.size){const w={};p.forEach(A=>{const S=t.getBaseTarget(A);S!==void 0&&(w[A]=S)}),m.push({animation:w})}let x=!!m.length;return i&&h.initial===!1&&!t.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(m):Promise.resolve()}function a(l,c,h){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var v;return(v=p.animationState)===null||v===void 0?void 0:v.setActive(l,c)}),n[l].isActive=c;const m=o(h,l);for(const p in n)n[p].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function V7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ex(e,t):!1}function bo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function B7(){return{animate:bo(!0),whileInView:bo(),whileHover:bo(),whileTap:bo(),whileDrag:bo(),whileFocus:bo(),exit:bo()}}class U7 extends co{constructor(e){super(e),e.animationState||(e.animationState=j7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Hd(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let q7=0;class H7 extends co{constructor(){super(...arguments),this.id=q7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const z7={animation:{Feature:U7},exit:{Feature:H7}},r5=(t,e)=>Math.abs(t-e);function W7(t,e){const n=r5(t.x,e.x),i=r5(t.y,e.y);return Math.sqrt(n**2+i**2)}class kx{constructor(e,n,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=Cg(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,d=W7(c.offset,{x:0,y:0})>=3;if(!h&&!d)return;const{point:m}=c,{timestamp:p}=In;this.history.push({...m,timestamp:p});const{onStart:v,onMove:b}=this.handlers;h||(v&&v(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,c)},this.handlePointerMove=(c,h)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=Pg(h,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(c,h)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:d,onSessionEnd:m}=this.handlers,p=Cg(c.type==="pointercancel"?this.lastMoveEventInfo:Pg(h,this.transformPagePoint),this.history);this.startEvent&&d&&d(c,p),m&&m(c,p)},!YS(e))return;this.handlers=n,this.transformPagePoint=i;const r=Gd(e),s=Pg(r,this.transformPagePoint),{point:o}=s,{timestamp:a}=In;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=n;l&&l(e,Cg(s,this.history)),this.removeListeners=$s(ss(window,"pointermove",this.handlePointerMove),ss(window,"pointerup",this.handlePointerUp),ss(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fs(this.updatePoint)}}function Pg(t,e){return e?{point:e(t.point)}:t}function s5(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Cg({point:t},e){return{point:t,delta:s5(t,Dx(e)),offset:s5(t,G7(e)),velocity:$7(e,.1)}}function G7(t){return t[0]}function Dx(t){return t[t.length-1]}function $7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=Dx(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ks(e)));)n--;if(!i)return{x:0,y:0};const s=os(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ci(t){return t.max-t.min}function qm(t,e=0,n=.01){return Math.abs(t-e)<=n}function o5(t,e,n,i=.5){t.origin=i,t.originPoint=Qt(e.min,e.max,t.origin),t.scale=Ci(n)/Ci(e),(qm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Qt(n.min,n.max,t.origin)-t.originPoint,(qm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Fc(t,e,n,i){o5(t.x,e.x,n.x,i?i.originX:void 0),o5(t.y,e.y,n.y,i?i.originY:void 0)}function a5(t,e,n){t.min=n.min+e.min,t.max=t.min+Ci(e)}function K7(t,e,n){a5(t.x,e.x,n.x),a5(t.y,e.y,n.y)}function l5(t,e,n){t.min=e.min-n.min,t.max=t.min+Ci(e)}function jc(t,e,n){l5(t.x,e.x,n.x),l5(t.y,e.y,n.y)}function Y7(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Qt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Qt(n,t,i.max):Math.min(t,n)),t}function c5(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function X7(t,{top:e,left:n,bottom:i,right:r}){return{x:c5(t.x,n,r),y:c5(t.y,e,i)}}function u5(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function J7(t,e){return{x:u5(t.x,e.x),y:u5(t.y,e.y)}}function Q7(t,e){let n=.5;const i=Ci(t),r=Ci(e);return r>i?n=du(e.min,e.max-i,t.min):i>r&&(n=du(t.min,t.max-r,e.min)),io(0,1,n)}function Z7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Hm=.35;function eM(t=Hm){return t===!1?t=0:t===!0&&(t=Hm),{x:h5(t,"left","right"),y:h5(t,"top","bottom")}}function h5(t,e,n){return{min:f5(t,e),max:f5(t,n)}}function f5(t,e){return typeof t=="number"?t:t[e]||0}const d5=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xa=()=>({x:d5(),y:d5()}),p5=()=>({min:0,max:0}),yn=()=>({x:p5(),y:p5()});function Ar(t){return[t("x"),t("y")]}function Ox({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function tM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function nM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Ng(t){return t===void 0||t===1}function zm({scale:t,scaleX:e,scaleY:n}){return!Ng(t)||!Ng(e)||!Ng(n)}function To(t){return zm(t)||Mx(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Mx(t){return g5(t.x)||g5(t.y)}function g5(t){return t&&t!=="0%"}function Xf(t,e,n){const i=t-n,r=e*i;return n+r}function m5(t,e,n,i,r){return r!==void 0&&(t=Xf(t,r,i)),Xf(t,n,i)+e}function Wm(t,e=0,n=1,i,r){t.min=m5(t.min,e,n,i,r),t.max=m5(t.max,e,n,i,r)}function Fx(t,{x:e,y:n}){Wm(t.x,e.translate,e.scale,e.originPoint),Wm(t.y,n.translate,n.scale,n.originPoint)}function iM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ja(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Fx(t,o)),i&&To(s.latestValues)&&Ja(t,s.latestValues))}e.x=y5(e.x),e.y=y5(e.y)}function y5(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Os(t,e){t.min=t.min+e,t.max=t.max+e}function v5(t,e,[n,i,r]){const s=e[r]!==void 0?e[r]:.5,o=Qt(t.min,t.max,s);Wm(t,e[n],e[i],o,e.scale)}const rM=["x","scaleX","originX"],sM=["y","scaleY","originY"];function Ja(t,e){v5(t.x,e,rM),v5(t.y,e,sM)}function jx(t,e){return Ox(nM(t.getBoundingClientRect(),e))}function oM(t,e,n){const i=jx(t,n),{scroll:r}=e;return r&&(Os(i.x,r.offset.x),Os(i.y,r.offset.y)),i}const aM=new WeakMap;class lM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=l=>{this.stopAnimation(),n&&this.snapToCursor(Gd(l,"page").point)},s=(l,c)=>{const{drag:h,dragPropagation:d,onDragStart:m}=this.getProps();if(h&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=JS(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ar(v=>{let b=this.getAxisMotionValue(v).get()||0;if(Dr.test(b)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[v];w&&(b=Ci(w)*(parseFloat(b)/100))}}this.originPoint[v]=b}),m&&Gt.update(()=>m(l,c),!1,!0);const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},o=(l,c)=>{const{dragPropagation:h,dragDirectionLock:d,onDirectionLock:m,onDrag:p}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:v}=c;if(d&&this.currentDirection===null){this.currentDirection=cM(v),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",c.point,v),this.updateAxis("y",c.point,v),this.visualElement.render(),p&&p(l,c)},a=(l,c)=>this.stop(l,c);this.panSession=new kx(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Gt.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!$h(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=Y7(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:i}=this.visualElement.projection||{},r=this.constraints;e&&Ka(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=X7(i.layoutBox,e):this.constraints=!1,this.elastic=eM(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ar(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=Z7(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ka(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=oM(i,r.root,this.visualElement.getTransformPagePoint());let o=J7(r.layout.layoutBox,s);if(n){const a=n(tM(o));this.hasMutatedConstraints=!!a,a&&(o=Ox(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ar(h=>{if(!$h(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const m=r?200:1e6,p=r?40:1e7,v={type:"inertia",velocity:i?e[h]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(j1(e,i,0,n))}stopAnimation(){Ar(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ar(n=>{const{drag:i}=this.getProps();if(!$h(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-Qt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ka(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ar(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=Q7({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ar(o=>{if(!$h(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Qt(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;aM.set(this.visualElement,this);const e=this.visualElement.current,n=ss(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Ka(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=ts(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ar(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=Hm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function $h(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function cM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class uM extends co{constructor(e){super(e),this.removeGroupControls=sn,this.removeListeners=sn,this.controls=new lM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||sn}unmount(){this.removeGroupControls(),this.removeListeners()}}const _5=t=>(e,n)=>{t&&Gt.update(()=>t(e,n))};class hM extends co{constructor(){super(...arguments),this.removePointerDownListener=sn}onPointerDown(e){this.session=new kx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:_5(e),onStart:_5(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Gt.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=ss(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function fM(){const t=be.useContext(A1);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=be.useId();return be.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const rf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function w5(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const pc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Xe.test(t))t=parseFloat(t);else return t;const n=w5(t,e.target.x),i=w5(t,e.target.y);return`${n}% ${i}%`}},dM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ro.parse(t);if(r.length>5)return i;const s=ro.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=Qt(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class pM extends Cr.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;wO(gM),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),rf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Gt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Vx(t){const[e,n]=fM(),i=be.useContext(DS);return Cr.createElement(pM,{...t,layoutGroup:i,switchLayoutGroup:be.useContext(OS),isPresent:e,safeToRemove:n})}const gM={borderRadius:{...pc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pc,borderTopRightRadius:pc,borderBottomLeftRadius:pc,borderBottomRightRadius:pc,boxShadow:dM},Bx=["TopLeft","TopRight","BottomLeft","BottomRight"],mM=Bx.length,b5=t=>typeof t=="string"?parseFloat(t):t,A5=t=>typeof t=="number"||Xe.test(t);function yM(t,e,n,i,r,s){r?(t.opacity=Qt(0,n.opacity!==void 0?n.opacity:1,vM(i)),t.opacityExit=Qt(e.opacity!==void 0?e.opacity:1,0,_M(i))):s&&(t.opacity=Qt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<mM;o++){const a=`border${Bx[o]}Radius`;let l=S5(e,a),c=S5(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||A5(l)===A5(c)?(t[a]=Math.max(Qt(b5(l),b5(c),i),0),(Dr.test(c)||Dr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Qt(e.rotate||0,n.rotate||0,i))}function S5(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const vM=Ux(0,.5,D1),_M=Ux(.5,.95,sn);function Ux(t,e,n){return i=>i<t?0:i>e?1:n(du(t,e,i))}function x5(t,e){t.min=e.min,t.max=e.max}function Mi(t,e){x5(t.x,e.x),x5(t.y,e.y)}function E5(t,e,n,i,r){return t-=e,t=Xf(t,1/n,i),r!==void 0&&(t=Xf(t,1/r,i)),t}function wM(t,e=0,n=1,i=.5,r,s=t,o=t){if(Dr.test(e)&&(e=parseFloat(e),e=Qt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Qt(s.min,s.max,i);t===s&&(a-=e),t.min=E5(t.min,e,n,a,r),t.max=E5(t.max,e,n,a,r)}function T5(t,e,[n,i,r],s,o){wM(t,e[n],e[i],e[r],e.scale,s,o)}const bM=["x","scaleX","originX"],AM=["y","scaleY","originY"];function I5(t,e,n,i){T5(t.x,e,bM,n?n.x:void 0,i?i.x:void 0),T5(t.y,e,AM,n?n.y:void 0,i?i.y:void 0)}function P5(t){return t.translate===0&&t.scale===1}function qx(t){return P5(t.x)&&P5(t.y)}function SM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Hx(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function C5(t){return Ci(t.x)/Ci(t.y)}class xM{constructor(){this.members=[]}add(e){V1(this.members,e),e.scheduleRender()}remove(e){if(B1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function N5(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:h}=n;l&&(i+=`rotate(${l}deg) `),c&&(i+=`rotateX(${c}deg) `),h&&(i+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const EM=(t,e)=>t.depth-e.depth;class TM{constructor(){this.children=[],this.isDirty=!1}add(e){V1(this.children,e),this.isDirty=!0}remove(e){B1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(EM),this.isDirty=!1,this.children.forEach(e)}}function IM(t,e){const n=performance.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(fs(i),t(s-e))};return Gt.read(i,!0),()=>fs(i)}function PM(t){window.MotionDebug&&window.MotionDebug.record(t)}function CM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function NM(t,e,n){const i=wi(t)?t:pl(t);return i.start(j1("",i,e,n)),i.animation}const L5=["","X","Y","Z"],R5=1e3;let LM=0;const Io={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function zx({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=LM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Io.totalNodes=Io.resolvedTargetDeltas=Io.recalculatedProjection=0,this.nodes.forEach(DM),this.nodes.forEach(VM),this.nodes.forEach(BM),this.nodes.forEach(OM),PM(Io)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new TM)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new U1),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=CM(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=IM(m,250),rf.hasAnimatedSinceResize&&(rf.hasAnimatedSinceResize=!1,this.nodes.forEach(D5))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||WM,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=h.getProps(),A=!this.targetLayout||!Hx(this.targetLayout,v)||p,S=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||m&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const k={...Px(b,"layout"),onPlay:x,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else m||D5(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UM),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(k5);return}this.isUpdating||this.nodes.forEach(FM),this.isUpdating=!1,this.nodes.forEach(jM),this.nodes.forEach(RM),this.nodes.forEach(kM),this.clearAllSnapshots();const a=performance.now();In.delta=io(0,1e3/60,a-In.timestamp),In.timestamp=a,In.isProcessing=!0,wg.update.process(In),wg.preRender.process(In),wg.render.process(In),In.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(MM),this.sharedNodes.forEach(qM)}scheduleUpdateProjection(){Gt.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!qx(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||To(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),GM(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return yn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Os(a.x,l.offset.x),Os(a.y,l.offset.y)),a}removeElementScroll(o){const a=yn();Mi(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:h,options:d}=c;if(c!==this.root&&h&&d.layoutScroll){if(h.isRoot){Mi(a,o);const{scroll:m}=this.root;m&&(Os(a.x,-m.offset.x),Os(a.y,-m.offset.y))}Os(a.x,h.offset.x),Os(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=yn();Mi(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ja(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),To(h.latestValues)&&Ja(l,h.latestValues)}return To(this.latestValues)&&Ja(l,this.latestValues),l}removeTransform(o){const a=yn();Mi(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!To(c.latestValues))continue;zm(c.latestValues)&&c.updateSnapshot();const h=yn(),d=c.measurePageBox();Mi(h,d),I5(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return To(this.latestValues)&&I5(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==In.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=In.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yn(),this.relativeTargetOrigin=yn(),jc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yn(),this.targetWithTransforms=yn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),K7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mi(this.target,this.layout.layoutBox),Fx(this.target,this.targetDelta)):Mi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yn(),this.relativeTargetOrigin=yn(),jc(this.relativeTargetOrigin,this.target,p.target),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Io.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||zm(this.parent.latestValues)||Mx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===In.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Mi(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;iM(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=Xa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Xa(),this.projectionDeltaWithTransform=Xa());const b=this.projectionTransform;Fc(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=N5(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==m||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Io.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=Xa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=yn(),p=l?l.source:void 0,v=this.layout?this.layout.source:void 0,b=p!==v,x=this.getStack(),w=!x||x.members.length<=1,A=!!(b&&!w&&this.options.crossfade===!0&&!this.path.some(zM));this.animationProgress=0;let S;this.mixTargetDelta=k=>{const F=k/1e3;O5(d.x,o.x,F),O5(d.y,o.y,F),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HM(this.relativeTarget,this.relativeTargetOrigin,m,F),S&&SM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=yn()),Mi(S,this.relativeTarget)),b&&(this.animationValues=h,yM(h,c,this.latestValues,F,A,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{rf.hasAnimatedSinceResize=!0,this.currentAnimation=NM(0,R5,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(R5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Wx(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||yn();const d=Ci(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const m=Ci(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Mi(a,l),Ja(a,h),Fc(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new xM),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<L5.length;h++){const d="rotate"+L5[h];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=nf(o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=nf(o.pointerEvents)||""),this.hasProjected&&!To(this.latestValues)&&(b.transform=h?h({},""):"none",this.hasProjected=!1),b}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=N5(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:p,y:v}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${v.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in Hf){if(m[b]===void 0)continue;const{correct:x,applyTo:w}=Hf[b],A=c.transform==="none"?m[b]:x(m[b],d);if(w){const S=w.length;for(let k=0;k<S;k++)c[w[k]]=A}else c[b]=A}return this.options.layoutId&&(c.pointerEvents=d===this?nf(o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(k5),this.root.sharedNodes.clear()}}}function RM(t){t.updateLayout()}function kM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Ar(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],p=Ci(m);m.min=i[d].min,m.max=m.min+p}):Wx(s,n.layoutBox,i)&&Ar(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],p=Ci(i[d]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Xa();Fc(a,i,n.layoutBox);const l=Xa();o?Fc(l,t.applyTransform(r,!0),n.measuredBox):Fc(l,i,n.layoutBox);const c=!qx(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:p}=d;if(m&&p){const v=yn();jc(v,n.layoutBox,m.layoutBox);const b=yn();jc(b,i,p.layoutBox),Hx(v,b)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=v,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function DM(t){Io.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function OM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function MM(t){t.clearSnapshot()}function k5(t){t.clearMeasurements()}function FM(t){t.isLayoutDirty=!1}function jM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function D5(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function VM(t){t.resolveTargetDelta()}function BM(t){t.calcProjection()}function UM(t){t.resetRotation()}function qM(t){t.removeLeadSnapshot()}function O5(t,e,n){t.translate=Qt(e.translate,0,n),t.scale=Qt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function M5(t,e,n,i){t.min=Qt(e.min,n.min,i),t.max=Qt(e.max,n.max,i)}function HM(t,e,n,i){M5(t.x,e.x,n.x,i),M5(t.y,e.y,n.y,i)}function zM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const WM={duration:.45,ease:[.4,0,.1,1]},F5=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),j5=F5("applewebkit/")&&!F5("chrome/")?Math.round:sn;function V5(t){t.min=j5(t.min),t.max=j5(t.max)}function GM(t){V5(t.x),V5(t.y)}function Wx(t,e,n){return t==="position"||t==="preserve-aspect"&&!qm(C5(e),C5(n),.2)}const $M=zx({attachResizeListener:(t,e)=>ts(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Lg={current:void 0},Gx=zx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Lg.current){const t=new $M({});t.mount(window),t.setOptions({layoutScroll:!0}),Lg.current=t}return Lg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),KM={pan:{Feature:hM},drag:{Feature:uM,ProjectionNode:Gx,MeasureLayout:Vx}},YM=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function XM(t){const e=YM.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Gm(t,e,n=1){const[i,r]=XM(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return Cx(o)?parseFloat(o):o}else return Om(r)?Gm(r,e,n+1):r}function JM(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const s=r.get();if(!Om(s))return;const o=Gm(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!Om(s))continue;const o=Gm(s,i);o&&(e[r]=o,n||(n={}),n[r]===void 0&&(n[r]=s))}return{target:e,transitionEnd:n}}const QM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),$x=t=>QM.has(t),ZM=t=>Object.keys(t).some($x),B5=t=>t===ca||t===Xe,U5=(t,e)=>parseFloat(t.split(", ")[e]),q5=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return U5(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?U5(s[1],t):0}},eF=new Set(["x","y","z"]),tF=Mu.filter(t=>!eF.has(t));function nF(t){const e=[];return tF.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const gl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:q5(4,13),y:q5(5,14)};gl.translateX=gl.x;gl.translateY=gl.y;const iF=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=gl[c](i,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=gl[c](l,s)}),t},rF=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter($x);let s=[],o=!1;const a=[];if(r.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],d=dc(h);const m=e[l];let p;if(Wf(m)){const v=m.length,b=m[0]===null?1:0;h=m[b],d=dc(h);for(let x=b;x<v&&m[x]!==null;x++)p?k1(dc(m[x])===p):p=dc(m[x])}else p=dc(m);if(d!==p)if(B5(d)&&B5(p)){const v=c.get();typeof v=="string"&&c.set(parseFloat(v)),typeof m=="string"?e[l]=parseFloat(m):Array.isArray(m)&&p===Xe&&(e[l]=m.map(parseFloat))}else d!=null&&d.transform&&(p!=null&&p.transform)&&(h===0||m===0)?h===0?c.set(p.transform(h)):e[l]=d.transform(m):(o||(s=nF(t),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],c.jump(m))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=iF(e,t,a);return s.length&&s.forEach(([h,d])=>{t.getValue(h).set(d)}),t.render(),qd&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:e,transitionEnd:i}};function sF(t,e,n,i){return ZM(e)?rF(t,e,n,i):{target:e,transitionEnd:i}}const oF=(t,e,n,i)=>{const r=JM(t,e,i);return e=r.target,i=r.transitionEnd,sF(t,e,n,i)},$m={current:null},Kx={current:!1};function aF(){if(Kx.current=!0,!!qd)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>$m.current=t.matches;t.addListener(e),e()}else $m.current=!1}function lF(t,e,n){const{willChange:i}=e;for(const r in e){const s=e[r],o=n[r];if(wi(s))t.addValue(r,s),Yf(i)&&i.add(r);else if(wi(o))t.addValue(r,pl(s,{owner:t})),Yf(i)&&i.remove(r);else if(o!==s)if(t.hasValue(r)){const a=t.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,pl(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const H5=new WeakMap,Yx=Object.keys(fu),cF=Yx.length,z5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],uF=x1.length;class hF{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Gt.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=zd(n),this.isVariantNode=kS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const m=h[d];a[d]!==void 0&&wi(m)&&(m.set(a[d],!1),Yf(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,H5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Kx.current||aF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$m.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){H5.delete(this.current),this.projection&&this.projection.unmount(),fs(this.notifyUpdate),fs(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=la.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Gt.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,s){let o,a;for(let l=0;l<cF;l++){const c=Yx[l],{isEnabled:h,Feature:d,ProjectionNode:m,MeasureLayout:p}=fu[c];m&&(o=m),h(n)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),p&&(a=p))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:h,dragConstraints:d,layoutScroll:m,layoutRoot:p}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!h||d&&Ka(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:m,layoutRoot:p})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<z5.length;i++){const r=z5[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=lF(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<uF;i++){const r=x1[i],s=this.props[r];(hu(s)||s===!1)&&(n[r]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=pl(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=R1(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!wi(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new U1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Xx extends hF{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},s){let o=N7(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),o&&(o=r(o))),s){P7(this,i,o);const a=oF(this,i,o,n);n=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:n,...i}}}function fF(t){return window.getComputedStyle(t)}class dF extends Xx{readValueFromInstance(e,n){if(la.has(n)){const i=F1(n);return i&&i.default||0}else{const i=fF(e),r=(jS(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return jx(e,n)}build(e,n,i,r){T1(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return L1(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wi(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){zS(e,n,i,r)}}class pF extends Xx{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(la.has(n)){const i=F1(n);return i&&i.default||0}return n=WS.has(n)?n:N1(n),e.getAttribute(n)}measureInstanceViewportBox(){return yn()}scrapeMotionValuesFromProps(e,n){return $S(e,n)}build(e,n,i,r){P1(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){GS(e,n,i,r)}mount(e){this.isSVGTag=C1(e.tagName),super.mount(e)}}const gF=(t,e)=>E1(t)?new pF(e,{enableHardwareAcceleration:!1}):new dF(e,{enableHardwareAcceleration:!0}),mF={layout:{ProjectionNode:Gx,MeasureLayout:Vx}},yF={...z7,...u8,...KM,...mF},vF=vO((t,e)=>JO(t,e,yF,gF));var _F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bu=(t,e)=>{const n=be.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},c)=>be.createElement("svg",{ref:c,..._F,width:r,height:r,stroke:i,strokeWidth:o?Number(s)*24/Number(r):s,className:`lucide lucide-${wF(t)}`,...l},[...e.map(([h,d])=>be.createElement(h,d)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},bF=Bu("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),AF=Bu("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),SF=Bu("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),xF=Bu("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),EF=Bu("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),TF=b1(),IF=[{id:0,name:"Dashboard",icon:SF},{id:2,name:"Predict",icon:bF},{id:3,name:"Edit Info",icon:EF},{id:4,name:"Help Centre",icon:AF}],PF={expanded:{width:"20%"},nonExpanded:{width:"5%"}},CF=({selection:t,setSelection:e})=>{const n=td(),[i,r]=be.useState(t),[s,o]=be.useState(!0),a=()=>{localStorage.clear(),Yk(TF).then(()=>{n("/"),console.log("Signed out successfully")}).catch(l=>{console.log("error in logging out")})};return se.jsxs(vF.div,{animate:s?"expanded":"nonExpanded",variants:PF,className:"py-12 flex flex-col border-2 border-r-1 w-1/5 h-auto relative "+(s?"px-10":"px-2"),children:[se.jsxs("div",{className:"logo-div flex space-x-3 items-center",children:[se.jsx("img",{src:"./src/assets/logos/ks-logo.png"}),se.jsx("span",{className:s?"block":"hidden"})]}),se.jsx("div",{onClick:()=>o(!s),className:"w-5 h-5 bg-[#1c961c] rounded-full absolute -right-[10.5px] top-15 flex items-center justify-center",children:se.jsx("img",{src:"./src/assets/icons/rightArrow.svg",className:"width-[5px]"})}),se.jsxs("div",{className:"mt-10 flex flex-col space-y-8",children:[IF.map((l,c)=>se.jsxs("div",{className:"flex space-x-3 p-2 rounded"+(i===c?" bg-[#1c961c] text-white font-semibold":" "),onClick:()=>{r(c),e(c)},children:[se.jsx(l.icon,{}),se.jsx("span",{className:s?"block":"hidden",children:l==null?void 0:l.name})]},c)),se.jsxs("button",{onClick:()=>{a()},className:"flex space-x-3 p-2 rounded border justify-center border-green-600",children:[se.jsx(xF,{}),se.jsx("span",{className:s?"block":"hidden",children:"LOGOUT"})]})]})]})},NF=()=>{const[t,e]=be.useState(()=>{const n=localStorage.getItem("selection");return n?parseInt(n):1});return be.useEffect(()=>{localStorage.setItem("selection",t.toString())},[t]),se.jsx(se.Fragment,{children:se.jsxs("div",{className:"flex",children:[se.jsx(CF,{selection:t,setSelection:e}),se.jsx(lO,{selection:t})]})})},LF=()=>se.jsx("div",{children:"AboutUs"}),RF=["Afghanistan","Albania","Algeria","Andorra","Angola","Anguilla","Antigua &amp; Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia &amp; Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Cape Verde","Cayman Islands","Chad","Chile","China","Colombia","Congo","Cook Islands","Costa Rica","Cote D Ivoire","Croatia","Cruise Ship","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Polynesia","French West Indies","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guernsey","Guinea","Guinea Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kuwait","Kyrgyz Republic","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Namibia","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Pierre &amp; Miquelon","Samoa","San Marino","Satellite","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sri Lanka","St Kitts &amp; Nevis","St Lucia","St Vincent","St. Lucia","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor L'Este","Togo","Tonga","Trinidad &amp; Tobago","Tunisia","Turkey","Turkmenistan","Turks &amp; Caicos","Uganda","Ukraine","United Arab Emirates","United Kingdom","Uruguay","Uzbekistan","Venezuela","Vietnam","Virgin Islands (US)","Yemen","Zambia","Zimbabwe"];var Jx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},W5=Cr.createContext&&Cr.createContext(Jx),Ys=globalThis&&globalThis.__assign||function(){return Ys=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ys.apply(this,arguments)},kF=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function Qx(t){return t&&t.map(function(e,n){return Cr.createElement(e.tag,Ys({key:n},e.attr),Qx(e.child))})}function DF(t){return function(e){return Cr.createElement(OF,Ys({attr:Ys({},t.attr)},e),Qx(t.child))}}function OF(t){var e=function(n){var i=t.attr,r=t.size,s=t.title,o=kF(t,["attr","size","title"]),a=r||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Cr.createElement("svg",Ys({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:l,style:Ys(Ys({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Cr.createElement("title",null,s),t.children)};return W5!==void 0?Cr.createElement(W5.Consumer,null,function(n){return e(n)}):e(Jx)}function Zx(t){return DF({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 0 0 0 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]})(t)}const MF=()=>{const t=RF,e=td(),[n,i]=be.useState({fullName:"",email:"",password:"",area:0,country:"India",zip:null}),r=o=>{const{name:a,value:l}=o.target;i(c=>({...c,[a]:l}))},s=async o=>{o.preventDefault(),console.log(n);const a=b1();await Wk(a,n.email,n.password).then(async l=>{const c=R6();await z6(N6(c,"users/"+l.user.uid),{fullName:n.fullName,email:n.email,password:n.password,area:n.area,country:n.country,zip:n.zip});const h=l.user;console.log(h),h&&(console.log("User created successfully"),alert("User created successfully"),window.location.reload(!1),e("/login"))}).catch(l=>{const c=l.code,h=l.message;console.log(c,h),alert(c==="auth/email-already-in-use"?"The email address is already in use by another account.":h)})};return se.jsxs("div",{className:"flex flex-col w-1/2 h-full px-5",children:[se.jsxs("div",{className:"flex w-full justify-between",children:[se.jsx("h1",{className:"pt-4 text-3xl font-serif text-gray-700",children:"Sign Up"}),se.jsx(Zx,{className:"w-8 h-8 mt-4 cursor-pointer",onClick:()=>e("/")})]}),se.jsx("div",{className:"flex flex-col w-full h-full justify-evenly lg:pr-9",children:se.jsxs("form",{method:"post",onSubmit:s,children:[se.jsxs("div",{class:"flex items-center w-full mb-6",children:[se.jsx("div",{class:"w-1/3",children:se.jsx("label",{class:"block text-center text-gray-500 font-bold mb-1 pr-4",for:"inline-fullName",children:"Full Name"})}),se.jsx("div",{class:"w-2/3",children:se.jsx("input",{class:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-fullName",name:"fullName",type:"text",placeholder:"John Doe",onChange:r,required:!0})})]}),se.jsxs("div",{class:"flex items-center w-full mb-6",children:[se.jsx("div",{class:"w-1/3",children:se.jsx("label",{class:"block text-center text-gray-500 font-bold mb-1 pr-4",for:"inline-email",children:"Email"})}),se.jsx("div",{class:"w-2/3",children:se.jsx("input",{class:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-email",name:"email",type:"email",placeholder:"abc@gmail.com",onChange:r,required:!0})})]}),se.jsxs("div",{class:"flex items-center w-full mb-6",children:[se.jsx("div",{class:"w-1/3",children:se.jsx("label",{class:"block text-center text-gray-500 font-bold mb-1 pr-4",for:"inline-password",children:"Set Password"})}),se.jsx("div",{class:"w-2/3",children:se.jsx("input",{class:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-password",name:"password",type:"password",placeholder:"********",onChange:r,required:!0})})]}),se.jsxs("div",{class:"flex items-center w-full mb-6",children:[se.jsx("div",{class:"w-1/3",children:se.jsx("label",{class:"block text-center text-gray-500 font-bold mb-1 pr-4",for:"inline-area",children:"Your Farm Area"})}),se.jsx("div",{class:"w-2/3",children:se.jsx("input",{class:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-area",name:"area",type:"number",placeholder:"In metres square",onChange:r,required:!0})})]}),se.jsxs("div",{className:"flex flex-col md:flex-row",children:[se.jsxs("div",{class:"flex items-center w-1/2 mb-6 pr-4",children:[se.jsx("div",{class:"w-2/5",children:se.jsx("label",{class:"block text-center text-gray-500 font-bold mb-1",for:"inline-country",children:"Country"})}),se.jsx("div",{class:"w-3/5",children:se.jsx("select",{class:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-country",name:"country",onChange:r,defaultValue:"India",children:t.map((o,a)=>se.jsx("option",{children:o},a))})})]}),se.jsxs("div",{class:"flex items-center w-1/2 mb-6",children:[se.jsx("div",{class:"w-1/3",children:se.jsx("label",{class:"block text-center text-gray-500 font-bold mb-1",for:"inline-zip",children:"Zip Code"})}),se.jsx("div",{class:"w-2/3",children:se.jsx("input",{class:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-zip",name:"zip",onChange:r,type:"text"})})]})]}),se.jsx("div",{className:"flex justify-center pt-2",children:se.jsx("button",{className:"bg-green-900 px-4 py-1 rounded-md text-white shadow-md shadow-gray-500",type:"submit",children:"Signup"})})]})})]})},FF=({setNewUser:t})=>{const e=td(),[n,i]=be.useState(""),[r,s]=be.useState(""),o=c=>{i(c.target.value)},a=c=>{s(c.target.value)},l=c=>{c.preventDefault(),console.log(n),console.log(r);const h=b1();Gk(h,n,r).then(d=>{const m=d.user;e("/dashboard"),console.log(m)}).catch(d=>{const m=d.code,p=d.message;console.log(m,p),alert(m==="auth/invalid-login-credentials"?"No user found with this email address or password.":p)})};return se.jsxs("div",{className:"flex flex-col w-1/2 h-full",children:[se.jsx("div",{className:"pl-5",children:se.jsxs("div",{className:"flex w-full justify-between",children:[se.jsx("h1",{className:"pt-4 text-3xl font-serif text-gray-700",children:"Login"}),se.jsx(Zx,{className:"w-8 h-8 mr-5 mt-4 cursor-pointer",onClick:()=>e("/")})]})}),se.jsxs("form",{onSubmit:l,class:"flex flex-col h-full justify-center",children:[se.jsxs("div",{class:"flex items-center mb-6",children:[se.jsx("div",{class:"w-1/3",children:se.jsx("label",{class:"block text-gray-500 font-bold text-center mb-1 md:mb-0 pr-4",for:"inline-email",children:"Email"})}),se.jsx("div",{class:"md:w-2/5",children:se.jsx("input",{class:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-email",type:"email",value:n,onChange:o,placeholder:"abc@gmail.com",required:!0})})]}),se.jsxs("div",{className:"md:flex md:items-center mb-6",children:[se.jsx("div",{className:"md:w-1/3",children:se.jsx("label",{class:"block text-gray-500 font-bold md:text-center mb-1 md:mb-0 pr-4",for:"inline-password",children:"Password"})}),se.jsx("div",{className:"md:w-2/5",children:se.jsx("input",{class:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500",id:"inline-password",type:"password",value:r,onChange:a,placeholder:"******************",required:!0})})]}),se.jsx("div",{class:"flex flex-row justify-center w-full",children:se.jsx("button",{class:"shadow-md bg-green-500 hover:bg-green-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded",type:"submit",children:"Login"})}),se.jsx("div",{className:"flex flex-row justify-center h-min",children:se.jsx("p",{onClick:()=>t(!0),className:"italic text-green-800 mt-3 cursor-pointer",children:"New User? Click here to Signup"})})]})]})},jF=()=>{const[t,e]=be.useState(!1);return se.jsx("div",{className:"w-full h-full absolute bg-gray-200",children:se.jsxs("div",{className:"m-8 h-[90%] flex flex-row border shadow-lg shadow-green-200 bg-white rounded-lg",children:[se.jsx("div",{className:"w-1/2 h-full bg-gradient-to-t from-white via-green-300 to-green-600 rounded-l-lg hidden md:block",children:se.jsx("img",{src:"./../src/assets/images/image-4.jpg",className:"shadow-lg h-full w-full opacity-50 border-r-2 border-green-950 rounded-l-lg"})}),t?se.jsx(MF,{}):se.jsx(FF,{setNewUser:e})]})})};function VF(){return se.jsx("div",{className:"App",children:se.jsx(MT,{children:se.jsxs(DT,{children:[se.jsx(Ao,{path:"/",element:se.jsx(N2,{})}),se.jsx(Ao,{path:"/login",element:se.jsx(jF,{})}),se.jsx(Ao,{path:"/dashboard",children:se.jsx(Ao,{index:!0,element:se.jsx(NF,{})})}),se.jsx(Ao,{path:"/about",element:se.jsx(LF,{})}),se.jsx(Ao,{path:"*",element:se.jsx(N2,{})})]})})})}Rg.createRoot(document.getElementById("root")).render(se.jsx(Cr.StrictMode,{children:se.jsx(VF,{})}));export{Lt as _};
